import{d as C,a4 as G,L as O,c as y,j as k,o as m,u as e,w as i,e as l,g as s,f as w,h,t as c,b as M,F as J,r as Q,I as ie,p as le,s as te,q as ne,m as re,v as de,G as ae,K as B,z as ce,H as ue}from"./vue-Cts3TEHg.js";import{_ as T}from"./FormFieldset-BDg23QuA.js";import{_ as p}from"./index-B8c7qEP3.js";import{_ as $}from"./FormGroupCheckbox-t9GUzJmC.js";import{a as N,u as X,d as se,f as _e}from"./usePlayerStore-DPy2bvYr.js";import{_ as z}from"./FormGroupSelect-BUEpf2Ry.js";import{u as R}from"./useVuelidateOnFormTab-DbA_UaVa.js";import{u as me,r as Z,n as q,d as fe}from"./index-Hn1RL1dT.js";import{_ as E,a as pe}from"./Tabs-CCW6jNJO.js";import{F as I,A as U,B as F}from"./RadioAdapters-DeTvpZIq.js";import{_ as D}from"./FormGroupMultiCheck-Co2X9y1a.js";import{_ as Y}from"./FormMarkup-B1oZzq5z.js";import{_ as oe}from"./Loading-vp9RNwAY.js";import{a as be}from"./router-B3NsYQ6y.js";import{l as ge}from"./lodash-Bdl6ys83.js";import{_ as he}from"./BitrateOptions-DxfPuLLr.js";import{m as ve}from"./mergeExisting-DGzkK79d.js";import{u as ye}from"./useVuelidateOnForm-Cv8B432y.js";import{a as ke,G as we}from"./acl--EkwNUY3.js";const xe={class:"row g-3 mb-3"},$e={class:"row g-3"},Se={class:"row g-3"},Le=C({__name:"ProfileForm",props:G({timezones:{}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(x){const v=O(x,"form"),{enableAdvancedFeatures:b}=N(),{v$:n,tabClass:o}=R(v,y(()=>{let u={name:{required:Z},description:{},genre:{},url:{url:me},timezone:{},enable_public_page:{},enable_on_demand:{},enable_on_demand_download:{}};return b&&(u={...u,short_name:{},api_history_items:{}}),u}),()=>{let u={name:"",description:"",genre:"",url:"",timezone:"UTC",enable_public_page:!0,enable_on_demand:!1,enable_on_demand_download:!0};return b&&(u={...u,short_name:"",api_history_items:5}),u}),{$gettext:r}=X(),a=y(()=>[{text:r("Disabled"),value:0},{text:"1",value:1},{text:"5",value:5},{text:"10",value:10},{text:"15",value:15}]);return(u,d)=>(m(),k(E,{label:e(r)("Profile"),"item-header-class":e(o)},{default:i(()=>[l("div",xe,[s(p,{id:"edit_form_name",class:"col-md-12",field:e(n).name,label:e(r)("Name")},null,8,["field","label"]),s(p,{id:"edit_form_description",class:"col-md-12",field:e(n).description,"input-type":"textarea",label:e(r)("Description")},null,8,["field","label"]),s(p,{id:"edit_form_genre",class:"col-md-6",field:e(n).genre,label:e(r)("Genre")},{description:i(()=>[h(c(e(r)('The primary genre this station plays, such as "rock", "electronic", or "talk".')),1)]),_:1},8,["field","label"]),s(p,{id:"edit_form_url",class:"col-md-6",field:e(n).url,"input-type":"url",label:e(r)("Web Site URL"),description:e(r)("Note: This should be the public-facing homepage of the radio station, not the Aplus URL. It will be included in broadcast details.")},null,8,["field","label","description"]),s(z,{id:"edit_form_timezone",class:"col-md-12",field:e(n).timezone,options:u.timezones,label:e(r)("Time Zone"),description:e(r)("Scheduled playlists and other timed items will be controlled by this time zone.")},null,8,["field","options","label","description"]),e(b)?(m(),k(p,{key:0,id:"edit_form_short_name",class:"col-md-6",field:e(n).short_name,advanced:"",label:e(r)("URL Stub")},{description:i(()=>[h(c(e(r)(`Optionally specify a short URL-friendly name, such as "my_station_name", that will be used in this station's URLs. Leave this field blank to automatically create one based on the station name.`)),1)]),_:1},8,["field","label"])):w("",!0),e(b)?(m(),k(z,{key:1,id:"edit_form_api_history_items",class:"col-md-6",field:e(n).api_history_items,advanced:"",options:a.value,label:e(r)("Number of Visible Recent Songs")},{description:i(()=>[h(c(e(r)('Customize the number of songs that will appear in the "Song History" section for this station and in all public APIs.')),1)]),_:1},8,["field","options","label"])):w("",!0)]),s(T,null,{label:i(()=>[h(c(e(r)("Public Pages")),1)]),default:i(()=>[l("div",$e,[s($,{id:"edit_form_enable_public_page",class:"col-md-12",field:e(n).enable_public_page,label:e(r)("Enable Public Pages"),description:e(r)("Show the station in public pages and general API results.")},null,8,["field","label","description"])])]),_:1}),s(T,null,{label:i(()=>[h(c(e(r)("On-Demand Streaming")),1)]),default:i(()=>[l("div",Se,[s($,{id:"edit_form_enable_on_demand",class:"col-md-12",field:e(n).enable_on_demand,label:e(r)("Enable On-Demand Streaming"),description:e(r)("If enabled, music from playlists with on-demand streaming enabled will be available to stream via a specialized public page.")},null,8,["field","label","description"]),v.value.enable_on_demand?(m(),k($,{key:0,id:"edit_form_enable_on_demand_download",class:"col-md-12",field:e(n).enable_on_demand_download,label:e(r)("Enable Downloads on On-Demand Page")},{description:i(()=>[h(c(e(r)('If enabled, a download button will also be present on the public "On-Demand" page.')),1)]),_:1},8,["field","label"])):w("",!0)])]),_:1})]),_:1},8,["label","item-header-class"]))}}),Ae={class:"row g-3 mb-3"},Me={key:0,class:"row g-3 mb-3"},Te={class:"row g-3 mb-3"},Pe={class:"badge small text-bg-primary ms-2"},qe={class:"row g-3 mb-3"},Ce={class:"row g-3 mb-3"},Ue={class:"col-md-5"},De={class:"col-md-7"},Be={class:"block-buttons"},Ie={class:"badge small text-bg-primary ms-2"},Fe={class:"row g-3"},Oe=C({__name:"FrontendForm",props:G({isRsasInstalled:{type:Boolean},isShoutcastInstalled:{type:Boolean},countries:{}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(x){const v=x,b=O(x,"form"),{enableAdvancedFeatures:n}=N(),{v$:o,tabClass:r}=R(b,y(()=>{let t={frontend_type:{required:Z},frontend_config:{sc_license_id:{},sc_user_id:{},source_pw:{},admin_pw:{}}};return n&&(t={...t,frontend_config:{...t.frontend_config,port:{numeric:q},max_listeners:{},custom_config:{},banned_ips:{},banned_countries:{},allowed_ips:{},banned_user_agents:{}}}),t}),()=>{let t={frontend_type:I.Icecast,frontend_config:{sc_license_id:"",sc_user_id:"",source_pw:"",admin_pw:""}};return n&&(t={...t,frontend_config:{...t.frontend_config,port:"",max_listeners:"",custom_config:"",banned_ips:"",banned_countries:[],allowed_ips:"",banned_user_agents:""}}),t}),{$gettext:a}=X(),u=y(()=>{const t=[{text:a("Use Icecast 2.4 on this server."),value:I.Icecast}];return v.isRsasInstalled&&t.push({text:a("Use Rocket Streaming Audio Server (RSAS) on this server."),value:I.Rsas}),v.isShoutcastInstalled&&t.push({text:a("Use Shoutcast DNAS 2 on this server."),value:I.Shoutcast}),t.push({text:a("Do not use a local broadcasting service."),value:I.Remote}),t}),d=y(()=>b.value.frontend_type!==I.Remote),A=y(()=>b.value.frontend_type===I.Shoutcast),P=()=>{b.value.frontend_config.banned_countries=[]};return(t,_)=>(m(),k(E,{label:e(a)("Broadcasting"),"item-header-class":e(r)},{default:i(()=>[l("div",Ae,[s(D,{id:"edit_form_frontend_type",class:"col-md-12",field:e(o).frontend_type,options:u.value,stacked:"",radio:"",label:e(a)("Local Broadcasting Service"),description:e(a)("This software is traditionally used to deliver your broadcast to your listeners. You can still broadcast remotely or via HLS if this service is disabled.")},null,8,["field","options","label","description"])]),d.value?(m(),M(J,{key:0},[A.value?(m(),M("div",Me,[s(p,{id:"edit_form_frontend_sc_license_id",class:"col-md-6",field:e(o).frontend_config.sc_license_id,label:e(a)("Shoutcast License ID")},null,8,["field","label"]),s(p,{id:"edit_form_frontend_sc_user_id",class:"col-md-6",field:e(o).frontend_config.sc_user_id,label:e(a)("Shoutcast User ID")},null,8,["field","label"])])):w("",!0),l("div",Te,[s(p,{id:"edit_form_frontend_source_pw",class:"col-md-6",field:e(o).frontend_config.source_pw,label:e(a)("Customize Source Password"),description:e(a)("Leave blank to automatically generate a new password.")},null,8,["field","label","description"]),s(p,{id:"edit_form_frontend_admin_pw",class:"col-md-6",field:e(o).frontend_config.admin_pw,label:e(a)("Customize Administrator Password"),description:e(a)("Leave blank to automatically generate a new password.")},null,8,["field","label","description"])]),e(n)?(m(),k(T,{key:1},{label:i(()=>[h(c(e(a)("Advanced Configuration"))+" ",1),l("span",Pe,c(e(a)("Advanced")),1)]),default:i(()=>[l("div",qe,[s(p,{id:"edit_form_frontend_port",class:"col-md-6",field:e(o).frontend_config.port,"input-type":"number","input-attrs":{min:"0"},label:e(a)("Customize Broadcasting Port"),description:e(a)("No other program can be using this port. Leave blank to automatically assign a port.")},null,8,["field","label","description"]),s(p,{id:"edit_form_max_listeners",class:"col-md-6",field:e(o).frontend_config.max_listeners,label:e(a)("Maximum Listeners"),description:e(a)("Maximum number of total listeners across all streams. Leave blank to use the default.")},null,8,["field","label","description"])]),l("div",Ce,[l("div",Ue,[s(p,{id:"edit_form_frontend_banned_ips",field:e(o).frontend_config.banned_ips,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(a)("Banned IP Addresses"),description:e(a)("List one IP address or group (in CIDR format) per line.")},null,8,["field","label","description"]),s(p,{id:"edit_form_frontend_allowed_ips",field:e(o).frontend_config.allowed_ips,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(a)("Allowed IP Addresses"),description:e(a)("List one IP address or group (in CIDR format) per line.")},null,8,["field","label","description"]),s(p,{id:"edit_form_frontend_banned_user_agents",field:e(o).frontend_config.banned_user_agents,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(a)("Banned User Agents"),description:e(a)("List one user agent per line. Wildcards (*) are allowed.")},null,8,["field","label","description"])]),l("div",De,[s(z,{id:"edit_form_frontend_banned_countries",field:e(o).frontend_config.banned_countries,options:t.countries,multiple:"",label:e(a)("Banned Countries"),description:e(a)("Select the countries that are not allowed to connect to the streams.")},null,8,["field","options","label","description"]),l("div",Be,[l("button",{type:"button",class:"btn btn-block btn-primary",onClick:P},c(e(a)("Clear List")),1)])])])]),_:1})):w("",!0),e(n)?(m(),k(T,{key:2},{label:i(()=>[h(c(e(a)("Custom Configuration"))+" ",1),l("span",Ie,c(e(a)("Advanced")),1)]),description:i(()=>[h(c(e(a)("This code will be included in the frontend configuration. Allowed formats are:"))+" ",1),_[0]||(_[0]=l("ul",null,[l("li",null,[h("JSON: "),l("code",null,'{"new_key": "new_value"}')]),l("li",null,[h("XML: "),l("code",null,"<new_key>new_value</new_key>")])],-1))]),default:i(()=>[l("div",Fe,[s(p,{id:"edit_form_frontend_custom_config",class:"col-md-12",field:e(o).frontend_config.custom_config,"input-type":"textarea","input-attrs":{class:"text-preformatted",spellcheck:"false","max-rows":25,rows:5},label:e(a)("Custom Configuration")},null,8,["field","label"])])]),_:1})):w("",!0)],64)):w("",!0)]),_:1},8,["label","item-header-class"]))}}),Re={class:"row g-3 mb-3"},Ee={key:0,class:"row g-3 mb-3"},ze={href:"/docs/help/optimizing/#disable-audio-post-processing",target:"_blank"},Ne={class:"row g-3 mb-3"},Je={href:"https://github.com/Moonbase59/autocue/",target:"_blank"},je={class:"row g-3 mb-3"},He={class:"card-text"},Ge={class:"card-text"},Ve={href:"https://github.com/trummerschlunk/master_me",target:"_blank"},We={class:"row g-3"},Ke={class:"card-text"},Ye={href:"https://www.thimeo.com/stereo-tool/",target:"_blank"},Qe={class:"row mb-3 g-3"},Xe={class:"card-text"},Ze={class:"badge small text-bg-primary ms-2"},et={class:"row g-3"},tt=C({__name:"BackendForm",props:G({isStereoToolInstalled:{type:Boolean}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(x){const v=x,b=O(x,"form"),{enableAdvancedFeatures:n}=N(),{v$:o,tabClass:r}=R(b,y(()=>{let g={backend_type:{required:Z},backend_config:{crossfade_type:{},crossfade:{decimal:fe},write_playlists_to_liquidsoap:{},audio_processing_method:{},post_processing_include_live:{},master_me_preset:{},master_me_loudness_target:{},stereo_tool_license_key:{},enable_auto_cue:{},enable_replaygain_metadata:{}}};return n&&(g={...g,backend_config:{...g.backend_config,telnet_port:{numeric:q},autodj_queue_length:{},use_manual_autodj:{},charset:{},performance_mode:{},duplicate_prevention_time_range:{}}}),g}),()=>{let g={backend_type:F.Liquidsoap,backend_config:{crossfade_type:"normal",crossfade:2,write_playlists_to_liquidsoap:!0,audio_processing_method:U.None,post_processing_include_live:!0,master_me_preset:"music_general",master_me_loudness_target:-16,stereo_tool_license_key:"",enable_auto_cue:!1,enable_replaygain_metadata:!1}};return n&&(g={...g,backend_config:{...g.backend_config,telnet_port:"",autodj_queue_length:3,use_manual_autodj:!1,charset:"UTF-8",performance_mode:"disabled",duplicate_prevention_time_range:120}}),g}),a=y(()=>{var g;return((g=b.value)==null?void 0:g.backend_type)!==F.None}),u=y(()=>{var g,f;return((f=(g=b.value)==null?void 0:g.backend_config)==null?void 0:f.audio_processing_method)===U.StereoTool}),d=y(()=>{var g,f;return((f=(g=b.value)==null?void 0:g.backend_config)==null?void 0:f.audio_processing_method)===U.MasterMe}),A=y(()=>{var g,f;return((f=(g=b.value)==null?void 0:g.backend_config)==null?void 0:f.audio_processing_method)!==U.None}),P=y(()=>{var g,f;return((f=(g=b.value)==null?void 0:g.backend_config)==null?void 0:f.enable_auto_cue)??!1}),{$gettext:t}=X(),_=y(()=>[{text:t("Use Liquidsoap on this server."),value:F.Liquidsoap},{text:t("Do not use an AutoDJ service."),value:F.None}]),j=y(()=>[{text:t("Smart Mode"),value:"smart"},{text:t("Normal Mode"),value:"normal"},{text:t("Disable Crossfading"),value:"none"}]),V=y(()=>{const g=[{text:t("No Post-processing"),value:U.None},{text:t("Basic Normalization and Compression"),value:U.Liquidsoap},{text:t("Master_me Post-processing"),value:U.MasterMe}];return v.isStereoToolInstalled&&g.push({text:t("Stereo Tool"),value:U.StereoTool}),g}),H=y(()=>[{text:"UTF-8",value:"UTF-8"},{text:"ISO-8859-1",value:"ISO-8859-1"}]),W=y(()=>[{text:t("Music General"),value:"music_general"},{text:t("Speech General"),value:"speech_general"},{text:t("EBU R128"),value:"ebu_r128"},{text:t("Apple Podcasts"),value:"apple_podcasts"},{text:t("YouTube"),value:"youtube"}]),K=y(()=>[{text:t("Use Less Memory (Uses More CPU)"),value:"less_memory"},{text:t("Balanced"),value:"balanced"},{text:t("Use Less CPU (Uses More Memory)"),value:"less_cpu"},{text:t("Disable Optimizations"),value:"disabled"}]);return(g,f)=>(m(),k(E,{label:e(t)("AutoDJ"),"item-header-class":e(r)},{default:i(()=>[l("div",Re,[s(D,{id:"edit_form_backend_type",class:"col-md-12",field:e(o).backend_type,options:_.value,stacked:"",radio:"",label:e(t)("AutoDJ Service"),description:e(t)("This software shuffles from playlists of music constantly and plays when no other radio source is available.")},null,8,["field","options","label","description"])]),a.value?(m(),M(J,{key:0},[P.value?w("",!0):(m(),M("div",Ee,[s(D,{id:"edit_form_backend_crossfade_type",class:"col-md-7",field:e(o).backend_config.crossfade_type,options:j.value,stacked:"",radio:"",label:e(t)("Crossfade Method"),description:e(t)("Choose a method to use when transitioning from one song to another. Smart Mode considers the volume of the two tracks when fading for a smoother effect, but requires more CPU resources.")},null,8,["field","options","label","description"]),s(p,{id:"edit_form_backend_crossfade",class:"col-md-5",field:e(o).backend_config.crossfade,"input-type":"number","input-attrs":{min:"0.0",max:"30.0",step:"0.1"},label:e(t)("Crossfade Duration (Seconds)"),description:e(t)("Number of seconds to overlap songs.")},null,8,["field","label","description"])])),s(T,null,{label:i(()=>[h(c(e(t)("Audio Processing")),1)]),description:i(()=>[h(c(e(t)("Apply audio processors (like compressors, limiters, or equalizers) to your stream to create a more uniform sound or enhance the listening experience. Processing requires extra CPU resources, so it may slow down your server."))+" ",1),l("a",ze,c(e(t)("Learn More about Post-processing CPU Impact")),1)]),default:i(()=>[l("div",Ne,[s($,{id:"edit_form_backend_config_enable_auto_cue",class:"col-md-12",field:e(o).backend_config.enable_auto_cue,label:e(t)("Enable AutoCue (Beta)"),"high-cpu":""},{description:i(()=>[h(c(e(t)("AutoCue analyzes your music and automatically calculates cue points, fade points, and volume levels for a consistent listening experience."))+" ",1),f[0]||(f[0]=l("br",null,null,-1)),l("a",Je,c(e(t)("Learn more about AutoCue")),1)]),_:1},8,["field","label"]),P.value?w("",!0):(m(),k($,{key:0,id:"edit_form_backend_enable_replaygain_metadata",class:"col-md-12",field:e(o).backend_config.enable_replaygain_metadata,label:e(t)("Enable ReplayGain"),"high-cpu":""},{description:i(()=>[h(c(e(t)("Calculate and use normalized volume level metadata for each track.")),1)]),_:1},8,["field","label"]))]),l("div",je,[s(D,{id:"edit_form_backend_config_audio_processing_method",class:"col-md-6",field:e(o).backend_config.audio_processing_method,options:V.value,stacked:"",radio:"",label:e(t)("Audio Post-processing Method"),description:e(t)("Select an option here to apply post-processing using an easy preset or tool. You can also manually apply post-processing by editing your Liquidsoap configuration manually."),"high-cpu":""},null,8,["field","options","label","description"]),A.value?(m(),k($,{key:0,id:"edit_form_backend_config_post_processing_include_live",class:"col-md-6",field:e(o).backend_config.post_processing_include_live,label:e(t)("Apply Post-processing to Live Streams"),description:e(t)("Check this box to apply post-processing to all audio, including live streams. Uncheck this box to only apply post-processing to the AutoDJ.")},null,8,["field","label","description"])):w("",!0)]),d.value?(m(),M(J,{key:0},[s(Y,{id:"master_me_info"},{label:i(()=>[h(c(e(t)("About Master_me")),1)]),default:i(()=>[l("p",He,c(e(t)("Master_me is an open-source automatic mastering plugin for streaming, podcasts and Internet radio.")),1),l("p",Ge,[l("a",Ve,c(e(t)("Master_me Project Homepage")),1)])]),_:1}),l("div",We,[s(D,{id:"edit_form_backend_master_me_preset",class:"col-md-6",field:e(o).backend_config.master_me_preset,options:W.value,stacked:"",radio:"",label:e(t)("Master_me Preset")},null,8,["field","options","label"]),s(p,{id:"edit_form_backend_master_me_loudness_target",class:"col-md-6",field:e(o).backend_config.master_me_loudness_target,"input-type":"number","input-attrs":{min:"-50",max:"0",step:"1"},label:e(t)("Master_me Loudness Target (LUFS)"),description:e(t)("The average target loudness (measured in LUFS) for the broadcasted stream. Values between -14 and -18 LUFS are common for Internet radio stations."),clearable:""},null,8,["field","label","description"])])],64)):w("",!0),u.value&&g.isStereoToolInstalled?(m(),M(J,{key:1},[s(Y,{id:"stereo_tool_info"},{label:i(()=>[h(c(e(t)("Stereo Tool")),1)]),default:i(()=>[l("p",Ke,[h(c(e(t)("Stereo Tool is an industry standard for software audio processing. For more information on how to configure it, please refer to the"))+" ",1),l("a",Ye,c(e(t)("Stereo Tool documentation.")),1)])]),_:1}),l("div",Qe,[s(p,{id:"edit_form_backend_stereo_tool_license_key",class:"col-md-7",field:e(o).backend_config.stereo_tool_license_key,"input-type":"text",label:e(t)("Stereo Tool License Key"),description:e(t)("Provide a valid license key from Thimeo. Functionality is limited without a license key.")},null,8,["field","label","description"]),s(Y,{id:"edit_form_backend_stereo_tool_config",class:"col-md-5"},{label:i(()=>[h(c(e(t)("Upload Stereo Tool Configuration")),1)]),default:i(()=>[l("p",Xe,c(e(t)('Upload a Stereo Tool configuration file from the "Broadcasting" submenu in the station profile.')),1)]),_:1})])],64)):w("",!0)]),_:1}),e(n)?(m(),k(T,{key:1},{label:i(()=>[h(c(e(t)("Advanced Configuration"))+" ",1),l("span",Ze,c(e(t)("Advanced")),1)]),default:i(()=>[l("div",et,[s($,{id:"edit_form_backend_use_manual_autodj",class:"col-md-12",field:e(o).backend_config.use_manual_autodj,label:e(t)("Manual AutoDJ Mode")},{description:i(()=>[h(c(e(t)(`This mode disables Aplus's AutoDJ management, using Liquidsoap itself to manage song playback. "next song" and some other features will not be available.`)),1)]),_:1},8,["field","label"]),s($,{id:"edit_form_backend_config_write_playlists_to_liquidsoap",class:"col-md-12",field:e(o).backend_config.write_playlists_to_liquidsoap,label:e(t)("Always Write Playlists to Liquidsoap"),description:e(t)("By default, all playlists are written to Liquidsoap as a backup in case the normal AutoDJ fails. This can affect CPU load, especially on startup. Disable to only write essential playlists to Liquidsoap.")},null,8,["field","label","description"]),s(p,{id:"edit_form_backend_telnet_port",class:"col-md-6",field:e(o).backend_config.telnet_port,"input-type":"number","input-attrs":{min:"0"},label:e(t)("Customize Internal Request Processing Port"),description:e(t)("This port is not used by any external process. Only modify this port if the assigned port is in use. Leave blank to automatically assign a port.")},null,8,["field","label","description"]),s(p,{id:"edit_form_backend_autodj_queue_length",class:"col-md-6",field:e(o).backend_config.autodj_queue_length,"input-type":"number","input-attrs":{min:"2",max:"25"},label:e(t)("AutoDJ Queue Length"),description:e(t)("This determines how many songs in advance the AutoDJ will automatically fill the queue.")},null,8,["field","label","description"]),s(D,{id:"edit_form_backend_charset",class:"col-md-6",field:e(o).backend_config.charset,options:H.value,stacked:"",radio:"",label:e(t)("Character Set Encoding"),description:e(t)("For most cases, use the default UTF-8 encoding. The older ISO-8859-1 encoding can be used if accepting connections from Shoutcast 1 DJs or using other legacy software.")},null,8,["field","options","label","description"]),s(D,{id:"edit_form_backend_performance_mode",class:"col-md-6",field:e(o).backend_config.performance_mode,options:K.value,stacked:"",radio:"",label:e(t)("Liquidsoap Performance Tuning"),description:e(t)("If your installation is constrained by CPU or memory, you can change this setting to tune the resources used by Liquidsoap.")},null,8,["field","options","label","description"]),s(p,{id:"edit_form_backend_duplicate_prevention_time_range",class:"col-md-6",field:e(o).backend_config.duplicate_prevention_time_range,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:e(t)("Duplicate Prevention Time Range (Minutes)"),description:e(t)("This specifies the time range (in minutes) of the song history that the duplicate song prevention algorithm should take into account.")},null,8,["field","label","description"])])]),_:1})):w("",!0)],64)):w("",!0)]),_:1},8,["label","item-header-class"]))}}),at={class:"row g-3 mb-3"},st={class:"row g-3 mb-3"},ot={class:"row g-3"},it=C({__name:"AdminForm",props:G({isEditMode:{type:Boolean}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(x){const v=x,b=O(x,"form"),n=be("/admin/stations/storage-locations"),{enableAdvancedFeatures:o}=N(),{v$:r,tabClass:a}=R(b,y(()=>{let _={is_enabled:{},media_storage_location:{},recordings_storage_location:{},podcasts_storage_location:{},max_bitrate:{},max_mounts:{},max_hls_streams:{}};return o&&(_={..._,radio_base_dir:{}}),_}),()=>{let _={media_storage_location:"",recordings_storage_location:"",podcasts_storage_location:"",is_enabled:!0,max_bitrate:0,max_mounts:0,max_hls_streams:0};return o&&(_={..._,radio_base_dir:""}),_}),u=Q(!0),d=ie({media_storage_location:{},recordings_storage_location:{},podcasts_storage_location:{}}),A=_=>v.isEditMode?ge.omit(_,[""]):_,{axios:P}=se();return le(()=>{P.get(n.value).then(_=>{d.media_storage_location=A(_.data.media_storage_location),d.recordings_storage_location=A(_.data.recordings_storage_location),d.podcasts_storage_location=A(_.data.podcasts_storage_location)}).finally(()=>{u.value=!1})}),(_,j)=>(m(),k(E,{label:_.$gettext("Administration"),"item-header-class":e(a)},{default:i(()=>[l("div",at,[s($,{id:"edit_form_is_enabled",class:"col-md-6",field:e(r).is_enabled,label:_.$gettext("Enable Broadcasting"),description:_.$gettext("If disabled, the station will not broadcast or shuffle its AutoDJ.")},null,8,["field","label","description"]),e(o)?(m(),k(p,{key:0,id:"edit_form_radio_base_dir",class:"col-md-6",field:e(r).radio_base_dir,advanced:"",label:_.$gettext("Base Station Directory"),description:_.$gettext("The parent directory where station playlist and configuration files are stored. Leave blank to use default directory.")},null,8,["field","label","description"])):w("",!0)]),l("div",st,[s(p,{id:"edit_form_max_bitrate",class:"col-md-4",field:e(r).max_bitrate,label:_.$gettext("Maximum Bitrate"),description:_.$gettext("The maximum bitrate in which the station allowed to broadcast at, in Kbps. 0 for unlimited.")},null,8,["field","label","description"]),s(p,{id:"edit_form_max_mounts",class:"col-md-4",field:e(r).max_mounts,label:_.$gettext("Maximum Mounts"),description:_.$gettext("The maximum number of mount points allowed. 0 for unlimited.")},null,8,["field","label","description"]),s(p,{id:"edit_form_max_hls_streams",class:"col-md-4",field:e(r).max_hls_streams,label:_.$gettext("Maximum Hls Streams"),description:_.$gettext("The maximum number of HLS streams allowed. 0 for unlimited.")},null,8,["field","label","description"])]),s(oe,{loading:u.value},{default:i(()=>[l("div",ot,[s(z,{id:"edit_form_media_storage_location",class:"col-md-12",field:e(r).media_storage_location,options:d.media_storage_location,label:_.$gettext("Media Storage Location")},null,8,["field","options","label"]),s(z,{id:"edit_form_recordings_storage_location",class:"col-md-12",field:e(r).recordings_storage_location,options:d.recordings_storage_location,label:_.$gettext("Live Recordings Storage Location")},null,8,["field","options","label"]),s(z,{id:"edit_form_podcasts_storage_location",class:"col-md-12",field:e(r).podcasts_storage_location,options:d.podcasts_storage_location,label:_.$gettext("Podcasts Storage Location")},null,8,["field","options","label"])])]),_:1},8,["loading"])]),_:1},8,["label","item-header-class"]))}}),lt={class:"card-text"},ee=C({__name:"BackendDisabled",setup(x){return(v,b)=>(m(),k(T,null,{label:i(()=>[h(c(v.$gettext("No AutoDJ Enabled")),1)]),default:i(()=>[l("p",lt,c(v.$gettext("This feature requires the AutoDJ feature to be enabled.")),1)]),_:1}))}}),nt={class:"row g-3 mb-3"},rt={key:0,class:"row g-3 mb-3"},dt={key:1,class:"row g-3 mb-3"},ct=C({__name:"HlsForm",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(x){const v=O(x,"form"),{enableAdvancedFeatures:b}=N(),{v$:n,tabClass:o}=R(v,y(()=>{let u={enable_hls:{},backend_config:{hls_enable_on_public_player:{},hls_is_default:{}}};return b&&(u={...u,backend_config:{...u.backend_config,hls_segment_length:{numeric:q},hls_segments_in_playlist:{numeric:q},hls_segments_overhead:{numeric:q}}}),u}),()=>{let u={enable_hls:!1,backend_config:{hls_enable_on_public_player:!1,hls_is_default:!1}};return b&&(u={...u,backend_config:{...u.backend_config,hls_segment_length:4,hls_segments_in_playlist:5,hls_segments_overhead:2}}),u}),r=y(()=>v.value.backend_type!==F.None),a=y(()=>o.value?o.value:r.value?null:"text-muted");return(u,d)=>(m(),k(E,{label:u.$gettext("HLS"),"item-header-class":a.value},{default:i(()=>[r.value?(m(),k(T,{key:0},{label:i(()=>[h(c(u.$gettext("HTTP Live Streaming (HLS)")),1)]),description:i(()=>[h(c(u.$gettext("HTTP Live Streaming (HLS) is a new adaptive-bitrate technology supported by some clients. It does not use the standard broadcasting frontends.")),1)]),default:i(()=>[l("div",nt,[s($,{id:"edit_form_enable_hls",class:"col-md-12",field:e(n).enable_hls,label:u.$gettext("Enable HTTP Live Streaming (HLS)")},null,8,["field","label"])]),v.value.enable_hls?(m(),M("div",rt,[s($,{id:"edit_form_backend_hls_enable_on_public_player",class:"col-md-12",field:e(n).backend_config.hls_enable_on_public_player,label:u.$gettext("Show HLS Stream on Public Player")},null,8,["field","label"]),s($,{id:"edit_form_backend_hls_is_default",class:"col-md-12",field:e(n).backend_config.hls_is_default,label:u.$gettext("Make HLS Stream Default in Public Player")},null,8,["field","label"])])):w("",!0),e(b)&&v.value.enable_hls?(m(),M("div",dt,[s(p,{id:"edit_form_backend_hls_segment_length",class:"col-md-4",field:e(n).backend_config.hls_segment_length,"input-type":"number","input-attrs":{min:"0",max:"9999"},advanced:"",label:u.$gettext("Segment Length (Seconds)")},null,8,["field","label"]),s(p,{id:"edit_form_backend_hls_segments_in_playlist",class:"col-md-4",field:e(n).backend_config.hls_segments_in_playlist,"input-type":"number","input-attrs":{min:"0",max:"60"},advanced:"",label:u.$gettext("Segments in Playlist")},null,8,["field","label"]),s(p,{id:"edit_form_backend_hls_segments_overhead",class:"col-md-4",field:e(n).backend_config.hls_segments_overhead,"input-type":"number","input-attrs":{min:"0",max:"60"},advanced:"",label:u.$gettext("Segments Overhead")},null,8,["field","label"])])):w("",!0)]),_:1})):(m(),k(ee,{key:1}))]),_:1},8,["label","item-header-class"]))}}),ut={class:"row g-3 mb-3"},_t={key:0,class:"row g-3 mb-3"},mt=C({__name:"RequestsForm",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(x){const v=O(x,"form"),{v$:b,tabClass:n}=R(v,{enable_requests:{},request_delay:{numeric:q},request_threshold:{numeric:q}},{enable_requests:!1,request_delay:5,request_threshold:15}),o=y(()=>v.value.backend_type!==F.None),r=y(()=>n.value?n.value:o.value?null:"text-muted");return(a,u)=>(m(),k(E,{label:a.$gettext("Song Requests"),"item-header-class":r.value},{default:i(()=>[o.value?(m(),k(T,{key:0},{label:i(()=>[h(c(a.$gettext("Song Requests")),1)]),description:i(()=>[h(c(a.$gettext("Some stream licensing providers may have specific rules regarding song requests. Check your local regulations for more information.")),1)]),default:i(()=>[l("div",ut,[s($,{id:"edit_form_enable_requests",class:"col-md-12",field:e(b).enable_requests,label:a.$gettext("Allow Song Requests"),description:a.$gettext("Enable listeners to request a song for play on your station. Only songs that are already in your playlists are requestable.")},null,8,["field","label","description"])]),v.value.enable_requests?(m(),M("div",_t,[s(p,{id:"edit_form_request_delay",class:"col-md-6",field:e(b).request_delay,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:a.$gettext("Request Minimum Delay (Minutes)"),description:a.$gettext("If requests are enabled, this specifies the minimum delay (in minutes) between a request being submitted and being played. If set to zero, a minor delay of 15 seconds is applied to prevent request floods.")},null,8,["field","label","description"]),s(p,{id:"edit_form_request_threshold",class:"col-md-6",field:e(b).request_threshold,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:a.$gettext("Request Last Played Threshold (Minutes)"),description:a.$gettext("This specifies the minimum time (in minutes) between a song playing on the radio and being available to request again. Set to 0 for no threshold.")},null,8,["field","label","description"])])):w("",!0)]),_:1})):(m(),k(ee,{key:1}))]),_:1},8,["label","item-header-class"]))}}),ft={class:"row g-3 mb-3"},pt={class:"row g-3 mb-3"},bt={key:0,class:"row g-3 mb-3"},gt={class:"row g-3 mb-3"},ht=C({__name:"StreamersForm",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(x){const v=O(x,"form"),{enableAdvancedFeatures:b}=N(),{v$:n,tabClass:o}=R(v,y(()=>{let d={enable_streamers:{},disconnect_deactivate_streamer:{},backend_config:{record_streams:{},record_streams_format:{},record_streams_bitrate:{},dj_buffer:{numeric:q},live_broadcast_text:{}}};return b&&(d={...d,backend_config:{...d.backend_config,dj_port:{numeric:q},dj_mount_point:{}}}),d}),()=>{let d={enable_streamers:!1,disconnect_deactivate_streamer:0,backend_config:{record_streams:!1,record_streams_format:"mp3",record_streams_bitrate:128,dj_buffer:5,live_broadcast_text:"Live Broadcast"}};return b&&(d={...d,backend_config:{...d.backend_config,dj_port:"",dj_mount_point:"/"}}),d}),r=y(()=>v.value.backend_type!==F.None),a=y(()=>o.value?o.value:r.value?null:"text-muted"),u=y(()=>[{text:"MP3",value:"mp3"},{text:"OGG Vorbis",value:"ogg"},{text:"OGG Opus",value:"opus"},{text:"AAC+ (MPEG4 HE-AAC v2)",value:"aac"}]);return(d,A)=>(m(),k(E,{label:d.$gettext("Streamers/DJs"),"item-header-class":a.value},{default:i(()=>[r.value?(m(),k(T,{key:0},{label:i(()=>[h(c(d.$gettext("Streamers/DJs")),1)]),default:i(()=>[l("div",ft,[s($,{id:"edit_form_enable_streamers",class:"col-md-12",field:e(n).enable_streamers,label:d.$gettext("Allow Streamers / DJs"),description:d.$gettext("If enabled, streamers (or DJs) will be able to connect directly to your stream and broadcast live music that interrupts the AutoDJ stream.")},null,8,["field","label","description"])]),v.value.enable_streamers?(m(),M(J,{key:0},[l("div",pt,[s($,{id:"edit_form_backend_record_streams",class:"col-md-12",field:e(n).backend_config.record_streams,label:d.$gettext("Record Live Broadcasts"),description:d.$gettext("If enabled, Aplus will automatically record any live broadcasts made to this station to per-broadcast recordings.")},null,8,["field","label","description"])]),v.value.backend_config.record_streams?(m(),M("div",bt,[s(D,{id:"edit_form_backend_record_streams_format",class:"col-md-6",field:e(n).backend_config.record_streams_format,options:u.value,stacked:"",radio:"",label:d.$gettext("Live Broadcast Recording Format")},null,8,["field","options","label"]),s(he,{id:"edit_form_backend_record_streams_bitrate",class:"col-md-6","max-bitrate":v.value.max_bitrate,field:e(n).backend_config.record_streams_bitrate,label:d.$gettext("Live Broadcast Recording Bitrate (kbps)")},null,8,["max-bitrate","field","label"])])):w("",!0),l("div",gt,[s(p,{id:"edit_form_disconnect_deactivate_streamer",class:"col-md-6",field:e(n).disconnect_deactivate_streamer,"input-type":"number","input-attrs":{min:"0"}},{label:i(()=>[h(c(d.$gettext("Deactivate Streamer on Disconnect (Seconds)")),1)]),description:i(()=>[h(c(d.$gettext("This is the number of seconds until a streamer who has been manually disconnected can reconnect to the stream. Set to 0 to allow the streamer to immediately reconnect.")),1)]),_:1},8,["field"]),e(b)?(m(),k(p,{key:0,id:"edit_form_backend_dj_port",class:"col-md-6",field:e(n).backend_config.dj_port,"input-type":"number","input-attrs":{min:"0"},advanced:"",label:d.$gettext("Customize DJ/Streamer Port")},{description:i(()=>[h(c(d.$gettext("No other program can be using this port. Leave blank to automatically assign a port."))+" ",1),A[0]||(A[0]=l("br",null,null,-1)),h(" "+c(d.$gettext("Note: the port after this one will automatically be used for legacy connections.")),1)]),_:1},8,["field","label"])):w("",!0),s(p,{id:"edit_form_backend_dj_buffer",class:"col-md-6",field:e(n).backend_config.dj_buffer,"input-type":"number","input-attrs":{min:"0",max:"60"},label:d.$gettext("DJ/Streamer Buffer Time (Seconds)"),description:d.$gettext("The number of seconds of signal to store in case of interruption. Set to the lowest value that your DJs can use without stream interruptions.")},null,8,["field","label","description"]),e(b)?(m(),k(p,{key:1,id:"edit_form_backend_dj_mount_point",class:"col-md-6",field:e(n).backend_config.dj_mount_point,advanced:"",label:d.$gettext("Customize DJ/Streamer Mount Point"),description:d.$gettext("If your streaming software requires a specific mount point path, specify it here. Otherwise, use the default.")},null,8,["field","label","description"])):w("",!0),s(p,{id:"edit_form_backend_live_broadcast_text",class:"col-md-6",field:e(n).backend_config.live_broadcast_text,label:d.$gettext("Default Live Broadcast Message"),description:d.$gettext("If a live DJ connects but has not yet sent metadata, this is the message that will display on player pages.")},null,8,["field","label","description"])])],64)):w("",!0)]),_:1})):(m(),k(ee,{key:1}))]),_:1},8,["label","item-header-class"]))}}),vt={class:"buttons mt-3"},Rt=C({inheritAttrs:!1,__name:"StationForm",props:{createUrl:{},editUrl:{},isEditMode:{type:Boolean},isModal:{type:Boolean,default:!1},timezones:{},isRsasInstalled:{type:Boolean,default:!1},isShoutcastInstalled:{type:Boolean,default:!1},isStereoToolInstalled:{type:Boolean,default:!1},countries:{}},emits:["error","submitted","loadingUpdate","validUpdate"],setup(x,{expose:v,emit:b}){const n=x,o=b,r=ke(we.Stations),{form:a,resetForm:u,v$:d,ifValid:A}=ye(),P=y(()=>{var f;return!((f=d.value)!=null&&f.$invalid)});te(P,f=>{o("validUpdate",f)});const t=Q(!0);te(t,f=>{o("loadingUpdate",f)});const _=Q(null),j=()=>{u(),t.value=!1,_.value=null},{notifySuccess:V}=_e(),{axios:H}=se(),W=()=>{t.value=!0,H.get(n.editUrl).then(({data:f})=>{a.value=ve(a.value,f)}).catch(f=>{o("error",f)}).finally(()=>{t.value=!1})},K=()=>{ne(()=>{j(),n.isEditMode&&W()})},g=()=>{A(()=>{_.value=null,H({method:n.isEditMode?"PUT":"POST",url:n.isEditMode?n.editUrl:n.createUrl,data:a.value}).then(()=>{V(),o("submitted")}).catch(f=>{_.value=f.response.data.message})})};return v({reset:K,submit:g}),(f,S)=>(m(),k(oe,{loading:t.value},{default:i(()=>[re(l("div",{class:"alert alert-danger"},c(_.value),513),[[de,_.value!=null]]),l("form",{class:"form vue-form",onSubmit:ue(g,["prevent"])},[s(pe,{"content-class":"mt-3"},{default:i(()=>[s(Le,{form:e(a),"onUpdate:form":S[0]||(S[0]=L=>B(a)?a.value=L:null),timezones:f.timezones},null,8,["form","timezones"]),s(Oe,{form:e(a),"onUpdate:form":S[1]||(S[1]=L=>B(a)?a.value=L:null),"is-rsas-installed":f.isRsasInstalled,"is-shoutcast-installed":f.isShoutcastInstalled,countries:f.countries},null,8,["form","is-rsas-installed","is-shoutcast-installed","countries"]),s(tt,{form:e(a),"onUpdate:form":S[2]||(S[2]=L=>B(a)?a.value=L:null),"is-stereo-tool-installed":f.isStereoToolInstalled},null,8,["form","is-stereo-tool-installed"]),s(ct,{form:e(a),"onUpdate:form":S[3]||(S[3]=L=>B(a)?a.value=L:null)},null,8,["form"]),s(mt,{form:e(a),"onUpdate:form":S[4]||(S[4]=L=>B(a)?a.value=L:null)},null,8,["form"]),s(ht,{form:e(a),"onUpdate:form":S[5]||(S[5]=L=>B(a)?a.value=L:null)},null,8,["form"]),e(r)?(m(),k(it,{key:0,form:e(a),"onUpdate:form":S[6]||(S[6]=L=>B(a)?a.value=L:null),"is-edit-mode":f.isEditMode},null,8,["form","is-edit-mode"])):w("",!0)]),_:1}),ae(f.$slots,"submitButton",{},()=>[l("div",vt,[l("button",{type:"submit",class:ce(["btn btn-lg",P.value?"btn-primary":"btn-danger"])},[ae(f.$slots,"submitButtonText",{},()=>[h(c(f.$gettext("Save Changes")),1)])],2)])])],32)]),_:3},8,["loading"]))}});export{Rt as _};
