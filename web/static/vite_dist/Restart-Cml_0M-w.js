import{d as x,f as R,u as w}from"./usePlayerStore-DS4JWrVc.js";import{g as u}from"./router-DKP-J9qz.js";import{b as B}from"./router-DNNhXLID.js";import{u as C}from"./useDialog-CxBg2-5w.js";import{d as k,r as A,b as r,e as t,t as o,u as e,F as _,o as c}from"./vue-Cts3TEHg.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./index-TG6t8ei9.js";const S={class:"outside-card-header mb-1"},T={class:"row"},U={class:"col col-md-6"},D={class:"card",role:"region","aria-labelledby":"hdr_soft_reload"},F={class:"card-header text-bg-primary"},N={id:"hdr_soft_reload",class:"card-title"},Y={class:"card-body"},E={class:"card-text"},I={class:"card-text has-text-weight-bold text-body-emphasis"},L={class:"card-text text-success"},V={class:"buttons"},$=["disabled"],j={key:1,class:"card-text text-danger"},q={class:"col col-md-6"},z={class:"card",role:"region","aria-labelledby":"hdr_restart_broadcasting"},G={class:"card-header text-bg-primary"},H={id:"hdr_restart_broadcasting",class:"card-title"},J={class:"card-body"},K={class:"card-text"},M={class:"card-text has-text-weight-bold text-body-emphasis"},O={class:"buttons"},P=["disabled"],nt=k({__name:"Restart",props:{canReload:{type:Boolean}},setup(Q){const h=u("/reload"),g=u("/restart"),n=A(!1),{axios:p}=x(),{showAlert:d}=C(),{notify:b}=R(),{$gettext:s}=w(),f=B(),l=a=>{n.value=!0,p.post(a).then(i=>{b(i.data.formatted_message,{variant:i.data.success?"success":"warning"}),setTimeout(()=>{const v=f.resolve({name:"stations:index"});window.location.href=v.href},2e3)}).finally(()=>{n.value=!1})},m=()=>{d({title:s("Are you sure?"),confirmButtonClass:"btn-warning",confirmButtonText:s("Reload Configuration")}).then(a=>{a.value&&l(h.value)})},y=()=>{d({title:s("Are you sure?"),confirmButtonClass:"btn-warning",confirmButtonText:s("Restart Broadcasting")}).then(a=>{a.value&&l(g.value)})};return(a,i)=>(c(),r(_,null,[t("h2",S,o(e(s)("Update Station Configuration")),1),t("div",T,[t("div",U,[t("section",D,[t("div",F,[t("h3",N,o(e(s)("Reload Configuration")),1)]),t("div",Y,[t("p",E,o(e(s)("Stations using Icecast can soft-reload the station configuration, applying changes while keeping the stream broadcast running.")),1),t("p",I,o(e(s)("Reloading broadcasting will not disconnect your listeners.")),1),a.canReload?(c(),r(_,{key:0},[t("p",L,o(e(s)("Your station supports reloading configuration.")),1),t("div",V,[t("button",{type:"button",class:"btn btn-warning",disabled:n.value,onClick:m},o(e(s)("Reload Configuration")),9,$)])],64)):(c(),r("p",j,o(e(s)("Your station does not support reloading configuration. Restart broadcasting instead to apply changes.")),1))])])]),t("div",q,[t("section",z,[t("div",G,[t("h3",H,o(e(s)("Restart Broadcasting")),1)]),t("div",J,[t("p",K,o(e(s)("Restarting broadcasting will rewrite all configuration files and restart all services.")),1),t("p",M,o(e(s)("Restarting broadcasting will briefly disconnect your listeners.")),1),t("div",O,[t("button",{type:"button",class:"btn btn-warning",disabled:n.value,onClick:y},o(e(s)("Restart Broadcasting")),9,P)])])])])])],64))}});export{nt as default};
