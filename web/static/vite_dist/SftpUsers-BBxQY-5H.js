import{_ as B}from"./DataTable-DlNNRBXZ.js";import{_ as h}from"./index-CK5gn8hD.js";import{u as D}from"./useVuelidateOnFormTab-B5w9we2H.js";import{r as E}from"./index-C5jhSXy3.js";import{d as S,a4 as K,L as A,c as U,b as g,o as $,g as n,u as e,w as i,i as l,t as s,x as N,j as v,h as R,K as V,e as o,f as q}from"./vue-DTJ-1uEH.js";import{u as L}from"./useBaseEditModal-BbnzFG_e.js";import{u as P}from"./usePlayerStore-DgYe3TjK.js";import{_ as O}from"./ModalForm-DKWosWxb.js";import{u as j}from"./useHasDatatable-DPFcIMM0.js";import{u as Y,_ as z}from"./AddButton-DAUnaOXQ.js";import{u as G}from"./useConfirmAndDelete-97z2l6sJ.js";import{_ as T}from"./CardPage-D-r1d3Gj.js";import{g as J}from"./router-CTDx8gfL.js";import"./lodash-Bdl6ys83.js";import"./lodash-BwctMegf.js";import"./icons-BVVFRq1s.js";import"./FormMultiCheck-CTsnYoEJ.js";import"./FormCheckbox-AsanX38Q.js";import"./useOptionalStorage-DITHAk2f.js";import"./index-CL6ZUZxu.js";import"./useFormField-g35ZicrT.js";import"./FormGroup-BNI6R37d.js";import"./useVuelidateOnForm-DTqLR35P.js";import"./mergeExisting-BH6wPZw0.js";import"./bootstrap.esm-BZy605kZ.js";import"./InvisibleSubmitButton-CAE8DMRX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useSlotsExcept-BSzLfLLp.js";import"./useHasModal-cvuvy1JJ.js";import"./Loading-CxLO-rjm.js";import"./useDialog-DJwVTu1-.js";import"./InfoCard-Db4untlq.js";const Q={class:"row g-3"},W=S({__name:"Form",props:K({isEditMode:{type:Boolean}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(u){const d=u,t=A(u,"form"),{v$:a}=D(t,U(()=>({username:{required:E},password:d.isEditMode?{}:{required:E},publicKeys:{}})),{username:"",password:null,publicKeys:null});return(r,m)=>($(),g("div",Q,[n(h,{id:"edit_form_username",class:"col-md-6",field:e(a).username},{label:i(()=>[l(s(r.$gettext("Username")),1)]),_:1},8,["field"]),n(h,{id:"edit_form_password",class:"col-md-6",field:e(a).password,"input-type":"password"},N({_:2},[r.isEditMode?{name:"label",fn:i(()=>[l(s(r.$gettext("New Password")),1)]),key:"0"}:{name:"label",fn:i(()=>[l(s(r.$gettext("Password")),1)]),key:"1"},r.isEditMode?{name:"description",fn:i(()=>[l(s(r.$gettext("Leave blank to use the current password.")),1)]),key:"2"}:void 0]),1032,["field"]),n(h,{id:"edit_form_publicKeys",class:"col-md-12",field:e(a).publicKeys,"input-type":"textarea"},{label:i(()=>[l(s(r.$gettext("SSH Public Keys")),1)]),description:i(()=>[l(s(r.$gettext("Optionally supply SSH public keys this user can use to connect instead of a password. Enter one key per line.")),1)]),_:1},8,["field"])]))}}),X=S({__name:"EditModal",props:{createUrl:{}},emits:["relist"],setup(u,{expose:d,emit:t}){const a=u,r=t,m=v("$modal"),{loading:f,error:y,isEditMode:_,form:p,v$:c,clearContents:w,create:b,edit:k,doSubmit:x,close:F}=L(a,r,m,{},{}),{$gettext:M}=P(),H=U(()=>_.value?M("Edit SFTP User"):M("Add SFTP User"));return d({create:b,edit:k,close:F}),(de,C)=>($(),R(O,{ref_key:"$modal",ref:m,loading:e(f),title:H.value,error:e(y),"disable-save-button":e(c).$invalid,onSubmit:e(x),onHidden:e(w)},{default:i(()=>[n(W,{form:e(p),"onUpdate:form":C[0]||(C[0]=I=>V(p)?p.value=I:null),"is-edit-mode":e(_)},null,8,["form","is-edit-mode"])]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}}),Z={class:"row"},ee={class:"col-md-8"},te={class:"btn-group btn-group-sm"},oe=["onClick"],se=["onClick"],re={class:"col-md-4"},ie={class:"card-body"},ne={class:"mb-1"},ae={key:0},le={class:"mb-1"},qe=S({__name:"SftpUsers",props:{connectionInfo:{}},setup(u){const d=J("/sftp-users"),{$gettext:t}=P(),a=[{key:"username",isRowHeader:!0,label:t("Username"),sortable:!1},{key:"actions",label:t("Actions"),sortable:!1,class:"shrink"}],r=v("$dataTable"),{relist:m}=j(r),f=v("$editModal"),{doCreate:y,doEdit:_}=Y(f),{doDelete:p}=G(t("Delete SFTP User?"),m);return(c,w)=>($(),g("div",Z,[o("div",ee,[n(T,{"header-id":"hdr_sftp_users",title:e(t)("SFTP Users")},{actions:i(()=>[n(z,{text:e(t)("Add SFTP User"),onClick:e(y)},null,8,["text","onClick"])]),default:i(()=>[n(B,{id:"station_sftp_users",ref_key:"$dataTable",ref:r,"show-toolbar":!1,fields:a,"api-url":e(d)},{"cell(actions)":i(b=>[o("div",te,[o("button",{type:"button",class:"btn btn-primary",onClick:k=>e(_)(b.item.links.self)},s(e(t)("Edit")),9,oe),o("button",{type:"button",class:"btn btn-danger",onClick:k=>e(p)(b.item.links.self)},s(e(t)("Delete")),9,se)])]),_:1},8,["api-url"])]),_:1},8,["title"])]),o("div",re,[n(T,{"header-id":"hdr_connection_info",title:e(t)("Connection Information")},{default:i(()=>[o("div",ie,[o("dl",null,[o("dt",ne,s(e(t)("Server:")),1),o("dd",null,[o("code",null,s(c.connectionInfo.url),1)]),c.connectionInfo.ip?($(),g("dd",ae,[l(s(e(t)("You may need to connect directly to your IP address:"))+" ",1),o("code",null,s(c.connectionInfo.ip),1)])):q("",!0),o("dt",le,s(e(t)("Port:")),1),o("dd",null,[o("code",null,s(c.connectionInfo.port),1)])])])]),_:1},8,["title"])]),n(X,{ref_key:"$editModal",ref:f,"create-url":e(d),onRelist:e(m)},null,8,["create-url","onRelist"])]))}});export{qe as default};
