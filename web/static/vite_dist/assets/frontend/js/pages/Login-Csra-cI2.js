import{d as v,i as $}from"../../../../usePlayerStore-KLtIIp-S.js";import{u as A}from"../../../../MinimalLayout-BjdN8Ivl.js";import{l as k,_ as c,k as C}from"../../../../icons-Yf7pfv1X.js";import{u as S}from"../../../../useWebAuthn-CjSxi_fw.js";import{d as N,j as x,r as u,p as V,b as s,o as n,e as t,f as p,t as a,g as m,u as i,q as P}from"../../../../vue-B-dHMJBO.js";import"../../../../bootstrap.esm-BZy605kZ.js";import"../../../../lodash-BwctMegf.js";import"../../../../MinimalLayout-NGJ7mFAZ.js";import"../../../../lodash-Bdl6ys83.js";const B={class:"public-page"},E={class:"card p-2"},I={class:"card-body"},U={class:"row mb-4"},q={class:"col-sm"},D={key:0,class:"card-title text-center"},F={key:1,class:"card-title text-center"},M={key:2,class:"card-subtitle text-center text-muted"},R={id:"login-form",action:"",method:"post"},W={class:"form-group"},L={for:"username",class:"mb-2 d-flex align-items-center gap-2"},T=["placeholder","aria-label"],j={class:"form-group mt-3"},z={for:"password",class:"mb-2 d-flex align-items-center gap-2"},J=["placeholder","aria-label"],K={class:"block-buttons mt-3 mb-3"},O=["title"],G=["action"],H=["value"],Q=N({__name:"Login",props:{hideProductName:{type:Boolean},instanceName:{},forgotPasswordUrl:{},webAuthnUrl:{}},setup(h){const _=h,{isSupported:b,isConditionalSupported:f,doValidate:g}=S(),{axios:w}=v(),r=x("$webAuthnForm"),l=u(null),d=u(null),y=async e=>{var o;d.value=JSON.stringify(e),await P(),(o=r.value)==null||o.submit()};return V(async()=>{if(await f()){l.value=await w.get(_.webAuthnUrl).then(o=>o.data);try{const o=await g(l.value,!0);await y(o)}catch(o){console.error(o)}}}),(e,o)=>(n(),s("div",B,[t("div",E,[t("div",I,[t("div",U,[t("div",q,[e.hideProductName?(n(),s("h2",D,a(e.$gettext("Coolpaa_Welcome!")),1)):(n(),s("h2",F,a(e.$gettext("Coolpaa_Welcome to AzuraCast!")),1)),e.instanceName?(n(),s("h3",M,a(e.instanceName),1)):p("",!0)])]),t("form",R,[t("div",W,[t("label",L,[m(c,{icon:i(k)},null,8,["icon"]),t("strong",null,a(e.$gettext("Coolpa___E-mail Address")),1)]),t("input",{id:"username",type:"email",name:"username",class:"form-control",autocomplete:"username webauthn",placeholder:e.$gettext("name@example.com"),"aria-label":e.$gettext("Colpa_E-mail Address"),required:"",autofocus:""},null,8,T)]),t("div",j,[t("label",z,[m(c,{icon:i(C)},null,8,["icon"]),t("strong",null,a(e.$gettext("Password")),1)]),t("input",{id:"password",type:"password",name:"password",class:"form-control",autocomplete:"current-password",placeholder:e.$gettext("Enter your password"),"aria-label":e.$gettext("Colpa__Password"),required:""},null,8,J)]),t("div",K,[t("button",{type:"submit",role:"button",title:e.$gettext("Sign In"),class:"btn btn-login btn-primary"},a(e.$gettext("Sign In")),9,O)])]),i(b)?(n(),s("form",{key:0,id:"webauthn-form",ref_key:"$webAuthnForm",ref:r,action:e.webAuthnUrl,method:"post"},[t("input",{type:"hidden",name:"validateData",value:d.value},null,8,H)],8,G)):p("",!0)])])]))}});$(A(Q));
