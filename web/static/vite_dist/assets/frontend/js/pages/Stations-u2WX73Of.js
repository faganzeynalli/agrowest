import{u as $,a as O,b as V,r as q,c as F,d as w,e as U,_ as a,i as N}from"../../../../usePlayerStore-BlBABSf7.js";import{i as H,c as W,a as j}from"../../../../router-CIKHY1kb.js";import{_ as z}from"../../../../PanelLayout-BDS3qVxA.js";import{f as J,_ as Q,p as l}from"../../../../populateComponentRemotely-Dchtlcsp.js";import{u as o,S as n}from"../../../../acl-BB-pjnes.js";import{I as Y,a as G,b as K,c as X,d as Z,e as ee,f as te,g as se,h as ae,i as oe}from"../../../../icons-Be1GHOkw.js";import{c as t,d as M,r as L,a as B,b as x,o as y,e as m,f as A,g as _,w as k,h as ne,t as v,u as f,F as S,i as ie,j as re,n as le,k as me,l as ue}from"../../../../vue-Cts3TEHg.js";import{g as i}from"../../../../router-BM8d8xiL.js";import{u as pe}from"../../../../useStationDateTimeFormatter-BhT1ixPB.js";import{u as ce}from"../../../../luxon-DgfqPo3b.js";import{u as _e}from"../../../../index-DP9oPqoW.js";import{_ as de}from"../../../../Lightbox-zgmbLVpf.js";import{_ as be}from"../../../../HeaderInlinePlayer-CP02bo6A.js";import{u as ve}from"../../../../lightbox-CLViexMZ.js";import"../../../../bootstrap.esm-BZy605kZ.js";import"../../../../lodash-BwctMegf.js";import"../../../../useOptionalStorage-BdJu5QYI.js";import"../../../../lodash-Bdl6ys83.js";import"../../../../datetime-BTmRqpun.js";import"../../../../InlinePlayer-BGT77zbL.js";import"../../../../useShowVolume-B7zU9B3z.js";import"../../../../hlsjs-Cx0E5yqS.js";import"../../../../formatTime-DvDPwXf4.js";import"../../../../MuteButton-xwg5N4tr.js";function fe(){const{$gettext:e}=$(),{enableAdvancedFeatures:u}=O(),s=V(),r=o(n.Media),b=q(()=>{const d={key:"profile",label:t(()=>e("Profile")),icon:Y,items:[]},g={key:"public_page",label:t(()=>e("Public Page")),icon:G,url:s.publicPageUrl,external:!0,visible:s.enablePublicPages},P={key:"media",label:t(()=>e("Media")),icon:K,visible:s.features.media,items:[{key:"music_files",label:t(()=>e("Music Files")),url:{name:"stations:files:index"},visible:r},{key:"duplicate_songs",label:t(()=>e("Duplicate Songs")),url:{name:"stations:files:index",params:{path:"special:duplicates"}},visible:r},{key:"unprocessable",label:t(()=>e("Unprocessable Files")),url:{name:"stations:files:index",params:{path:"special:unprocessable"}},visible:r},{key:"unassigned",label:t(()=>e("Unassigned Files")),url:{name:"stations:files:index",params:{path:"special:unassigned"}},visible:r},{key:"ondemand",label:t(()=>e("On-Demand Media")),url:s.onDemandUrl,external:!0,visible:s.enableOnDemand}]},E={key:"playlists",label:t(()=>e("Playlists")),icon:X,url:{name:"stations:playlists:index"},visible:r&&s.features.media},R={key:"podcasts",label:t(()=>e("Podcasts")),icon:Z,url:{name:"stations:podcasts:index"},visible:o(n.Podcasts)&&s.features.podcasts},I={key:"streaming",label:t(()=>e("Live Streaming")),icon:ee,visible:o(n.Streamers)&&s.features.streamers,items:[{key:"streamers",label:t(()=>e("Streamer/DJ Accounts")),url:{name:"stations:streamers:index"},visible:o(n.Streamers)},{key:"webdj",label:t(()=>e("Web DJ")),url:s.webDjUrl,external:!0,visible:s.enablePublicPages}]},h={key:"webhooks",label:t(()=>e("Web Hooks")),icon:te,url:{name:"stations:webhooks:index"},visible:o(n.WebHooks)&&s.features.webhooks},T={key:"reports",label:t(()=>e("Reports")),icon:se,visible:o(n.Reports),items:[{key:"reports_overview",label:t(()=>e("Station Statistics")),url:{name:"stations:reports:overview"}},{key:"reports_listeners",label:t(()=>e("Listeners")),url:{name:"stations:reports:listeners"}},{key:"reports_requests",label:t(()=>e("Song Requests")),url:{name:"stations:reports:requests"},visible:o(n.Broadcasting)&&s.enableRequests},{key:"reports_timeline",label:t(()=>e("Song Playback Timeline")),url:{name:"stations:reports:timeline"}},{key:"reports_soundexchange",label:t(()=>e("SoundExchange Royalties")),url:{name:"stations:reports:soundexchange"}}]},p={key:"broadcasting",label:t(()=>e("Broadcasting")),icon:ae,items:[{key:"mounts",label:t(()=>e("Mount Points")),url:{name:"stations:mounts:index"},visible:o(n.MountPoints)&&s.features.mountPoints},{key:"hls_streams",label:t(()=>e("HLS Streams")),url:{name:"stations:hls_streams:index"},visible:o(n.MountPoints)&&s.features.hlsStreams},{key:"remotes",label:t(()=>e("Remote Relays")),url:{name:"stations:remotes:index"},visible:o(n.RemoteRelays)&&s.features.remoteRelays},{key:"fallback",label:t(()=>e("Custom Fallback File")),url:{name:"stations:fallback"},visible:o(n.Broadcasting)&&s.features.media},{key:"ls_config",label:t(()=>e("Edit Liquidsoap Configuration")),url:{name:"stations:util:ls_config"},visible:o(n.Broadcasting)&&s.features.customLiquidsoapConfig},{key:"stereo_tool",label:t(()=>e("Upload Stereo Tool Configuration")),url:{name:"stations:stereo_tool_config"},visible:s.features.media&&u&&o(n.Broadcasting)},{key:"queue",label:t(()=>e("Upcoming Song Queue")),url:{name:"stations:queue:index"},visible:o(n.Broadcasting)&&s.features.autoDjQueue},{key:"restart",label:t(()=>e("Restart Broadcasting")),url:{name:"stations:restart:index"},visible:o(n.Broadcasting)}]},c={key:"logs",label:t(()=>e("Logs")),icon:oe,url:{name:"stations:logs"},visible:o(n.Logs)};return{categories:[d,g,P,E,R,I,h,T,p,c]}});return J(b)}function C(){return _e("station-restart")}function Ze(){const e=C();return{mayNeedRestart:()=>{e.emit(!1)}}}const ge={class:"navdrawer-header offcanvas-header"},he={class:"d-flex align-items-center"},ye=["title"],ke={key:0,class:"navdrawer-alert bg-success-subtle text-success-emphasis"},Ee={class:"fw-bold"},xe={key:1,class:"navdrawer-alert bg-warning-subtle text-warning-emphasis"},Pe={class:"fw-bold"},Re={class:"offcanvas-body"},Ie=M({__name:"Sidebar",setup(e){const u=fe(),{name:s,hasStarted:r,needsRestart:b}=V(),{DateTime:d}=ce(),{now:g,formatDateTimeAsTime:P}=pe(),E=L("");F(()=>{E.value=P(g(),d.TIME_WITH_SHORT_OFFSET)},1e3,{immediate:!0,immediateCallback:!0});const R=C(),I=i("/restart-status"),h=L(b),{axios:T}=w();return R.on(p=>{p?h.value=!0:T.get(I.value).then(({data:c})=>{h.value=c.needs_restart})}),(p,c)=>{const D=B("router-link");return y(),x(S,null,[m("div",ge,[m("div",he,[_(D,{to:{name:"stations:index"},class:"navbar-brand px-0 flex-fill"},{default:k(()=>[ne(v(f(s))+" ",1),m("div",{id:"station-time",class:"fs-6",title:p.$gettext("Station Time")},v(E.value),9,ye)]),_:1})])]),f(o)(f(n).Broadcasting)?(y(),x(S,{key:0},[f(r)?h.value?(y(),x("div",xe,[_(D,{to:{name:"stations:restart:index"}},{default:k(()=>[m("span",Pe,v(p.$gettext("Reload to Apply Changes")),1),c[1]||(c[1]=m("br",null,null,-1)),m("small",null,v(p.$gettext("Your station has changes that require a reload to apply.")),1)]),_:1})])):A("",!0):(y(),x("div",ke,[_(D,{to:{name:"stations:restart:index"}},{default:k(()=>[m("span",Ee,v(p.$gettext("Start Station")),1),c[0]||(c[0]=m("br",null,null,-1)),m("small",null,v(p.$gettext("Ready to start broadcasting? Click to start your station.")),1)]),_:1})]))],64)):A("",!0),m("div",Re,[_(Q,{menu:f(u)},null,8,["menu"])])],64)}}}),Te=M({__name:"StationsLayout",setup(e){const u=U(),s=ie("$lightbox");return ve(s),(r,b)=>{const d=B("router-view");return y(),re(z,le(me(f(u))),{sidebar:k(()=>[_(Ie)]),default:k(()=>[_(d),_(be),_(de,{ref_key:"$lightbox",ref:s},null,512)]),_:1},16)}}});function De(){return[{path:"/",component:()=>a(()=>import("../../../../Profile-DGi3ekxE.js"),[]),name:"stations:index"},{path:"/branding",component:()=>a(()=>import("../../../../Branding-BtohK7Wu.js"),[]),name:"stations:branding"},{path:"/bulk-media",component:()=>a(()=>import("../../../../BulkMedia-COSNz8RL.js"),[]),name:"stations:bulk-media"},{path:"/fallback",component:()=>a(()=>import("../../../../Fallback-CmR1qN0_.js"),[]),name:"stations:fallback"},{path:"/files/:path?",component:()=>a(()=>import("../../../../Media-BsbjPwDb.js"),[]),name:"stations:files:index",...l(i("/vue/files"))},{path:"/hls_streams",component:()=>a(()=>import("../../../../HlsStreams-DdmdJlQ8.js"),[]),name:"stations:hls_streams:index"},{path:"/ls_config",component:()=>a(()=>import("../../../../LiquidsoapConfig-B3NTzHzR.js"),[]),name:"stations:util:ls_config"},{path:"/stereo_tool_config",component:()=>a(()=>import("../../../../StereoToolConfig-DtSGkaNv.js"),[]),name:"stations:stereo_tool_config"},{path:"/logs",component:()=>a(()=>import("../../../../Logs-B_3ZK9vq.js"),[]),name:"stations:logs"},{path:"/playlists",component:()=>a(()=>import("../../../../Playlists-TvHC1Y8d.js"),[]),name:"stations:playlists:index",...l(i("/vue/playlists"))},{path:"/podcasts",component:()=>a(()=>import("../../../../Podcasts-BDSrRn9c.js"),[]),name:"stations:podcasts:index",...l(i("/vue/podcasts"))},{path:"/podcast/:podcast_id",component:()=>a(()=>import("../../../../PodcastEpisodes-yUs1Xi5N.js"),[]),name:"stations:podcast:episodes",beforeEnter:async(e,u,s)=>{const r=e.params.podcast_id,b=i(`/podcast/${r}`),{axios:d}=w();e.meta.state={podcast:await d.get(b.value).then(g=>g.data)},s()},props:e=>e.meta.state},{path:"/profile",name:"stations:profile:index",redirect:{name:"stations:index"}},{path:"/mounts",component:()=>a(()=>import("../../../../Mounts-BN-nTjLF.js"),[]),name:"stations:mounts:index",...l(i("/vue/mounts"))},{path:"/profile/edit",component:()=>a(()=>import("../../../../ProfileEdit-C96SzIfU.js"),[]),name:"stations:profile:edit",...l(i("/vue/profile/edit"))},{path:"/queue",component:()=>a(()=>import("../../../../Queue-CRQ8u1XH.js"),[]),name:"stations:queue:index"},{path:"/remotes",component:()=>a(()=>import("../../../../Remotes-D5kXBpKX.js"),[]),name:"stations:remotes:index"},{path:"/reports/overview",component:()=>a(()=>import("../../../../Overview-krO_9LYC.js"),[]),name:"stations:reports:overview",...l(i("/vue/reports/overview"))},{path:"/reports/timeline",component:()=>a(()=>import("../../../../Timeline-C6NpzoIR.js"),[]),name:"stations:reports:timeline"},{path:"/reports/listeners",component:()=>a(()=>import("../../../../Listeners-C824xsSe.js"),[]),name:"stations:reports:listeners",...l(i("/vue/reports/listeners"))},{path:"/reports/soundexchange",component:()=>a(()=>import("../../../../SoundExchange-B1PgDjtr.js"),[]),name:"stations:reports:soundexchange"},{path:"/reports/requests",component:()=>a(()=>import("../../../../Requests-Bd6nAvZE.js"),[]),name:"stations:reports:requests"},{path:"/restart",component:()=>a(()=>import("../../../../Restart-DUjFoisH.js"),[]),name:"stations:restart:index",...l(i("/vue/restart"))},{path:"/sftp_users",component:()=>a(()=>import("../../../../SftpUsers-DBOQjSSO.js"),[]),name:"stations:sftp_users:index",...l(i("/vue/sftp_users"))},{path:"/streamers",component:()=>a(()=>import("../../../../Streamers-CzTMemUE.js"),[]),name:"stations:streamers:index",...l(i("/vue/streamers"))},{path:"/webhooks",component:()=>a(()=>import("../../../../Webhooks-C6lhDbvs.js"),[]),name:"stations:webhooks:index"}]}N({render(){return ue(Te)}},e=>{const u=De(),{componentProps:s}=O();H(W({history:j(s.baseUrl),routes:u}),e)});export{Ze as u};
