import{d as h,j as i,h as y,o as l,w,g as s,A as f,u as d,N as v,b as g,e as t,f as k,t as c,H as q,F as B}from"../../../../../vue-DTJ-1uEH.js";import{_ as H}from"../../../../../SongHistory-CMoIgYse.js";import{u as A,_ as M}from"../../../../../useHasModal-cvuvy1JJ.js";import{_ as S}from"../../../../../Requests-BI4z7T-_.js";import{L as R,_,C as x,K as C}from"../../../../../icons-BVVFRq1s.js";import{_ as F}from"../../../../../Player-Blk2VP1s.js";import{_ as L}from"../../../../../Lightbox-B7TAdnOB.js";import{u as N}from"../../../../../lightbox-Cb_2lrH-.js";import{i as U}from"../../../../../usePlayerStore-DgYe3TjK.js";import{u as I}from"../../../../../MinimalLayout-CBiY4z-X.js";import"../../../../../AlbumArt-D0N5gbUO.js";import"../../../../../_plugin-vue_export-helper-DlAUqK2U.js";import"../../../../../luxon-BLS1Vti_.js";import"../../../../../datetime-BTmRqpun.js";import"../../../../../bootstrap.esm-BZy605kZ.js";import"../../../../../Loading-CxLO-rjm.js";import"../../../../../index-CL6ZUZxu.js";import"../../../../../DataTable-DlNNRBXZ.js";import"../../../../../lodash-Bdl6ys83.js";import"../../../../../lodash-BwctMegf.js";import"../../../../../FormMultiCheck-CTsnYoEJ.js";import"../../../../../FormCheckbox-AsanX38Q.js";import"../../../../../useOptionalStorage-DITHAk2f.js";import"../../../../../useShowVolume-CKdBujV1.js";import"../../../../../hlsjs-Cx0E5yqS.js";import"../../../../../PlayButton-B-gntdgh.js";import"../../../../../useNowPlaying-BcQkwq3W.js";import"../../../../../router-CTDx8gfL.js";import"../../../../../formatTime-DvDPwXf4.js";import"../../../../../MuteButton-BCysCd9c.js";import"../../../../../MinimalLayout-BZ3Y-u6I.js";const P=h({__name:"SongHistoryModal",props:{history:{},showAlbumArt:{type:Boolean,default:!0}},setup(m,{expose:r}){const a=i("$modal"),{show:n}=A(a);return r({open:n}),(e,p)=>(l(),y(M,{id:"song_history_modal",ref_key:"$modal",ref:a,size:"md",title:e.$gettext("Song History"),centered:""},{default:w(()=>[s(H,{"show-album-art":e.showAlbumArt,history:e.history},null,8,["show-album-art","history"])]),_:1},8,["title"]))}}),V=h({inheritAttrs:!1,__name:"RequestModal",props:{requestListUri:{},showAlbumArt:{type:Boolean},customFields:{}},setup(m,{expose:r}){const a=m,n=i("$modal"),{show:e,hide:p}=A(n);return r({open:e}),(u,b)=>(l(),y(M,{id:"request_modal",ref_key:"$modal",ref:n,size:"lg",title:u.$gettext("Request a Song"),"hide-footer":""},{default:w(()=>[s(S,f(a,{onSubmitted:d(p)}),null,16,["onSubmitted"])]),_:1},8,["title"]))}}),z={class:"public-page"},D={class:"card"},T={class:"card-body"},j={class:"card-title mb-3"},E={class:"stations nowplaying"},K={class:"card-body buttons pt-0"},G=["href"],J=h({__name:"FullPlayer",props:{stationName:{},enableRequests:{type:Boolean,default:!1},downloadPlaylistUri:{},offlineText:{},showHls:{type:Boolean},showAlbumArt:{type:Boolean},autoplay:{type:Boolean},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean},requestListUri:{},customFields:{}},setup(m){const r=m,a=v([]),n=o=>{a.value=o==null?void 0:o.song_history},e=i("$songHistoryModal"),p=()=>{var o;(o=e.value)==null||o.open()},u=i("$requestModal"),b=()=>{var o;(o=u.value)==null||o.open()},$=i("$lightbox");return N($),(o,O)=>(l(),g(B,null,[t("div",z,[t("div",D,[t("div",T,[t("h2",j,c(o.stationName),1),t("div",E,[s(F,f(r,{onNp_updated:n}),null,16)])]),t("div",K,[t("a",{class:"btn btn-link text-secondary",onClick:q(p,["prevent"])},[s(_,{icon:d(R)},null,8,["icon"]),t("span",null,c(o.$gettext("Song History")),1)]),o.enableRequests?(l(),g("a",{key:0,class:"btn btn-link text-secondary",onClick:q(b,["prevent"])},[s(_,{icon:d(x)},null,8,["icon"]),t("span",null,c(o.$gettext("Request Song")),1)])):k("",!0),t("a",{class:"btn btn-link text-secondary",href:o.downloadPlaylistUri},[s(_,{icon:d(C)},null,8,["icon"]),t("span",null,c(o.$gettext("Playlist")),1)],8,G)])])]),s(P,{ref_key:"$songHistoryModal",ref:e,"show-album-art":o.showAlbumArt,history:a.value},null,8,["show-album-art","history"]),o.enableRequests?(l(),y(V,f({key:0,ref_key:"$requestModal",ref:u},r),null,16)):k("",!0),s(L,{ref_key:"$lightbox",ref:$},null,512)],64))}});U(I(J));
