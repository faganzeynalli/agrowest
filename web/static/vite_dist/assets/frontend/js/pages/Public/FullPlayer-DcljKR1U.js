import{d as h,j as i,h as y,o as l,w as q,g as s,A as f,u as d,N as v,b as g,e as t,f as k,t as c,E as M,F as B}from"../../../../../vue-B-dHMJBO.js";import{_ as S}from"../../../../../SongHistory-CpTSA4xw.js";import{u as w,_ as A}from"../../../../../useHasModal-By0OKlXq.js";import{_ as H}from"../../../../../Requests-BzzENbRR.js";import{N as R,_,E as x,M as N}from"../../../../../icons-Yf7pfv1X.js";import{_ as C}from"../../../../../Player-BnsF7aFy.js";import{_ as F}from"../../../../../Lightbox-CyVEhnVk.js";import{u as U}from"../../../../../lightbox-BJHiTgc7.js";import{i as L}from"../../../../../usePlayerStore-KLtIIp-S.js";import{u as E}from"../../../../../MinimalLayout-BjdN8Ivl.js";import"../../../../../AlbumArt-3z3lJYbm.js";import"../../../../../_plugin-vue_export-helper-DlAUqK2U.js";import"../../../../../luxon-Dh54MNAX.js";import"../../../../../datetime-BTmRqpun.js";import"../../../../../bootstrap.esm-BZy605kZ.js";import"../../../../../Loading-B4WK-6A0.js";import"../../../../../index-DXvg9C8z.js";import"../../../../../DataTable-vHTsgTi6.js";import"../../../../../lodash-Bdl6ys83.js";import"../../../../../lodash-BwctMegf.js";import"../../../../../FormMultiCheck-C8kU6V99.js";import"../../../../../FormCheckbox-CBrIHDuX.js";import"../../../../../useOptionalStorage-BvRWWVwv.js";import"../../../../../useShowVolume-BWrcCy71.js";import"../../../../../hlsjs-Cx0E5yqS.js";import"../../../../../PlayButton-CHwgdHi6.js";import"../../../../../useNowPlaying-CaFREK8b.js";import"../../../../../router-CjgRDsAC.js";import"../../../../../formatTime-DvDPwXf4.js";import"../../../../../MuteButton-CQGiAlAY.js";import"../../../../../MinimalLayout-NGJ7mFAZ.js";const I=h({__name:"SongHistoryModal",props:{history:{},showAlbumArt:{type:Boolean,default:!0}},setup(m,{expose:r}){const a=i("$modal"),{show:n}=w(a);return r({open:n}),(e,p)=>(l(),y(A,{id:"song_history_modal",ref_key:"$modal",ref:a,size:"md",title:e.$gettext("Song History"),centered:""},{default:q(()=>[s(S,{"show-album-art":e.showAlbumArt,history:e.history},null,8,["show-album-art","history"])]),_:1},8,["title"]))}}),P=h({inheritAttrs:!1,__name:"RequestModal",props:{requestListUri:{},showAlbumArt:{type:Boolean},customFields:{}},setup(m,{expose:r}){const a=m,n=i("$modal"),{show:e,hide:p}=w(n);return r({open:e}),(u,b)=>(l(),y(A,{id:"request_modal",ref_key:"$modal",ref:n,size:"lg",title:u.$gettext("Request a Song"),"hide-footer":""},{default:q(()=>[s(H,f(a,{onSubmitted:d(p)}),null,16,["onSubmitted"])]),_:1},8,["title"]))}}),V={class:"public-page"},z={class:"card"},D={class:"card-body"},T={class:"card-title mb-3"},j={class:"stations nowplaying"},G={class:"card-body buttons pt-0"},J=["href"],K=h({__name:"FullPlayer",props:{stationName:{},enableRequests:{type:Boolean,default:!1},downloadPlaylistUri:{},offlineText:{},showHls:{type:Boolean},showAlbumArt:{type:Boolean},autoplay:{type:Boolean},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean},requestListUri:{},customFields:{}},setup(m){const r=m,a=v([]),n=o=>{a.value=o==null?void 0:o.song_history},e=i("$songHistoryModal"),p=()=>{var o;(o=e.value)==null||o.open()},u=i("$requestModal"),b=()=>{var o;(o=u.value)==null||o.open()},$=i("$lightbox");return U($),(o,O)=>(l(),g(B,null,[t("div",V,[t("div",z,[t("div",D,[t("h2",T,c(o.stationName),1),t("div",j,[s(C,f(r,{onNp_updated:n}),null,16)])]),t("div",G,[t("a",{class:"btn btn-link text-secondary",onClick:M(p,["prevent"])},[s(_,{icon:d(R)},null,8,["icon"]),t("span",null,c(o.$gettext("Song History")),1)]),o.enableRequests?(l(),g("a",{key:0,class:"btn btn-link text-secondary",onClick:M(b,["prevent"])},[s(_,{icon:d(x)},null,8,["icon"]),t("span",null,c(o.$gettext("Request Song")),1)])):k("",!0),t("a",{class:"btn btn-link text-secondary",href:o.downloadPlaylistUri},[s(_,{icon:d(N)},null,8,["icon"]),t("span",null,c(o.$gettext("Playlist")),1)],8,J)])])]),s(I,{ref_key:"$songHistoryModal",ref:e,"show-album-art":o.showAlbumArt,history:a.value},null,8,["show-album-art","history"]),o.enableRequests?(l(),y(P,f({key:0,ref_key:"$requestModal",ref:u},r),null,16)):k("",!0),s(F,{ref_key:"$lightbox",ref:$},null,512)],64))}});L(E(K));
