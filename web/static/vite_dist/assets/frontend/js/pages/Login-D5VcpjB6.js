import{d as v,i as $}from"../../../../usePlayerStore-DrK7fhNm.js";import{u as A}from"../../../../MinimalLayout-BhWV-zmv.js";import{k,_ as c,j as S}from"../../../../icons-Be1GHOkw.js";import{u as N}from"../../../../useWebAuthn-CjSxi_fw.js";import{d as x,i as C,r as u,p as V,b as a,o as n,e as t,f as m,t as s,g as p,u as i,q as P}from"../../../../vue-Cts3TEHg.js";import"../../../../bootstrap.esm-BZy605kZ.js";import"../../../../lodash-BwctMegf.js";import"../../../../MinimalLayout-DMEMl-Lf.js";import"../../../../lodash-Bdl6ys83.js";const B={class:"public-page"},E={class:"card p-2"},I={class:"card-body"},U={class:"row mb-4"},q={class:"col-sm"},D={key:0,class:"card-title text-center"},F={key:1,class:"card-title text-center"},M={key:2,class:"card-subtitle text-center text-muted"},R={id:"login-form",action:"",method:"post"},W={class:"form-group"},L={for:"username",class:"mb-2 d-flex align-items-center gap-2"},T=["placeholder","aria-label"],j={class:"form-group mt-3"},J={for:"password",class:"mb-2 d-flex align-items-center gap-2"},K=["placeholder","aria-label"],O={class:"block-buttons mt-3 mb-3"},z=["title"],G=["action"],H=["value"],Q=x({__name:"Login",props:{hideProductName:{type:Boolean},instanceName:{},forgotPasswordUrl:{},webAuthnUrl:{}},setup(h){const _=h,{isSupported:b,isConditionalSupported:f,doValidate:g}=N(),{axios:w}=v(),r=C("$webAuthnForm"),l=u(null),d=u(null),y=async e=>{var o;d.value=JSON.stringify(e),await P(),(o=r.value)==null||o.submit()};return V(async()=>{if(await f()){l.value=await w.get(_.webAuthnUrl).then(o=>o.data);try{const o=await g(l.value,!0);await y(o)}catch(o){console.error(o)}}}),(e,o)=>(n(),a("div",B,[t("div",E,[t("div",I,[t("div",U,[t("div",q,[e.hideProductName?(n(),a("h2",D,s(e.$gettext("Welcome!")),1)):(n(),a("h2",F,s(e.$gettext("Welcome to Aplus!")),1)),e.instanceName?(n(),a("h3",M,s(e.instanceName),1)):m("",!0)])]),t("form",R,[t("div",W,[t("label",L,[p(c,{icon:i(k)},null,8,["icon"]),t("strong",null,s(e.$gettext("E-mail Address")),1)]),t("input",{id:"username",type:"email",name:"username",class:"form-control",autocomplete:"username webauthn",placeholder:e.$gettext("name@example.com"),"aria-label":e.$gettext("E-mail Address"),required:"",autofocus:""},null,8,T)]),t("div",j,[t("label",J,[p(c,{icon:i(S)},null,8,["icon"]),t("strong",null,s(e.$gettext("Password")),1)]),t("input",{id:"password",type:"password",name:"password",class:"form-control",autocomplete:"current-password",placeholder:e.$gettext("Enter your password"),"aria-label":e.$gettext("Password"),required:""},null,8,K)]),t("div",O,[t("button",{type:"submit",role:"button",title:e.$gettext("Sign In"),class:"btn btn-login btn-primary"},s(e.$gettext("Sign In")),9,z)])]),i(b)?(n(),a("form",{key:0,id:"webauthn-form",ref_key:"$webAuthnForm",ref:r,action:e.webAuthnUrl,method:"post"},[t("input",{type:"hidden",name:"validateData",value:d.value},null,8,H)],8,G)):m("",!0)])])]))}});$(A(Q));
