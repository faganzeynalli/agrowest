import{u as F,a as V,b as w,r as q,c as U,d as O,e as N,_ as a,i as H}from"../../../../usePlayerStore-CrWhEdqk.js";import{i as j,c as W,a as z}from"../../../../router-ChzbwHil.js";import{_ as J}from"../../../../PanelLayout-CgEqeYFf.js";import{I as Q,a as Y,b as G,c as K,d as X,e as Z,f as ee,g as te,h as se,i as ae,j as oe,_ as ne}from"../../../../icons-MnSirWYG.js";import{f as ie,_ as re,p as m}from"../../../../populateComponentRemotely-C75n_jAu.js";import{u as o,S as n}from"../../../../acl-DQQoX4B5.js";import{c as t,d as M,r as A,a as B,b as x,o as g,e as l,f as L,g as _,h as C,w as h,i as le,t as f,u as c,F as S,j as ue,n as me,k as pe,l as ce}from"../../../../vue-DTJ-1uEH.js";import{g as r}from"../../../../router-BMTpFN0J.js";import{u as _e}from"../../../../useStationDateTimeFormatter-CZDlk0g-.js";import{u as de}from"../../../../luxon-UD-XfROn.js";import{u as be}from"../../../../index-Bjjcwhm_.js";import{_ as fe}from"../../../../Lightbox-B7TAdnOB.js";import{_ as ve}from"../../../../HeaderInlinePlayer-BFhNd_hh.js";import{u as ge}from"../../../../lightbox-Cb_2lrH-.js";import"../../../../bootstrap.esm-BZy605kZ.js";import"../../../../lodash-BwctMegf.js";import"../../../../useOptionalStorage-BER6yRQA.js";import"../../../../lodash-Bdl6ys83.js";import"../../../../datetime-BTmRqpun.js";import"../../../../InlinePlayer-CoiuAmt2.js";import"../../../../useShowVolume-FV4LaeBX.js";import"../../../../hlsjs-Cx0E5yqS.js";import"../../../../formatTime-DvDPwXf4.js";import"../../../../MuteButton-DZLkre_R.js";function he(){const{$gettext:e}=F(),{enableAdvancedFeatures:p}=V(),s=w(),i=o(n.Media),v=q(()=>{const b={key:"profile",label:t(()=>e("Profile")),icon:Q,items:[{key:"view_profile",label:t(()=>e("View Profile")),url:{name:"stations:index"}},{key:"edit_profile",label:t(()=>e("Edit Profile")),url:{name:"stations:profile:edit"},visible:o(n.Profile)},{key:"branding",label:t(()=>e("Branding")),url:{name:"stations:branding"},visible:o(n.Profile)}]},k={key:"public_page",label:t(()=>e("Public Page")),icon:Y,url:s.publicPageUrl,external:!0,visible:s.enablePublicPages},R={key:"media",label:t(()=>e("Media")),icon:G,visible:s.features.media,items:[{key:"music_files",label:t(()=>e("Music Files")),url:{name:"stations:files:index"},visible:i},{key:"duplicate_songs",label:t(()=>e("Duplicate Songs")),url:{name:"stations:files:index",params:{path:"special:duplicates"}},visible:i},{key:"unprocessable",label:t(()=>e("Unprocessable Files")),url:{name:"stations:files:index",params:{path:"special:unprocessable"}},visible:i},{key:"unassigned",label:t(()=>e("Unassigned Files")),url:{name:"stations:files:index",params:{path:"special:unassigned"}},visible:i},{key:"ondemand",label:t(()=>e("On-Demand Media")),url:s.onDemandUrl,external:!0,visible:s.enableOnDemand},{key:"sftp_users",label:t(()=>e("SFTP Users")),url:{name:"stations:sftp_users:index"},visible:i&&s.features.sftp},{key:"bulk_media",label:t(()=>e("Bulk Media Import/Export")),url:{name:"stations:bulk-media"},visible:i}]},E={key:"playlists",label:t(()=>e("Playlists")),icon:K,url:{name:"stations:playlists:index"},visible:i&&s.features.media},I={key:"podcasts",label:t(()=>e("Podcasts")),icon:X,url:{name:"stations:podcasts:index"},visible:o(n.Podcasts)&&s.features.podcasts},T={key:"streaming",label:t(()=>e("Live Streaming")),icon:Z,visible:o(n.Streamers)&&s.features.streamers,items:[{key:"streamers",label:t(()=>e("Streamer/DJ Accounts")),url:{name:"stations:streamers:index"},visible:o(n.Streamers)},{key:"webdj",label:t(()=>e("Web DJ")),url:s.webDjUrl,external:!0,visible:s.enablePublicPages}]},y={key:"webhooks",label:t(()=>e("Web Hooks")),icon:ee,url:{name:"stations:webhooks:index"},visible:o(n.WebHooks)&&s.features.webhooks},D={key:"reports",label:t(()=>e("Reports")),icon:te,visible:o(n.Reports),items:[{key:"reports_overview",label:t(()=>e("Station Statistics")),url:{name:"stations:reports:overview"}},{key:"reports_listeners",label:t(()=>e("Listeners")),url:{name:"stations:reports:listeners"}},{key:"reports_requests",label:t(()=>e("Song Requests")),url:{name:"stations:reports:requests"},visible:o(n.Broadcasting)&&s.enableRequests},{key:"reports_timeline",label:t(()=>e("Song Playback Timeline")),url:{name:"stations:reports:timeline"}},{key:"reports_soundexchange",label:t(()=>e("SoundExchange Royalties")),url:{name:"stations:reports:soundexchange"}}]},u={key:"broadcasting",label:t(()=>e("Broadcasting")),icon:se,items:[{key:"mounts",label:t(()=>e("Mount Points")),url:{name:"stations:mounts:index"},visible:o(n.MountPoints)&&s.features.mountPoints},{key:"hls_streams",label:t(()=>e("HLS Streams")),url:{name:"stations:hls_streams:index"},visible:o(n.MountPoints)&&s.features.hlsStreams},{key:"remotes",label:t(()=>e("Remote Relays")),url:{name:"stations:remotes:index"},visible:o(n.RemoteRelays)&&s.features.remoteRelays},{key:"fallback",label:t(()=>e("Custom Fallback File")),url:{name:"stations:fallback"},visible:o(n.Broadcasting)&&s.features.media},{key:"ls_config",label:t(()=>e("Edit Liquidsoap Configuration")),url:{name:"stations:util:ls_config"},visible:o(n.Broadcasting)&&s.features.customLiquidsoapConfig},{key:"stereo_tool",label:t(()=>e("Upload Stereo Tool Configuration")),url:{name:"stations:stereo_tool_config"},visible:s.features.media&&p&&o(n.Broadcasting)},{key:"queue",label:t(()=>e("Upcoming Song Queue")),url:{name:"stations:queue:index"},visible:o(n.Broadcasting)&&s.features.autoDjQueue},{key:"restart",label:t(()=>e("Restart Broadcasting")),url:{name:"stations:restart:index"},visible:o(n.Broadcasting)}]},d={key:"logs",label:t(()=>e("Logs")),icon:ae,url:{name:"stations:logs"},visible:o(n.Logs)};return{categories:[b,k,R,E,I,T,y,D,u,d]}});return ie(v)}function $(){return be("station-restart")}function st(){const e=$();return{mayNeedRestart:()=>{e.emit(!1)}}}const ke={class:"navdrawer-header offcanvas-header"},ye={class:"d-flex align-items-center"},Ee=["title"],Pe={class:"visually-hidden"},xe={key:0,class:"navdrawer-alert bg-success-subtle text-success-emphasis"},Re={class:"fw-bold"},Ie={key:1,class:"navdrawer-alert bg-warning-subtle text-warning-emphasis"},Te={class:"fw-bold"},De={class:"offcanvas-body"},Le=M({__name:"Sidebar",setup(e){const p=he(),{name:s,hasStarted:i,needsRestart:v}=w(),{DateTime:b}=de(),{now:k,formatDateTimeAsTime:R}=_e(),E=A("");U(()=>{E.value=R(k(),b.TIME_WITH_SHORT_OFFSET)},1e3,{immediate:!0,immediateCallback:!0});const I=$(),T=r("/restart-status"),y=A(v),{axios:D}=O();return I.on(u=>{u?y.value=!0:D.get(T.value).then(({data:d})=>{y.value=d.needs_restart})}),(u,d)=>{const P=B("router-link");return g(),x(S,null,[l("div",ke,[l("div",ye,[_(P,{to:{name:"stations:index"},class:"navbar-brand px-0 flex-fill"},{default:h(()=>[le(f(c(s))+" ",1),l("div",{id:"station-time",class:"fs-6",title:u.$gettext("Station Time")},f(E.value),9,Ee)]),_:1}),c(o)(c(n).Profile)?(g(),C(P,{key:0,to:{name:"stations:profile:edit"},class:"navbar-brand ms-0 flex-shrink-0"},{default:h(()=>[_(ne,{icon:c(oe)},null,8,["icon"]),l("span",Pe,f(u.$gettext("Edit Profile")),1)]),_:1})):L("",!0)])]),c(o)(c(n).Broadcasting)?(g(),x(S,{key:0},[c(i)?y.value?(g(),x("div",Ie,[_(P,{to:{name:"stations:restart:index"}},{default:h(()=>[l("span",Te,f(u.$gettext("Reload to Apply Changes")),1),d[1]||(d[1]=l("br",null,null,-1)),l("small",null,f(u.$gettext("Your station has changes that require a reload to apply.")),1)]),_:1})])):L("",!0):(g(),x("div",xe,[_(P,{to:{name:"stations:restart:index"}},{default:h(()=>[l("span",Re,f(u.$gettext("Start Station")),1),d[0]||(d[0]=l("br",null,null,-1)),l("small",null,f(u.$gettext("Ready to start broadcasting? Click to start your station.")),1)]),_:1})]))],64)):L("",!0),l("div",De,[_(re,{menu:c(p)},null,8,["menu"])])],64)}}}),Ae=M({__name:"StationsLayout",setup(e){const p=N(),s=ue("$lightbox");return ge(s),(i,v)=>{const b=B("router-view");return g(),C(J,me(pe(c(p))),{sidebar:h(()=>[_(Le)]),default:h(()=>[_(b),_(ve),_(fe,{ref_key:"$lightbox",ref:s},null,512)]),_:1},16)}}});function Se(){return[{path:"/",component:()=>a(()=>import("../../../../Profile-aof3cq_Q.js"),[]),name:"stations:index"},{path:"/branding",component:()=>a(()=>import("../../../../Branding-CRn_wvDs.js"),[]),name:"stations:branding"},{path:"/bulk-media",component:()=>a(()=>import("../../../../BulkMedia-DENys7ah.js"),[]),name:"stations:bulk-media"},{path:"/fallback",component:()=>a(()=>import("../../../../Fallback-B6cJjP8M.js"),[]),name:"stations:fallback"},{path:"/files/:path?",component:()=>a(()=>import("../../../../Media-iHueAVCP.js"),[]),name:"stations:files:index",...m(r("/vue/files"))},{path:"/hls_streams",component:()=>a(()=>import("../../../../HlsStreams-B4mrefuJ.js"),[]),name:"stations:hls_streams:index"},{path:"/ls_config",component:()=>a(()=>import("../../../../LiquidsoapConfig-VrWkIGdo.js"),[]),name:"stations:util:ls_config"},{path:"/stereo_tool_config",component:()=>a(()=>import("../../../../StereoToolConfig-zGBRJhRd.js"),[]),name:"stations:stereo_tool_config"},{path:"/logs",component:()=>a(()=>import("../../../../Logs-t7kf9lx8.js"),[]),name:"stations:logs"},{path:"/playlists",component:()=>a(()=>import("../../../../Playlists-WEjBuA1F.js"),[]),name:"stations:playlists:index",...m(r("/vue/playlists"))},{path:"/podcasts",component:()=>a(()=>import("../../../../Podcasts-DFZ9FL-_.js"),[]),name:"stations:podcasts:index",...m(r("/vue/podcasts"))},{path:"/podcast/:podcast_id",component:()=>a(()=>import("../../../../PodcastEpisodes-CxsUf0uE.js"),[]),name:"stations:podcast:episodes",beforeEnter:async(e,p,s)=>{const i=e.params.podcast_id,v=r(`/podcast/${i}`),{axios:b}=O();e.meta.state={podcast:await b.get(v.value).then(k=>k.data)},s()},props:e=>e.meta.state},{path:"/profile",name:"stations:profile:index",redirect:{name:"stations:index"}},{path:"/mounts",component:()=>a(()=>import("../../../../Mounts-CLfqn6mk.js"),[]),name:"stations:mounts:index",...m(r("/vue/mounts"))},{path:"/profile/edit",component:()=>a(()=>import("../../../../ProfileEdit-B7WbDezW.js"),[]),name:"stations:profile:edit",...m(r("/vue/profile/edit"))},{path:"/queue",component:()=>a(()=>import("../../../../Queue-A9ohujn4.js"),[]),name:"stations:queue:index"},{path:"/remotes",component:()=>a(()=>import("../../../../Remotes-DU1JEggR.js"),[]),name:"stations:remotes:index"},{path:"/reports/overview",component:()=>a(()=>import("../../../../Overview-B5nb_C7c.js"),[]),name:"stations:reports:overview",...m(r("/vue/reports/overview"))},{path:"/reports/timeline",component:()=>a(()=>import("../../../../Timeline-BaxNkbSf.js"),[]),name:"stations:reports:timeline"},{path:"/reports/listeners",component:()=>a(()=>import("../../../../Listeners-6TB4XgUs.js"),[]),name:"stations:reports:listeners",...m(r("/vue/reports/listeners"))},{path:"/reports/soundexchange",component:()=>a(()=>import("../../../../SoundExchange-BceIIr3U.js"),[]),name:"stations:reports:soundexchange"},{path:"/reports/requests",component:()=>a(()=>import("../../../../Requests-BbOTkSjT.js"),[]),name:"stations:reports:requests"},{path:"/restart",component:()=>a(()=>import("../../../../Restart-1MCwYFhu.js"),[]),name:"stations:restart:index",...m(r("/vue/restart"))},{path:"/sftp_users",component:()=>a(()=>import("../../../../SftpUsers-Dc7XtMiA.js"),[]),name:"stations:sftp_users:index",...m(r("/vue/sftp_users"))},{path:"/streamers",component:()=>a(()=>import("../../../../Streamers-BcavXc30.js"),[]),name:"stations:streamers:index",...m(r("/vue/streamers"))},{path:"/webhooks",component:()=>a(()=>import("../../../../Webhooks-B3IfQP6H.js"),[]),name:"stations:webhooks:index"}]}H({render(){return ce(Ae)}},e=>{const p=Se(),{componentProps:s}=V();j(W({history:z(s.baseUrl),routes:p}),e)});export{st as u};
