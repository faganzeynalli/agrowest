import{u as $,a as V,b as w,r as F,c as q,d as O,e as U,_ as a,i as N}from"../../../../usePlayerStore-B4PGhBhy.js";import{i as H,c as W,a as j}from"../../../../router-CyHP4yAl.js";import{_ as z}from"../../../../PanelLayout-B5zUTznZ.js";import{f as J,_ as Q,p as l}from"../../../../populateComponentRemotely-zWL2E8dX.js";import{u as o,S as n}from"../../../../acl-BGEO3C--.js";import{I as Y,a as G,b as K,c as X,d as Z,e as ee,f as te,g as se,h as ae,i as oe}from"../../../../icons-Be1GHOkw.js";import{c as t,d as M,r as L,a as B,b as x,o as k,e as u,f as A,g as _,w as y,h as ne,t as f,u as v,F as S,i as ie,j as re,n as le,k as ue,l as me}from"../../../../vue-Cts3TEHg.js";import{g as r}from"../../../../router-bfb1FafM.js";import{u as pe}from"../../../../useStationDateTimeFormatter-Bxjzdgdm.js";import{u as ce}from"../../../../luxon-prWG51AS.js";import{u as _e}from"../../../../index-DFuFmYZg.js";import{_ as de}from"../../../../Lightbox-zgmbLVpf.js";import{_ as be}from"../../../../HeaderInlinePlayer-BodNssy9.js";import{u as fe}from"../../../../lightbox-CLViexMZ.js";import"../../../../bootstrap.esm-BZy605kZ.js";import"../../../../lodash-BwctMegf.js";import"../../../../useOptionalStorage-BGa7EZRL.js";import"../../../../lodash-Bdl6ys83.js";import"../../../../datetime-BTmRqpun.js";import"../../../../InlinePlayer-BY-HqfYS.js";import"../../../../useShowVolume-VpU-F4gl.js";import"../../../../hlsjs-Cx0E5yqS.js";import"../../../../formatTime-DvDPwXf4.js";import"../../../../MuteButton-C7NBiXci.js";function ve(){const{$gettext:e}=$(),{enableAdvancedFeatures:m}=V(),s=w(),i=o(n.Media),b=F(()=>{const d={key:"profile",label:t(()=>e("Profile")),icon:Y,items:[{key:"view_profile",label:t(()=>e("View Profile")),url:{name:"stations:index"}},{key:"edit_profile",label:t(()=>e("Edit Profile")),url:{name:"stations:profile:edit"},visible:o(n.Profile)},{key:"branding",label:t(()=>e("Branding")),url:{name:"stations:branding"},visible:o(n.Profile)}]},g={key:"public_page",label:t(()=>e("Public Page")),icon:G,url:s.publicPageUrl,external:!0,visible:s.enablePublicPages},P={key:"media",label:t(()=>e("Media")),icon:K,visible:s.features.media,items:[{key:"music_files",label:t(()=>e("Music Files")),url:{name:"stations:files:index"},visible:i},{key:"duplicate_songs",label:t(()=>e("Duplicate Songs")),url:{name:"stations:files:index",params:{path:"special:duplicates"}},visible:i},{key:"unprocessable",label:t(()=>e("Unprocessable Files")),url:{name:"stations:files:index",params:{path:"special:unprocessable"}},visible:i},{key:"unassigned",label:t(()=>e("Unassigned Files")),url:{name:"stations:files:index",params:{path:"special:unassigned"}},visible:i},{key:"ondemand",label:t(()=>e("On-Demand Media")),url:s.onDemandUrl,external:!0,visible:s.enableOnDemand},{key:"sftp_users",label:t(()=>e("SFTP Users")),url:{name:"stations:sftp_users:index"},visible:i&&s.features.sftp},{key:"bulk_media",label:t(()=>e("Bulk Media Import/Export")),url:{name:"stations:bulk-media"},visible:i}]},E={key:"playlists",label:t(()=>e("Playlists")),icon:X,url:{name:"stations:playlists:index"},visible:i&&s.features.media},R={key:"podcasts",label:t(()=>e("Podcasts")),icon:Z,url:{name:"stations:podcasts:index"},visible:o(n.Podcasts)&&s.features.podcasts},I={key:"streaming",label:t(()=>e("Live Streaming")),icon:ee,visible:o(n.Streamers)&&s.features.streamers,items:[{key:"streamers",label:t(()=>e("Streamer/DJ Accounts")),url:{name:"stations:streamers:index"},visible:o(n.Streamers)},{key:"webdj",label:t(()=>e("Web DJ")),url:s.webDjUrl,external:!0,visible:s.enablePublicPages}]},h={key:"webhooks",label:t(()=>e("Web Hooks")),icon:te,url:{name:"stations:webhooks:index"},visible:o(n.WebHooks)&&s.features.webhooks},T={key:"reports",label:t(()=>e("Reports")),icon:se,visible:o(n.Reports),items:[{key:"reports_overview",label:t(()=>e("Station Statistics")),url:{name:"stations:reports:overview"}},{key:"reports_listeners",label:t(()=>e("Listeners")),url:{name:"stations:reports:listeners"}},{key:"reports_requests",label:t(()=>e("Song Requests")),url:{name:"stations:reports:requests"},visible:o(n.Broadcasting)&&s.enableRequests},{key:"reports_timeline",label:t(()=>e("Song Playback Timeline")),url:{name:"stations:reports:timeline"}},{key:"reports_soundexchange",label:t(()=>e("SoundExchange Royalties")),url:{name:"stations:reports:soundexchange"}}]},p={key:"broadcasting",label:t(()=>e("Broadcasting")),icon:ae,items:[{key:"mounts",label:t(()=>e("Mount Points")),url:{name:"stations:mounts:index"},visible:o(n.MountPoints)&&s.features.mountPoints},{key:"hls_streams",label:t(()=>e("HLS Streams")),url:{name:"stations:hls_streams:index"},visible:o(n.MountPoints)&&s.features.hlsStreams},{key:"remotes",label:t(()=>e("Remote Relays")),url:{name:"stations:remotes:index"},visible:o(n.RemoteRelays)&&s.features.remoteRelays},{key:"fallback",label:t(()=>e("Custom Fallback File")),url:{name:"stations:fallback"},visible:o(n.Broadcasting)&&s.features.media},{key:"ls_config",label:t(()=>e("Edit Liquidsoap Configuration")),url:{name:"stations:util:ls_config"},visible:o(n.Broadcasting)&&s.features.customLiquidsoapConfig},{key:"stereo_tool",label:t(()=>e("Upload Stereo Tool Configuration")),url:{name:"stations:stereo_tool_config"},visible:s.features.media&&m&&o(n.Broadcasting)},{key:"queue",label:t(()=>e("Upcoming Song Queue")),url:{name:"stations:queue:index"},visible:o(n.Broadcasting)&&s.features.autoDjQueue},{key:"restart",label:t(()=>e("Restart Broadcasting")),url:{name:"stations:restart:index"},visible:o(n.Broadcasting)}]},c={key:"logs",label:t(()=>e("Logs")),icon:oe,url:{name:"stations:logs"},visible:o(n.Logs)};return{categories:[d,g,P,E,R,I,h,T,p,c]}});return J(b)}function C(){return _e("station-restart")}function Ze(){const e=C();return{mayNeedRestart:()=>{e.emit(!1)}}}const ge={class:"navdrawer-header offcanvas-header"},he={class:"d-flex align-items-center"},ke=["title"],ye={key:0,class:"navdrawer-alert bg-success-subtle text-success-emphasis"},Ee={class:"fw-bold"},xe={key:1,class:"navdrawer-alert bg-warning-subtle text-warning-emphasis"},Pe={class:"fw-bold"},Re={class:"offcanvas-body"},Ie=M({__name:"Sidebar",setup(e){const m=ve(),{name:s,hasStarted:i,needsRestart:b}=w(),{DateTime:d}=ce(),{now:g,formatDateTimeAsTime:P}=pe(),E=L("");q(()=>{E.value=P(g(),d.TIME_WITH_SHORT_OFFSET)},1e3,{immediate:!0,immediateCallback:!0});const R=C(),I=r("/restart-status"),h=L(b),{axios:T}=O();return R.on(p=>{p?h.value=!0:T.get(I.value).then(({data:c})=>{h.value=c.needs_restart})}),(p,c)=>{const D=B("router-link");return k(),x(S,null,[u("div",ge,[u("div",he,[_(D,{to:{name:"stations:index"},class:"navbar-brand px-0 flex-fill"},{default:y(()=>[ne(f(v(s))+" ",1),u("div",{id:"station-time",class:"fs-6",title:p.$gettext("Station Time")},f(E.value),9,ke)]),_:1})])]),v(o)(v(n).Broadcasting)?(k(),x(S,{key:0},[v(i)?h.value?(k(),x("div",xe,[_(D,{to:{name:"stations:restart:index"}},{default:y(()=>[u("span",Pe,f(p.$gettext("Reload to Apply Changes")),1),c[1]||(c[1]=u("br",null,null,-1)),u("small",null,f(p.$gettext("Your station has changes that require a reload to apply.")),1)]),_:1})])):A("",!0):(k(),x("div",ye,[_(D,{to:{name:"stations:restart:index"}},{default:y(()=>[u("span",Ee,f(p.$gettext("Start Station")),1),c[0]||(c[0]=u("br",null,null,-1)),u("small",null,f(p.$gettext("Ready to start broadcasting? Click to start your station.")),1)]),_:1})]))],64)):A("",!0),u("div",Re,[_(Q,{menu:v(m)},null,8,["menu"])])],64)}}}),Te=M({__name:"StationsLayout",setup(e){const m=U(),s=ie("$lightbox");return fe(s),(i,b)=>{const d=B("router-view");return k(),re(z,le(ue(v(m))),{sidebar:y(()=>[_(Ie)]),default:y(()=>[_(d),_(be),_(de,{ref_key:"$lightbox",ref:s},null,512)]),_:1},16)}}});function De(){return[{path:"/",component:()=>a(()=>import("../../../../Profile-eO9Ixgxb.js"),[]),name:"stations:index"},{path:"/branding",component:()=>a(()=>import("../../../../Branding-DFVuS9EO.js"),[]),name:"stations:branding"},{path:"/bulk-media",component:()=>a(()=>import("../../../../BulkMedia-oA-nIc4V.js"),[]),name:"stations:bulk-media"},{path:"/fallback",component:()=>a(()=>import("../../../../Fallback-BfYYfjWn.js"),[]),name:"stations:fallback"},{path:"/files/:path?",component:()=>a(()=>import("../../../../Media-De64hy0r.js"),[]),name:"stations:files:index",...l(r("/vue/files"))},{path:"/hls_streams",component:()=>a(()=>import("../../../../HlsStreams-WMyTNqVp.js"),[]),name:"stations:hls_streams:index"},{path:"/ls_config",component:()=>a(()=>import("../../../../LiquidsoapConfig-DhSMgi3t.js"),[]),name:"stations:util:ls_config"},{path:"/stereo_tool_config",component:()=>a(()=>import("../../../../StereoToolConfig-hxN4VWbL.js"),[]),name:"stations:stereo_tool_config"},{path:"/logs",component:()=>a(()=>import("../../../../Logs-BZh9yxtg.js"),[]),name:"stations:logs"},{path:"/playlists",component:()=>a(()=>import("../../../../Playlists-BJgcK0tF.js"),[]),name:"stations:playlists:index",...l(r("/vue/playlists"))},{path:"/podcasts",component:()=>a(()=>import("../../../../Podcasts-swEAMPSv.js"),[]),name:"stations:podcasts:index",...l(r("/vue/podcasts"))},{path:"/podcast/:podcast_id",component:()=>a(()=>import("../../../../PodcastEpisodes-qqQD-8Mg.js"),[]),name:"stations:podcast:episodes",beforeEnter:async(e,m,s)=>{const i=e.params.podcast_id,b=r(`/podcast/${i}`),{axios:d}=O();e.meta.state={podcast:await d.get(b.value).then(g=>g.data)},s()},props:e=>e.meta.state},{path:"/profile",name:"stations:profile:index",redirect:{name:"stations:index"}},{path:"/mounts",component:()=>a(()=>import("../../../../Mounts-CdT79sX5.js"),[]),name:"stations:mounts:index",...l(r("/vue/mounts"))},{path:"/profile/edit",component:()=>a(()=>import("../../../../ProfileEdit-wYE4e1Yq.js"),[]),name:"stations:profile:edit",...l(r("/vue/profile/edit"))},{path:"/queue",component:()=>a(()=>import("../../../../Queue-B19wkArG.js"),[]),name:"stations:queue:index"},{path:"/remotes",component:()=>a(()=>import("../../../../Remotes-BFBlZzqb.js"),[]),name:"stations:remotes:index"},{path:"/reports/overview",component:()=>a(()=>import("../../../../Overview-MHrPOTYr.js"),[]),name:"stations:reports:overview",...l(r("/vue/reports/overview"))},{path:"/reports/timeline",component:()=>a(()=>import("../../../../Timeline-CTHfHEpO.js"),[]),name:"stations:reports:timeline"},{path:"/reports/listeners",component:()=>a(()=>import("../../../../Listeners-Ba4LtuI6.js"),[]),name:"stations:reports:listeners",...l(r("/vue/reports/listeners"))},{path:"/reports/soundexchange",component:()=>a(()=>import("../../../../SoundExchange-DYyPN6Mp.js"),[]),name:"stations:reports:soundexchange"},{path:"/reports/requests",component:()=>a(()=>import("../../../../Requests-LO0mSBvq.js"),[]),name:"stations:reports:requests"},{path:"/restart",component:()=>a(()=>import("../../../../Restart-CjqkwV4-.js"),[]),name:"stations:restart:index",...l(r("/vue/restart"))},{path:"/sftp_users",component:()=>a(()=>import("../../../../SftpUsers-Cl6ZnKQM.js"),[]),name:"stations:sftp_users:index",...l(r("/vue/sftp_users"))},{path:"/streamers",component:()=>a(()=>import("../../../../Streamers-Bijm9ysR.js"),[]),name:"stations:streamers:index",...l(r("/vue/streamers"))},{path:"/webhooks",component:()=>a(()=>import("../../../../Webhooks-DMxdvY7X.js"),[]),name:"stations:webhooks:index"}]}N({render(){return me(Te)}},e=>{const m=De(),{componentProps:s}=V();H(W({history:j(s.baseUrl),routes:m}),e)});export{Ze as u};
