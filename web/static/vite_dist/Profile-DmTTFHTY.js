import{b as Q,f as ft,d as q,u as F}from"./usePlayerStore-huOh7wzU.js";import{a as Pt}from"./index-DLbutgto.js";import{g as bt}from"./router-Ck1MZh3A.js";import{u as B,S as R}from"./acl-B_DfOy-v.js";import{_ as b,j as yt,m as J,K as pt,P as _t,M as Ut,Q as W,R as Tt,e as At,i as Bt,S as Rt,T as gt,J as kt}from"./icons-BWfrmhNV.js";import{_ as C}from"./CardPage-ZJgGeLMb.js";import{d as U,a as H,b as r,o as a,e as t,g as l,f as p,t as s,u as e,w as m,F as w,h as S,y as Y,i as h,j as K,H as $t,z as vt,q as Dt,c as A,x as G,m as mt,A as z,n as St,k as xt}from"./vue-iE2ul1Tq.js";import{_ as Mt}from"./Loading-DwEn1sGo.js";import{_ as N}from"./PlayButton-aVGEXFRf.js";import{B as X,F as E}from"./RadioAdapters-DeTvpZIq.js";import{u as Ct,n as It}from"./useNowPlaying-Br9VDaN_.js";import{a as Et}from"./lightbox-D_HhKVLL.js";import{r as Lt}from"./index-ewPk_2zx.js";import{_ as ht}from"./index-C3bwEujI.js";import{u as Nt}from"./useVuelidateOnForm-C7_9tFJf.js";import{u as qt,_ as Ft}from"./useHasModal-Bozw6h3l.js";import{I as Ht}from"./InvisibleSubmitButton-CdJXAqzD.js";import{_ as Ot}from"./InfoCard-BAqonmYw.js";import{u as Vt}from"./useDialog-B2YVO1KN.js";import{l as zt}from"./lodash-Bdl6ys83.js";import{u as jt}from"./useStationDateTimeFormatter-uNjYv2NB.js";import{u as Jt}from"./luxon-D3eHUgYH.js";import{_ as j}from"./CopyToClipboardButton-7s0uKTkO.js";import{_ as wt}from"./RunningBadge-DQc0JjBD.js";import{u as Yt}from"./useOptionalStorage-BFepqUkd.js";import{u as Kt}from"./useAutoRefreshingAsyncState-CYz7aFrU.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./formatTime-DvDPwXf4.js";import"./useFormField-BGhpWVH_.js";import"./FormGroup-CskLXm1p.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./datetime-BTmRqpun.js";import"./useRefreshableAsyncState-e47-K5rt.js";const Qt={class:"outside-card-header d-flex align-items-center"},Wt={class:"flex-fill"},Gt={class:"display-6 m-0"},Xt={key:0,class:"flex-shrink-0 ms-3"},Zt={class:"card-body"},te={class:"card-text"},ee=U({__name:"StationDisabledPanel",setup(g){const{name:o}=Q();return(i,n)=>{const y=H("router-link");return a(),r(w,null,[t("div",Qt,[t("div",Wt,[t("h2",Gt,s(e(o)),1)]),e(B)(e(R).Profile)?(a(),r("div",Xt,[l(y,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:m(()=>[l(b,{icon:e(yt)},null,8,["icon"]),t("span",null,s(i.$gettext("Edit Profile")),1)]),_:1})])):p("",!0)]),l(C,{id:"station-disabled",title:i.$gettext("Station Disabled")},{default:m(()=>[t("div",Zt,[t("p",te,s(i.$gettext("Your station is currently not enabled for broadcasting. You can still manage media, playlists, and other station settings. To re-enable broadcasting, edit your station profile.")),1)])]),_:1},8,["title"])],64)}}}),se={class:"table table-striped table-responsive mb-0"},ne={key:0},oe={class:"pe-1"},ae={class:"ps-1"},ie={class:"mb-1"},le=["href"],re={colspan:"2"},de={class:"text-end"},ce={class:"pe-1"},ue={class:"ps-1"},pe={class:"mb-1"},_e=["href"],me={class:"ps-1 text-end"},he={class:"listeners-total ps-1"},fe={class:"listeners-unique pe-1"},be={colspan:"2"},ye={class:"text-end"},ge={class:"align-middle"},ke={class:"pe-1"},$e={class:"ps-1"},ve=["href"],Se={class:"ps-1 text-end"},xe={class:"listeners-total ps-1"},we=["href"],Pe=["href"],Ue=U({inheritAttrs:!1,__name:"StreamsPanel",props:{station:{}},setup(g){return(o,i)=>(a(),S(C,{"header-id":"hdr_streams",title:o.$gettext("Streams")},{footer_actions:m(()=>[t("a",{class:"btn btn-link text-primary",href:o.station.playlist_pls_url},[l(b,{icon:e(pt)},null,8,["icon"]),t("span",null,s(o.$gettext("Download PLS")),1)],8,we),t("a",{class:"btn btn-link text-primary",href:o.station.playlist_m3u_url},[l(b,{icon:e(pt)},null,8,["icon"]),t("span",null,s(o.$gettext("Download M3U")),1)],8,Pe)]),default:m(()=>[t("table",se,[i[1]||(i[1]=t("colgroup",null,[t("col",{style:{width:"2%"}}),t("col",{style:{width:"78%"}}),t("col",{style:{width:"20%"}})],-1)),o.station.mounts.length>0?(a(),r("tbody",ne,[(a(!0),r(w,null,Y(o.station.mounts,n=>(a(),r("tr",{key:n.id,class:"align-middle"},[t("td",oe,[l(N,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",ae,[t("h6",ie,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,le)])]))),128))])):p("",!0),o.station.remotes.length>0?(a(),r(w,{key:1},[t("thead",null,[t("tr",null,[t("th",re,s(o.$gettext("Remote Relays")),1),t("th",de,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[(a(!0),r(w,null,Y(o.station.remotes,n=>(a(),r("tr",{key:n.id,class:"align-middle"},[t("td",ce,[l(N,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",ue,[t("h6",pe,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,_e)]),t("td",me,[l(b,{class:"sm align-middle",icon:e(J)},null,8,["icon"]),t("span",he,s(n.listeners.total),1),i[0]||(i[0]=t("br",null,null,-1)),t("small",null,[t("span",fe,s(n.listeners.unique),1),h(" "+s(o.$gettext("Unique")),1)])])]))),128))])],64)):p("",!0),o.station.hls_enabled?(a(),r(w,{key:2},[t("thead",null,[t("tr",null,[t("th",be,s(o.$gettext("HTTP Live Streaming (HLS)")),1),t("th",ye,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[t("tr",ge,[t("td",ke,[l(N,{class:"btn-lg",url:o.station.hls_url,"is-stream":"","is-hls":""},null,8,["url"])]),t("td",$e,[t("a",{href:o.station.hls_url,target:"_blank"},s(o.station.hls_url),9,ve)]),t("td",Se,[l(b,{class:"sm align-middle",icon:e(J)},null,8,["icon"]),t("span",xe,s(o.station.hls_listeners)+" "+s(o.$gettext("Unique")),1)])])])],64)):p("",!0)])]),_:1},8,["title"]))}}),Te={class:"outside-card-header d-flex align-items-center"},Ae={key:0,class:"flex-shrink-0 me-2"},Be={class:"flex-fill"},Re={class:"display-6 m-0"},De={key:0,class:"text-muted"},Me={key:1,class:"flex-shrink-0 ms-3"},Ce=U({inheritAttrs:!1,__name:"HeaderPanel",props:{station:{},stationName:{},stationDescription:{},hasStarted:{type:Boolean}},setup(g){return(o,i)=>{const n=H("router-link");return a(),r("div",Te,[o.station.listen_url&&o.hasStarted?(a(),r("div",Ae,[l(N,{class:"btn-xl",url:o.station.listen_url,"is-stream":""},null,8,["url"])])):p("",!0),t("div",Be,[t("h2",Re,[h(s(o.stationName),1),i[0]||(i[0]=t("br",null,null,-1)),o.stationDescription?(a(),r("small",De,s(o.stationDescription),1)):p("",!0)])]),e(B)(e(R).Profile)?(a(),r("div",Me,[l(n,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:m(()=>[l(b,{icon:e(yt)},null,8,["icon"]),t("span",null,s(o.$gettext("Edit Profile")),1)]),_:1})])):p("",!0)])}}}),Ie={class:"row g-3"},Ee=U({__name:"UpdateMetadataModal",setup(g,{expose:o}){const i=bt("/nowplaying/update"),{form:n,v$:y,resetForm:f,ifValid:c}=Nt({title:{required:Lt},artist:{}},{title:null,artist:null}),$=K("$modal"),{hide:_,show:d}=qt($),u=()=>{f()},v=K("$field"),O=()=>{Dt(()=>{var D;(D=v.value)==null||D.focus()})},{notifySuccess:L}=ft(),{axios:V}=q(),{$gettext:x}=F(),k=()=>{c(()=>{V.post(i.value,n.value).then(()=>{L(x("Metadata updated."))}).finally(()=>{_()})})};return o({open:d}),(D,P)=>(a(),S(Ft,{id:"update_metadata",ref_key:"$modal",ref:$,centered:"",title:e(x)("Update Metadata"),onHidden:u,onShown:O},{"modal-footer":m(()=>[t("button",{type:"button",class:"btn btn-secondary",onClick:P[0]||(P[0]=(...T)=>e(_)&&e(_)(...T))},s(e(x)("Close")),1),t("button",{type:"button",class:vt(["btn",e(y).$invalid?"btn-danger":"btn-primary"]),onClick:k},s(e(x)("Update Metadata")),3)]),default:m(()=>[l(Ot,null,{default:m(()=>[h(s(e(x)("Use this form to send a manual metadata update. Note that this will override any existing metadata on the stream.")),1)]),_:1}),t("form",{onSubmit:$t(k,["prevent"])},[t("div",Ie,[l(ht,{id:"update_metadata_title",ref_key:"$field",ref:v,class:"col-12",field:e(y).title,label:e(x)("Title")},null,8,["field","label"]),l(ht,{id:"update_metadata_artist",class:"col-12",field:e(y).artist,label:e(x)("Artist")},null,8,["field","label"])]),l(Ht)],32)]),_:1},8,["title"]))}});function M(g,o={}){const{axios:i}=q(),{showAlert:n}=Vt(),{notify:y}=ft();return()=>{n(o).then(f=>{f.value&&i.post(g).then(({data:c})=>{y(c.formatted_message,{variant:c.success?"success":"warning"})})})}}const Le={class:"d-flex align-items-center"},Ne=["id"],qe={class:"card-subtitle text-end flex-fill my-0",style:{"line-height":"1"}},Fe={class:"ps-1"},He={class:"pe-1"},Oe={class:"card-body"},Ve={class:"row"},ze={class:"col-md-6"},je={class:"clearfix"},Je={class:"d-table"},Ye={class:"d-table-row"},Ke={class:"d-table-cell align-middle text-end pe-2 pb-2"},Qe={class:"d-table-cell align-middle w-100 pb-2"},We={class:"m-0"},Ge={class:"d-table-row"},Xe={class:"d-table-cell align-top text-end pe-2"},Ze=["href"],ts=["src"],es={class:"d-table-cell align-middle w-100"},ss={key:0},ns={class:"media-heading m-0 text-muted"},os={key:1},as={class:"media-heading m-0",style:{"line-height":"1.2"}},is={class:"text-muted"},ls={key:2},rs={class:"media-heading m-0",style:{"line-height":"1.2"}},ds={key:3},cs={class:"text-muted"},us={key:4,class:"nowplaying-progress"},ps={class:"col-md-6"},_s={key:0,class:"clearfix"},ms={class:"d-table"},hs={class:"d-table-row"},fs={class:"d-table-cell align-middle pe-2 text-end pb-2"},bs={class:"d-table-cell align-middle w-100 pb-2"},ys={class:"m-0"},gs={class:"d-table-row"},ks={class:"d-table-cell align-top text-end pe-2"},$s=["href"],vs=["src"],Ss={class:"d-table-cell align-middle w-100"},xs={key:0},ws={class:"media-heading m-0",style:{"line-height":"1"}},Ps={class:"text-muted"},Us={key:1},Ts={class:"media-heading m-0",style:{"line-height":"1"}},As={key:2},Bs={class:"text-muted"},Rs={key:1,class:"clearfix"},Ds={style:{"margin-left":"22px"}},Ms={class:"media-heading",style:{"margin-left":"22px"}},Cs=U({inheritAttrs:!1,__name:"NowPlayingPanel",props:{backendType:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean}},setup(g){const o=g,{offlineText:i}=Q(),{np:n,currentTrackDurationDisplay:y,currentTrackElapsedDisplay:f}=Ct(o),{$gettext:c,$ngettext:$}=F(),_=A(()=>{var x,k,D,P;return $("%{listeners} Listener","%{listeners} Listeners",((k=(x=n.value)==null?void 0:x.listeners)==null?void 0:k.total)??0,{listeners:String(((P=(D=n.value)==null?void 0:D.listeners)==null?void 0:P.total)??0)})}),d=A(()=>o.backendType===X.Liquidsoap),{vLightbox:u}=Et(),v=M(o.backendSkipSongUri,{title:c("Skip current song?"),confirmButtonText:c("Skip Song")}),O=M(o.backendDisconnectStreamerUri,{title:c("Disconnect current streamer?"),confirmButtonText:c("Disconnect Streamer")}),L=K("$updateMetadataModal"),V=()=>{var x;(x=L.value)==null||x.open()};return(x,k)=>{const D=H("router-link");return a(),r(w,null,[l(C,{id:"profile-nowplaying",class:"nowplaying","header-id":"hdr_now_playing"},G({header:m(({id:P})=>{var T;return[t("div",Le,[t("h3",{id:P,class:"flex-shrink card-title my-0"},s(e(c)("On the Air")),9,Ne),t("h6",qe,[l(b,{class:"align-middle",icon:e(J)},null,8,["icon"]),t("span",Fe,s(_.value),1),k[3]||(k[3]=t("br",null,null,-1)),t("small",null,[t("span",He,s(((T=e(n).listeners)==null?void 0:T.unique)??0),1),h(" "+s(e(c)("Unique")),1)])]),e(B)(e(R).Reports)?(a(),S(D,{key:0,class:"flex-shrink btn btn-link text-white ms-2 px-1 py-2",to:{name:"stations:reports:listeners"},title:e(c)("Listener Report")},{default:m(()=>[l(b,{icon:e(Bt)},null,8,["icon"])]),_:1},8,["title"])):p("",!0)])]}),default:m(()=>{var P,T,I,Z,tt,et,st,nt,ot,at,it,lt,rt,dt,ct,ut;return[t("div",Oe,[t("div",Ve,[t("div",ze,[t("div",je,[t("div",Je,[t("div",Ye,[t("div",Ke,[l(b,{icon:e(Tt)},null,8,["icon"])]),t("div",Qe,[t("h5",We,s(e(c)("Now Playing")),1)])]),t("div",Ge,[t("div",Xe,[(T=(P=e(n).now_playing)==null?void 0:P.song)!=null&&T.art?mt((a(),r("a",{key:0,href:e(n).now_playing.song.art,target:"_blank"},[t("img",{class:"rounded",src:e(n).now_playing.song.art,alt:"Album Art",style:{width:"50px"}},null,8,ts)],8,Ze)),[[e(u)]]):p("",!0)]),t("div",es,[e(n).is_online?(Z=(I=e(n).now_playing)==null?void 0:I.song)!=null&&Z.title?(a(),r("div",os,[t("h6",as,[h(s(e(n).now_playing.song.title),1),k[4]||(k[4]=t("br",null,null,-1)),t("small",is,s(e(n).now_playing.song.artist),1)])])):(a(),r("div",ls,[t("h6",rs,s(((et=(tt=e(n).now_playing)==null?void 0:tt.song)==null?void 0:et.text)??""),1)])):(a(),r("div",ss,[t("h5",ns,s(e(i)??e(c)("Station Offline")),1)])),(st=e(n).now_playing)!=null&&st.playlist?(a(),r("div",ds,[t("small",cs,s(e(c)("Playlist"))+" : "+s(e(n).now_playing.playlist),1)])):p("",!0),e(f)?(a(),r("div",us,[t("small",null,s(e(f))+" / "+s(e(y)),1)])):p("",!0)])])])])]),t("div",ps,[!((nt=e(n).live)!=null&&nt.is_live)&&e(n).playing_next?(a(),r("div",_s,[t("div",ms,[t("div",hs,[t("div",fs,[l(b,{icon:e(_t)},null,8,["icon"])]),t("div",bs,[t("h5",ys,s(e(c)("Playing Next")),1)])]),t("div",gs,[t("div",ks,[(at=(ot=e(n).playing_next)==null?void 0:ot.song)!=null&&at.art?mt((a(),r("a",{key:0,href:e(n).playing_next.song.art,target:"_blank"},[t("img",{src:e(n).playing_next.song.art,class:"rounded",alt:"Album Art",style:{width:"40px"}},null,8,vs)],8,$s)),[[e(u)]]):p("",!0)]),t("div",Ss,[(lt=(it=e(n).playing_next)==null?void 0:it.song)!=null&&lt.title?(a(),r("div",xs,[t("h6",ws,[h(s(e(n).playing_next.song.title),1),k[5]||(k[5]=t("br",null,null,-1)),t("small",Ps,s(e(n).playing_next.song.artist),1)])])):(a(),r("div",Us,[t("h6",Ts,s(((dt=(rt=e(n).playing_next)==null?void 0:rt.song)==null?void 0:dt.text)??""),1)])),e(n).playing_next.playlist?(a(),r("div",As,[t("small",Bs,s(e(c)("Playlist"))+" : "+s(e(n).playing_next.playlist),1)])):p("",!0)])])])])):(ct=e(n).live)!=null&&ct.is_live?(a(),r("div",Rs,[t("h6",Ds,[l(b,{icon:e(At)},null,8,["icon"]),h(" "+s(e(c)("Live")),1)]),t("h4",Ms,s((ut=e(n).live)==null?void 0:ut.streamer_name),1)])):p("",!0)])])])]}),_:2},[d.value&&e(B)(e(R).Broadcasting)?{name:"footer_actions",fn:m(()=>{var P,T;return[(P=e(n).live)!=null&&P.is_live?p("",!0):(a(),r("button",{key:0,id:"btn_skip_song",type:"button",class:"btn btn-link text-primary",onClick:k[0]||(k[0]=I=>e(v)())},[l(b,{icon:e(_t)},null,8,["icon"]),t("span",null,s(e(c)("Skip Song")),1)])),(T=e(n).live)!=null&&T.is_live?(a(),r("button",{key:1,id:"btn_disconnect_streamer",type:"button",class:"btn btn-link text-primary",onClick:k[1]||(k[1]=I=>e(O)())},[l(b,{icon:e(Ut)},null,8,["icon"]),t("span",null,s(e(c)("Disconnect Streamer")),1)])):p("",!0),t("button",{id:"btn_update_metadata",type:"button",class:"btn btn-link text-secondary",onClick:k[2]||(k[2]=I=>V())},[l(b,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(c)("Update Metadata")),1)])]}),key:"0"}:void 0]),1024),d.value&&e(B)(e(R).Broadcasting)?(a(),S(Ee,{key:0,ref_key:"$updateMetadataModal",ref:L},null,512)):p("",!0)],64)}}}),Is={class:"table table-striped mb-0"},Es={class:"d-flex w-100 justify-content-between align-items-center"},Ls={class:"m-0"},Ns={class:"text-end m-0"},qs=U({inheritAttrs:!1,__name:"SchedulePanel",props:{scheduleItems:{}},setup(g){const o=g,{DateTime:i}=Jt(),{now:n,timestampToDateTime:y,formatDateTime:f}=jt(),c=A(()=>{const $=n();return zt.map(o.scheduleItems,_=>{const d=y(_.start_timestamp),u=y(_.end_timestamp);return _.time_until=d.toRelative(),_.start_formatted=f(d,d.hasSame($,"day")?i.TIME_SIMPLE:i.DATETIME_MED),_.end_formatted=f(u,u.hasSame(d,"day")?i.TIME_SIMPLE:i.DATETIME_MED),_})});return($,_)=>c.value.length>0?(a(),S(C,{key:0,class:"scheduled","header-id":"hdr_scheduled",title:$.$gettext("Scheduled")},{default:m(()=>[t("table",Is,[t("tbody",null,[(a(!0),r(w,null,Y(c.value,d=>(a(),r("tr",{key:d.id},[t("td",null,[t("div",Es,[t("h5",Ls,[t("small",null,[d.type==="playlist"?(a(),r(w,{key:0},[h(s($.$gettext("Playlist")),1)],64)):(a(),r(w,{key:1},[h(s($.$gettext("Streamer/DJ")),1)],64))]),_[0]||(_[0]=t("br",null,null,-1)),h(" "+s(d.name),1)]),t("p",Ns,[t("small",null,s(d.start_formatted)+" - "+s(d.end_formatted),1),_[1]||(_[1]=t("br",null,null,-1)),t("strong",null,[d.is_now?(a(),r(w,{key:0},[h(s($.$gettext("Now")),1)],64)):(a(),r(w,{key:1},[h(s(d.time_until),1)],64))])])])])]))),128))])])]),_:1},8,["title"])):p("",!0)}}),Fs=["id"],Hs={class:"table table-striped table-responsive"},Os={class:"align-middle"},Vs=["href"],zs={class:"px-0"},js={class:"text-monospace"},Js={class:"px-0"},Ys={class:"align-middle"},Ks={class:"ps-0",colspan:"2"},Qs={key:0,class:"form-text"},Ws={class:"align-middle"},Gs={class:"px-0"},Xs={class:"text-monospace"},Zs={class:"px-0"},tn={class:"align-middle"},en={class:"px-0"},sn={class:"text-monospace"},nn={class:"px-0"},on=U({inheritAttrs:!1,__name:"FrontendPanel",props:{frontendRunning:{type:Boolean},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},hasStarted:{type:Boolean}},setup(g){const o=g,i=Yt("station_show_frontend_credentials",!1),{$gettext:n}=F(),y=A(()=>i.value?n("Hide Credentials"):n("Show Credentials"));A(()=>{switch(o.frontendType){case E.Icecast:return"Icecast";case E.Rsas:return"Rocket Streaming Audio Server (RSAS)";case E.Shoutcast:return"Shoutcast";default:return""}});const f=A(()=>o.frontendType===E.Shoutcast),c=M(o.frontendRestartUri,{title:n("Restart service?"),confirmButtonText:n("Restart")}),$=M(o.frontendStartUri,{title:n("Start service?"),confirmButtonText:n("Start"),confirmButtonClass:"btn-success"}),_=M(o.frontendStopUri,{title:n("Stop service?"),confirmButtonText:n("Stop"),confirmButtonClass:"btn-danger"});return(d,u)=>(a(),S(C,{id:"profile-frontend",class:"mb-4","header-id":"hdr_frontend"},G({header:m(({id:v})=>[t("h3",{id:v,class:"card-title"},[h(s(e(n)("Broadcasting Service"))+" ",1),l(wt,{running:d.frontendRunning},null,8,["running"]),u[4]||(u[4]=t("br",null,null,-1))],8,Fs)]),default:m(()=>[e(B)(e(R).Broadcasting)?(a(),r("div",{key:0,class:vt(["collapse",e(i)?"show":""])},[t("table",Hs,[t("tbody",null,[t("tr",Os,[t("td",null,[t("a",{href:d.frontendAdminUri,target:"_blank"},s(e(n)("Administration")),9,Vs)]),t("td",zs,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[5]||(u[5]=t("span",{class:"text-monospace"},"admin",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",js,s(d.frontendAdminPassword),1)])]),t("td",Js,[l(j,{text:d.frontendAdminPassword,"hide-text":""},null,8,["text"])])]),t("tr",Ys,[t("td",null,s(e(n)("Port")),1),t("td",Ks,[h(s(d.frontendPort)+" ",1),f.value?(a(),r("div",Qs,s(e(n)("Some clients may require that you enter a port number that is either one above or one below this number.")),1)):p("",!0)])]),t("tr",Ws,[t("td",null,s(e(n)("Source")),1),t("td",Gs,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[6]||(u[6]=t("span",{class:"text-monospace"},"source",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",Xs,s(d.frontendSourcePassword),1)])]),t("td",Zs,[l(j,{text:d.frontendSourcePassword,"hide-text":""},null,8,["text"])])]),t("tr",tn,[t("td",null,s(e(n)("Relay")),1),t("td",en,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[7]||(u[7]=t("span",{class:"text-monospace"},"relay",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",sn,s(d.frontendRelayPassword),1)])]),t("td",nn,[l(j,{text:d.frontendRelayPassword,"hide-text":""},null,8,["text"])])])])])],2)):p("",!0)]),_:2},[e(B)(e(R).Broadcasting)?{name:"footer_actions",fn:m(()=>[t("a",{class:"btn btn-link text-primary",onClick:u[0]||(u[0]=$t(v=>i.value=!e(i),["prevent"]))},[l(b,{icon:e(Rt)},null,8,["icon"]),t("span",null,s(y.value),1)]),d.hasStarted?(a(),r(w,{key:0},[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:u[1]||(u[1]=(...v)=>e(c)&&e(c)(...v))},[l(b,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(n)("Restart")),1)]),d.frontendRunning?p("",!0):(a(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:u[2]||(u[2]=v=>e($)())},[l(b,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(n)("Start")),1)])),d.frontendRunning?(a(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:u[3]||(u[3]=v=>e(_)())},[l(b,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(n)("Stop")),1)])):p("",!0)],64)):p("",!0)]),key:"0"}:void 0]),1024))}}),an={class:"card-body"},ln={class:"card-text"},rn=U({__name:"BackendNonePanel",setup(g){return(o,i)=>(a(),S(C,{id:"profile-backend","header-id":"hdr_backend_disabled",title:o.$gettext("AutoDJ Disabled")},{default:m(()=>[t("div",an,[t("p",ln,s(o.$gettext("AutoDJ has been disabled for this station. No music will automatically be played when a source is not live.")),1)])]),_:1},8,["title"]))}}),dn=["id"],cn={class:"card-body"},un={class:"card-text"},pn={key:0,class:"buttons"},_n=U({inheritAttrs:!1,__name:"BackendPanel",props:{backendRunning:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{}},setup(g){const o=g,{$gettext:i,$ngettext:n}=F(),y=A(()=>{const _=n("%{numSongs} uploaded song","%{numSongs} uploaded songs",o.numSongs,{numSongs:String(o.numSongs)}),d=n("%{numPlaylists} playlist","%{numPlaylists} playlists",o.numPlaylists,{numPlaylists:String(o.numPlaylists)});return i("LiquidSoap is currently shuffling from %{songs} and %{playlists}.",{songs:_,playlists:d})});A(()=>o.backendType===X.Liquidsoap?"Liquidsoap":"");const f=M(o.backendRestartUri,{title:i("Restart service?"),confirmButtonText:i("Restart")}),c=M(o.backendStartUri,{title:i("Start service?"),confirmButtonText:i("Start"),confirmButtonClass:"btn-success"}),$=M(o.backendStopUri,{title:i("Stop service?"),confirmButtonText:i("Stop"),confirmButtonClass:"btn-danger"});return(_,d)=>{const u=H("router-link");return a(),S(C,{id:"profile-backend","header-id":"hdr_backend"},G({header:m(({id:v})=>[t("h3",{id:v,class:"card-title"},[h(s(e(i)("AutoDJ Service"))+" ",1),l(wt,{running:_.backendRunning},null,8,["running"]),d[3]||(d[3]=t("br",null,null,-1))],8,dn)]),default:m(()=>[t("div",cn,[t("p",un,s(y.value),1),e(B)(e(R).Media)?(a(),r("div",pn,[l(u,{class:"btn btn-primary",to:{name:"stations:files:index"}},{default:m(()=>[h(s(e(i)("Music Files")),1)]),_:1}),l(u,{class:"btn btn-primary",to:{name:"stations:playlists:index"}},{default:m(()=>[h(s(e(i)("Playlists")),1)]),_:1})])):p("",!0)])]),_:2},[e(B)(e(R).Broadcasting)&&_.hasStarted?{name:"footer_actions",fn:m(()=>[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:d[0]||(d[0]=v=>e(f)())},[l(b,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(i)("Restart")),1)]),_.backendRunning?p("",!0):(a(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:d[1]||(d[1]=v=>e(c)())},[l(b,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(i)("Start")),1)])),_.backendRunning?(a(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:d[2]||(d[2]=v=>e($)())},[l(b,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(i)("Stop")),1)])):p("",!0)]),key:"0"}:void 0]),1024)}}}),mn={class:"card-body"},hn={class:"card-text"},fn=U({__name:"NowPlayingNotStartedPanel",setup(g){return(o,i)=>(a(),S(C,{id:"profile-now-playing","header-id":"hdr_now_playing",title:o.$gettext("On the Air")},{default:m(()=>[t("div",mn,[t("p",hn,s(o.$gettext("Information about the current playing track will appear here once your station has started.")),1)])]),_:1},8,["title"]))}}),bn={id:"profile",class:"row row-of-cards"},yn={class:"col-lg-7"},gn={class:"col-lg-5"},kn=U({__name:"EnabledProfile",props:{profileApiUri:{},stationSupportsRequests:{type:Boolean},stationSupportsStreamers:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},stationName:{},stationDescription:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean},enableRequests:{type:Boolean},enablePublicPage:{type:Boolean},enableStreamers:{type:Boolean},enableOnDemand:{type:Boolean},publicPageUri:{},publicWebDjUri:{},publicOnDemandUri:{},publicPodcastsUri:{},publicScheduleUri:{},publicPageEmbedUri:{},publicOnDemandEmbedUri:{},publicRequestEmbedUri:{},publicHistoryEmbedUri:{},publicScheduleEmbedUri:{},publicPodcastsEmbedUri:{}},setup(g){const o=g,i=A(()=>o.frontendType!==E.Remote),n=A(()=>o.backendType!==X.None),{axiosSilent:y}=q(),{state:f}=Kt(()=>y.get(o.profileApiUri).then(c=>c.data),{station:{...It.station},services:{backend_running:!1,frontend_running:!1,has_started:!1,needs_restart:!1},schedule:[]},{timeout:15e3});return(c,$)=>(a(),r(w,null,[l(Ce,z(o,{station:e(f).station}),null,16,["station"]),t("div",bn,[t("div",yn,[c.hasStarted?(a(),r(w,{key:0},[l(Cs,St(xt(o)),null,16),l(qs,{"schedule-items":e(f).schedule},null,8,["schedule-items"]),l(Ue,{station:e(f).station},null,8,["station"])],64)):(a(),S(fn,{key:1}))]),t("div",gn,[i.value?(a(),S(on,z({key:0},o,{"frontend-running":e(f).services.frontend_running}),null,16,["frontend-running"])):p("",!0),n.value?(a(),S(_n,z({key:1},o,{"backend-running":e(f).services.backend_running}),null,16,["backend-running"])):(a(),S(rn,{key:2}))])])],64))}}),eo=U({__name:"Profile",setup(g){const{isEnabled:o}=Q(),{axios:i}=q(),{isLoading:n,state:y}=Pt(async()=>o?await(await i.get(bt("/vue/profile").value)).data:null,null);return(f,c)=>e(o)?(a(),S(Mt,{key:0,loading:e(n),lazy:""},{default:m(()=>[l(kn,St(xt(e(y))),null,16)]),_:1},8,["loading"])):(a(),S(ee,{key:1}))}});export{eo as default};
