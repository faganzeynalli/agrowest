import{_ as ho}from"./DataTable-CuDCWdIJ.js";import{d as ge,L as Ht,j as fe,o as y,u as i,w as T,e as c,m as Ie,g as v,v as Ne,t as h,h as X,U as Xo,b as M,z as It,f as K,y as Qe,F as ee,i as ae,c as qo,K as Ve,W as Yt,s as Lo,p as jo,q as vo,a3 as Wo,r as se,H as qe,a as Vo}from"./vue-Cts3TEHg.js";import{_ as ve,u as zo}from"./index-B7HOtTO3.js";import{_ as Me}from"./FormGroupCheckbox-5xtk7zGJ.js";import{_ as ot}from"./FormFieldset-BDg23QuA.js";import{l as Nt}from"./lodash-Bdl6ys83.js";import{_ as Oe}from"./FormGroupMultiCheck-DiXBs_id.js";import{_ as Go}from"./FormGroupSelect-DXH0ZD1A.js";import{u as ke,a as Jo,f as Pe,d as Xe,j as Zo,l as Ko}from"./usePlayerStore-D2Yy6Bxy.js";import{u as go}from"./useVuelidateOnFormTab-CJRFEZSa.js";import{r as pt}from"./index-Hn1RL1dT.js";import{_ as _t,a as bo}from"./Tabs-CfAAyljz.js";import{_ as Ae,W as Qo,X as en,Y as tn,Z as on,$ as nn,a0 as ln,a1 as an,a2 as rn}from"./icons-Be1GHOkw.js";import{_ as Vt}from"./TimeCode-Dwib3imv.js";import{_ as Xt}from"./FormMarkup-B1oZzq5z.js";import{_ as _o}from"./TimeZone-GH6VvVXP.js";import{u as sn}from"./useBaseEditModal-CtcnK2Zv.js";import{_ as yo}from"./ModalForm-fxrU3nGH.js";import{_ as dn}from"./PlayButton-C_xWNWvy.js";import{_ as cn}from"./InlinePlayer-B4SiXbXp.js";import{_ as yt,u as wt}from"./useHasModal-BWWcbDj3.js";import{I as un}from"./InvisibleSubmitButton-EsMx6l8t.js";import{_ as pn}from"./FormGroup-LCbWR38E.js";import{_ as fn}from"./FormFile-ByMMAzbh.js";import{u as wo,a as mn}from"./useVuelidateOnForm-CVJ7UnZt.js";import{_ as hn,u as vn}from"./AddButton-uc7Azowb.js";import{u as gn}from"./assets/frontend/js/pages/Stations-CPoWnsYD.js";import{u as zt}from"./useConfirmAndDelete-C4MHdaK7.js";import{u as bn}from"./luxon-BJyPbqTc.js";import{g as Gt}from"./router-4MaTkvgX.js";import{u as _n}from"./useHasDatatable-DPFcIMM0.js";import"./FormMultiCheck-BRaoZhWq.js";import"./FormCheckbox-VeRpO6PO.js";import"./useOptionalStorage-DBOfakfd.js";import"./index-Bav4EGom.js";import"./useFormField-CVK_EJdG.js";import"./lodash-BwctMegf.js";import"./useSlotsExcept-By0Eq2ad.js";import"./bootstrap.esm-BZy605kZ.js";import"./mergeExisting-DGzkK79d.js";import"./useShowVolume-CASfY0NK.js";import"./hlsjs-Cx0E5yqS.js";import"./formatTime-DvDPwXf4.js";import"./MuteButton-MYhWrS4X.js";import"./Loading-vp9RNwAY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./router-Czc3TqKo.js";import"./PanelLayout-DRke5ZH-.js";import"./populateComponentRemotely-RnZ3eHoB.js";import"./acl-DHBPusSR.js";import"./useStationDateTimeFormatter-CQlryVgl.js";import"./Lightbox-zgmbLVpf.js";import"./HeaderInlinePlayer-CXNMvoJT.js";import"./lightbox-CLViexMZ.js";import"./datetime-BTmRqpun.js";import"./useDialog-B4KfCD8t.js";const yn={class:"row g-3 mb-3"},wn={class:"card mb-3",role:"region"},kn={class:"card-header text-bg-primary"},Sn={class:"card-title"},xn={class:"card-body"},$n={class:"row g-3 mb-3"},Cn={href:"/docs/user-guide/playlists/#advanced-playlists",target:"_blank"},Dn={class:"row g-3"},En={class:"row g-3"},Tn={class:"row g-3"},Mn={class:"row g-3"},On={class:"card mb-3",role:"region"},An={class:"card-header text-bg-primary"},Pn={class:"card-title"},In={class:"card-body"},Nn={class:"row g-3"},Rn=ge({__name:"BasicInfo",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const o=Ht(e,"form"),{v$:t,tabClass:n}=go(o,{name:{required:pt},is_enabled:{},include_in_on_demand:{},weight:{},type:{},source:{},order:{},remote_url:{},remote_type:{},remote_buffer:{},is_jingle:{},play_per_songs:{},play_per_minutes:{},play_per_hour_minute:{},include_in_requests:{},avoid_duplicates:{}},{name:"",is_enabled:!0,include_in_on_demand:!1,weight:3,type:"default",source:"songs",order:"shuffle",remote_url:null,remote_type:"stream",remote_buffer:0,is_jingle:!1,play_per_songs:0,play_per_minutes:0,play_per_hour_minute:0,include_in_requests:!0,avoid_duplicates:!0}),{$gettext:l}=ke(),a=[{value:"songs",text:l("Song-Based"),description:l("A playlist containing media files hosted on this server.")},{value:"remote_url",text:l("Remote URL"),description:l("A playlist that instructs the station to play from a remote URL.")}],r=[{value:"default",text:l("General Rotation"),description:l("Standard playlist, shuffles with other standard playlists based on weight.")},{value:"once_per_x_songs",text:l("Once per x Songs"),description:l("Play once every $x songs.")},{value:"once_per_x_minutes",text:l("Once per x Minutes"),description:l("Play once every $x minutes.")},{value:"once_per_hour",text:l("Once per Hour"),description:l("Play once per hour at the specified minute.")},{value:"custom",text:l("Advanced"),description:l("Manually define how this playlist is used in Liquidsoap configuration.")}],d=[{value:"shuffle",text:l("Shuffled"),description:l("The full playlist is shuffled and then played through in the shuffled order.")},{value:"random",text:l("Random"),description:l("A completely random track is picked for playback every time the queue is populated.")},{value:"sequential",text:l("Sequential"),description:l("The order of the playlist is manually specified and followed by the AutoDJ.")}],s=[{value:"stream",text:l("Icecast/Shoutcast Stream URL")},{value:"playlist",text:l("Playlist (M3U/PLS) URL")},{value:"other",text:l("Other Remote URL (File, HLS, etc.)")}],f=Nt.map(Nt.range(1,26),p=>({value:p,text:String(p)}));return(p,u)=>(y(),fe(_t,{label:i(l)("Basic Info"),"item-header-class":i(n)},{default:T(()=>[c("div",yn,[v(ve,{id:"form_edit_name",class:"col-md-6",field:i(t).name,label:i(l)("Playlist Name")},null,8,["field","label"]),v(Me,{id:"form_edit_is_enabled",class:"col-md-6",field:i(t).is_enabled,label:i(l)("Enable"),description:i(l)("If disabled, the playlist will not be included in radio playback, but can still be managed.")},null,8,["field","label","description"]),v(Oe,{id:"edit_form_source",class:"col-md-12",field:i(t).source,options:a,stacked:"",radio:"",label:i(l)("Source")},null,8,["field","label"])]),Ie(c("section",wn,[c("div",kn,[c("h2",Sn,h(i(l)("Song-Based Playlist")),1)]),c("div",xn,[c("div",$n,[v(Me,{id:"form_edit_avoid_duplicates",class:"col-md-6",field:i(t).avoid_duplicates,label:i(l)("Avoid Duplicate Artists/Titles"),description:i(l)("Whether the AutoDJ should attempt to avoid duplicate artists and track titles when playing media from this playlist.")},null,8,["field","label","description"]),v(Me,{id:"form_edit_include_in_on_demand",class:"col-md-6",field:i(t).include_in_on_demand,label:i(l)("Include in On-Demand Player"),description:i(l)("If this station has on-demand streaming and downloading enabled, only songs that are in playlists with this setting enabled will be visible.")},null,8,["field","label","description"]),v(Me,{id:"form_edit_include_in_requests",class:"col-md-6",field:i(t).include_in_requests,label:i(l)("Allow Requests from This Playlist"),description:i(l)("If requests are enabled for your station, users will be able to request media that is on this playlist.")},null,8,["field","label","description"]),v(Me,{id:"form_edit_is_jingle",class:"col-md-6",field:i(t).is_jingle,description:i(l)("Enable this setting to prevent metadata from being sent to the AutoDJ for files in this playlist. This is useful if the playlist contains jingles or bumpers.")},{label:T(()=>[X(h(i(l)('Hide Metadata from Listeners ("Jingle Mode")')),1)]),_:1},8,["field","description"]),v(Oe,{id:"edit_form_type",class:"col-md-6",field:i(t).type,options:r,stacked:"",radio:"",label:i(l)("Playlist Type")},{description:T(()=>[c("a",Cn,h(i(l)("Learn about Advanced Playlists")),1)]),_:1},8,["field","label"]),v(Oe,{id:"edit_form_order",class:"col-md-6",field:i(t).order,options:d,stacked:"",radio:"",label:i(l)("Song Playback Order")},null,8,["field","label"])]),Ie(v(ot,null,{label:T(()=>[X(h(i(l)("General Rotation")),1)]),default:T(()=>[c("div",Dn,[v(Go,{id:"form_edit_weight",class:"col-md-12",field:i(t).weight,options:i(f),label:i(l)("Playlist Weight"),description:i(l)("Higher weight playlists are played more frequently compared to other lower-weight playlists.")},null,8,["field","options","label","description"])])]),_:1},512),[[Ne,o.value.type==="default"]]),Ie(v(ot,null,{label:T(()=>[X(h(i(l)("Once per x Songs")),1)]),default:T(()=>[c("div",En,[v(ve,{id:"form_edit_play_per_songs",class:"col-md-12",field:i(t).play_per_songs,"input-type":"number","input-attrs":{min:"0",max:"150"},label:i(l)("Number of Songs Between Plays"),description:i(l)("This playlist will play every $x songs, where $x is specified here.")},null,8,["field","label","description"])])]),_:1},512),[[Ne,o.value.type==="once_per_x_songs"]]),Ie(v(ot,null,{label:T(()=>[X(h(i(l)("Once per x Minutes")),1)]),default:T(()=>[c("div",Tn,[v(ve,{id:"form_edit_play_per_minutes",class:"col-md-12",field:i(t).play_per_minutes,"input-type":"number","input-attrs":{min:"0",max:"360"},label:i(l)("Number of Minutes Between Plays"),description:i(l)("This playlist will play every $x minutes, where $x is specified here.")},null,8,["field","label","description"])])]),_:1},512),[[Ne,o.value.type==="once_per_x_minutes"]]),Ie(v(ot,null,{label:T(()=>[X(h(i(l)("Once per Hour")),1)]),default:T(()=>[c("div",Mn,[v(ve,{id:"form_edit_play_per_hour_minute",class:"col-md-12",field:i(t).play_per_hour_minute,"input-type":"number","input-attrs":{min:"0",max:"59"},label:i(l)("Minute of Hour to Play"),description:i(l)("Specify the minute of every hour that this playlist should play.")},null,8,["field","label","description"])])]),_:1},512),[[Ne,o.value.type==="once_per_hour"]])])],512),[[Ne,o.value.source==="songs"]]),Ie(c("section",On,[c("div",An,[c("h2",Pn,h(i(l)("Remote URL Playlist")),1)]),c("div",In,[c("div",Nn,[v(ve,{id:"form_edit_remote_url",class:"col-md-6",field:i(t).remote_url,label:i(l)("Remote URL")},null,8,["field","label"]),v(Oe,{id:"edit_form_remote_type",class:"col-md-6",field:i(t).remote_type,options:s,stacked:"",radio:"",label:i(l)("Remote URL Type")},null,8,["field","label"]),v(ve,{id:"form_edit_remote_buffer",class:"col-md-6",field:i(t).remote_buffer,"input-type":"number","input-attrs":{min:0,max:120},label:i(l)("Remote Playback Buffer (Seconds)"),description:i(l)("The length of playback time that Liquidsoap should buffer when playing this remote playlist. Shorter times may lead to intermittent playback on unstable connections.")},null,8,["field","label","description"])])])],512),[[Ne,o.value.source==="remote_url"]])]),_:1},8,["label","item-header-class"]))}}),Bn={class:"card mb-3"},Fn={class:"card-header text-bg-primary d-flex align-items-center"},Un={class:"flex-fill"},Hn={class:"card-title"},Yn={class:"flex-shrink-0"},Xn={class:"card-body"},qn={class:"row g-3"},Ln=ge({__name:"ScheduleRow",props:{index:{},row:{}},emits:["remove"],setup(e,{emit:o}){const t=e,n=o,l=zo({start_time:{required:pt},end_time:{required:pt},start_date:{},end_date:{},days:{},loop_once:{}},Xo(t,"row")),{$gettext:a}=ke(),r=[{value:1,text:a("Monday")},{value:2,text:a("Tuesday")},{value:3,text:a("Wednesday")},{value:4,text:a("Thursday")},{value:5,text:a("Friday")},{value:6,text:a("Saturday")},{value:7,text:a("Sunday")}],d=()=>{n("remove")};return(s,f)=>(y(),M("section",Bn,[c("div",Fn,[c("div",Un,[c("h2",Hn,h(i(a)("Scheduled Time #%{num}",{num:s.index+1})),1)]),c("div",Yn,[c("button",{type:"button",class:"btn btn-sm btn-dark",onClick:f[0]||(f[0]=p=>d())},[v(Ae,{icon:i(Qo)},null,8,["icon"]),c("span",null,h(i(a)("Remove")),1)])])]),c("div",Xn,[c("div",qn,[v(ve,{id:"edit_form_start_time_"+s.index,class:"col-md-4",field:i(l).start_time,label:i(a)("Start Time"),description:i(a)("To play once per day, set the start and end times to the same value.")},{default:T(({id:p,model:u,fieldClass:b})=>[v(Vt,{id:p,modelValue:u.$model,"onUpdate:modelValue":g=>u.$model=g,class:It(b)},null,8,["id","modelValue","onUpdate:modelValue","class"])]),_:1},8,["id","field","label","description"]),v(ve,{id:"edit_form_end_time_"+s.index,class:"col-md-4",field:i(l).end_time,label:i(a)("End Time"),description:i(a)("If the end time is before the start time, the playlist will play overnight.")},{default:T(({id:p,model:u,fieldClass:b})=>[v(Vt,{id:p,modelValue:u.$model,"onUpdate:modelValue":g=>u.$model=g,class:It(b)},null,8,["id","modelValue","onUpdate:modelValue","class"])]),_:1},8,["id","field","label","description"]),v(Xt,{id:"station_time_zone",class:"col-md-4",label:i(a)("Station Time Zone")},{default:T(()=>[v(_o)]),_:1},8,["label"]),v(ve,{id:"edit_form_start_date_"+s.index,class:"col-md-4",field:i(l).start_date,"input-type":"date",label:i(a)("Start Date"),description:i(a)("To set this schedule to run only within a certain date range, specify a start and end date.")},null,8,["id","field","label","description"]),v(ve,{id:"edit_form_end_date_"+s.index,class:"col-md-4",field:i(l).end_date,"input-type":"date",label:i(a)("End Date")},null,8,["id","field","label"]),v(Me,{id:"edit_form_loop_once_"+s.index,class:"col-md-4",field:i(l).loop_once,label:i(a)("Loop Once"),description:i(a)("Only loop through playlist once.")},null,8,["id","field","label","description"]),v(Oe,{id:"edit_form_days_"+s.index,class:"col-md-4",field:i(l).days,label:i(a)("Scheduled Play Days of Week"),description:i(a)("Leave blank to play on every day of the week."),options:r,stacked:""},null,8,["id","field","label","description"])])])]))}}),jn={class:"buttons"},Wn=ge({__name:"Schedule",props:{scheduleItems:{default:()=>[]},scheduleItemsModifiers:{}},emits:["update:scheduleItems"],setup(e){const o=Ht(e,"scheduleItems"),t=()=>{o.value.push({start_time:null,end_time:null,start_date:null,end_date:null,days:[],loop_once:!1})},n=l=>{o.value.splice(l,1)};return(l,a)=>(y(),fe(_t,{label:l.$gettext("Schedule")},{default:T(()=>[o.value.length===0?(y(),fe(Xt,{key:0,id:"no_scheduled_entries"},{label:T(()=>[X(h(l.$gettext("Not Scheduled")),1)]),default:T(()=>[c("p",null,h(l.$gettext("This playlist currently has no scheduled times. It will play at all times. To add a new scheduled time, click the button below.")),1)]),_:1})):K("",!0),(y(!0),M(ee,null,Qe(o.value,(r,d)=>(y(),fe(Ln,{key:d,row:o.value[d],"onUpdate:row":s=>o.value[d]=s,index:d,onRemove:s=>n(d)},null,8,["row","onUpdate:row","index","onRemove"]))),128)),c("div",jn,[c("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t},[v(Ae,{icon:i(en)},null,8,["icon"]),c("span",null,h(l.$gettext("Add Schedule Item")),1)])])]),_:1},8,["label"]))}}),Vn={class:"row g-3"},zn=ge({__name:"Advanced",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const o=Ht(e,"form"),{v$:t,tabClass:n}=go(o,{backend_options:{}},{backend_options:[]}),{$gettext:l}=ke(),a=[{value:"interrupt",text:l("Interrupt other songs to play at scheduled time.")},{value:"single_track",text:l("Only play one track at scheduled time.")},{value:"merge",text:l("Merge playlist to play as a single track.")}];return(r,d)=>(y(),fe(_t,{label:i(l)("Advanced"),"item-header-class":i(n)},{default:T(()=>[c("div",Vn,[v(Oe,{id:"edit_form_backend_options",class:"col-md-12",field:i(t).backend_options,options:a,stacked:"",label:i(l)("Advanced Manual AutoDJ Scheduling Options"),description:i(l)("Control how this playlist is handled by the AutoDJ software.")},null,8,["field","label","description"])])]),_:1},8,["label","item-header-class"]))}}),Gn=ge({__name:"EditModal",props:{createUrl:{}},emits:["relist","needs-restart"],setup(e,{expose:o,emit:t}){const n=e,l=t,{enableAdvancedFeatures:a}=Jo(),r=ae("$modal"),{notifySuccess:d}=Pe(),{loading:s,error:f,isEditMode:p,form:u,v$:b,clearContents:g,create:A,edit:$,doSubmit:B,close:F}=sn(n,l,r,{schedule_items:{}},{schedule_items:[]},{onSubmitSuccess:()=>{d(),l("relist"),l("needs-restart"),F()}}),{$gettext:O}=ke(),P=qo(()=>p.value?O("Edit Playlist"):O("Add Playlist"));return o({create:A,edit:$,close:F}),(E,C)=>(y(),fe(yo,{ref_key:"$modal",ref:r,loading:i(s),title:P.value,error:i(f),"disable-save-button":i(b).$invalid,onSubmit:i(B),onHidden:i(g)},{default:T(()=>[v(bo,null,{default:T(()=>[v(Rn,{form:i(u),"onUpdate:form":C[0]||(C[0]=Y=>Ve(u)?u.value=Y:null)},null,8,["form"]),v(Wn,{"schedule-items":i(u).schedule_items,"onUpdate:scheduleItems":C[1]||(C[1]=Y=>i(u).schedule_items=Y)},null,8,["schedule-items"]),i(a)?(y(),fe(zn,{key:0,form:i(u),"onUpdate:form":C[2]||(C[2]=Y=>Ve(u)?u.value=Y:null)},null,8,["form"])):K("",!0)]),_:1})]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}});var Jn=Object.defineProperty,ft=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,So=Object.prototype.propertyIsEnumerable,Jt=(e,o,t)=>o in e?Jn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,xo=(e,o)=>{for(var t in o||(o={}))ko.call(o,t)&&Jt(e,t,o[t]);if(ft)for(var t of ft(o))So.call(o,t)&&Jt(e,t,o[t]);return e},Zn=(e,o)=>{var t={};for(var n in e)ko.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&ft)for(var n of ft(e))o.indexOf(n)<0&&So.call(e,n)&&(t[n]=e[n]);return t};const $o="[vue-draggable-plus]: ";function Kn(e){console.warn($o+e)}function Qn(e){console.error($o+e)}function Zt(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function Kt(e,o){return Array.isArray(e)&&e.splice(o,1),e}function Qt(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function el(e){return typeof e>"u"}function tl(e){return typeof e=="string"}function eo(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function xt(e){e.parentNode&&e.parentNode.removeChild(e)}function ol(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||Kn(`Element not found: ${e}`),n}function nl(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function ll(e,o){const t=xo({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=nl(e[n],o[n]):t[n]=o[n]}),t}function al(e){return e instanceof HTMLElement}function to(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function il(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const rl=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function oo(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function _e(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?oo(Object(t),!0).forEach(function(n){sl(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function rt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rt=function(o){return typeof o}:rt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rt(e)}function sl(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function we(){return we=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},we.apply(this,arguments)}function dl(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,a;for(a=0;a<n.length;a++)l=n[a],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function cl(e,o){if(e==null)return{};var t=dl(e,o),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var ul="1.15.2";function ye(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Se=ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),et=ye(/Edge/i),no=ye(/firefox/i),ze=ye(/safari/i)&&!ye(/chrome/i)&&!ye(/android/i),Co=ye(/iP(ad|od|hone)/i),Do=ye(/chrome/i)&&ye(/android/i),Eo={capture:!1,passive:!1};function U(e,o,t){e.addEventListener(o,t,!Se&&Eo)}function N(e,o,t){e.removeEventListener(o,t,!Se&&Eo)}function mt(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function pl(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function he(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&mt(e,o):mt(e,o))||n&&e===t)return e;if(e===t)break}while(e=pl(e))}return null}var lo=/\s+/g;function de(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(lo," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(lo," ")}}function S(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function He(e,o){var t="";if(typeof e=="string")t=e;else do{var n=S(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function To(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function be(){var e=document.scrollingElement;return e||document.documentElement}function Z(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var a,r,d,s,f,p,u;if(e!==window&&e.parentNode&&e!==be()?(a=e.getBoundingClientRect(),r=a.top,d=a.left,s=a.bottom,f=a.right,p=a.height,u=a.width):(r=0,d=0,s=window.innerHeight,f=window.innerWidth,p=window.innerHeight,u=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!Se))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||t&&S(l,"position")!=="static")){var b=l.getBoundingClientRect();r-=b.top+parseInt(S(l,"border-top-width")),d-=b.left+parseInt(S(l,"border-left-width")),s=r+a.height,f=d+a.width;break}while(l=l.parentNode);if(n&&e!==window){var g=He(l||e),A=g&&g.a,$=g&&g.d;g&&(r/=$,d/=A,u/=A,p/=$,s=r+p,f=d+u)}return{top:r,left:d,bottom:s,right:f,width:u,height:p}}}function ao(e,o,t){for(var n=Ce(e,!0),l=Z(e)[o];n;){var a=Z(n)[t],r=void 0;if(r=l>=a,!r)return n;if(n===be())break;n=Ce(n,!1)}return!1}function Ye(e,o,t,n){for(var l=0,a=0,r=e.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==x.ghost&&(n||r[a]!==x.dragged)&&he(r[a],t.draggable,e,!1)){if(l===o)return r[a];l++}a++}return null}function qt(e,o){for(var t=e.lastElementChild;t&&(t===x.ghost||S(t,"display")==="none"||o&&!mt(t,o));)t=t.previousElementSibling;return t||null}function pe(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==x.clone&&(!o||mt(e,o))&&t++;return t}function io(e){var o=0,t=0,n=be();if(e)do{var l=He(e),a=l.a,r=l.d;o+=e.scrollLeft*a,t+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[o,t]}function fl(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Ce(e,o){if(!e||!e.getBoundingClientRect)return be();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=S(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return be();if(n||o)return t;n=!0}}while(t=t.parentNode);return be()}function ml(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function $t(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var Ge;function Mo(e,o){return function(){if(!Ge){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),Ge=setTimeout(function(){Ge=void 0},o)}}}function hl(){clearTimeout(Ge),Ge=void 0}function Oo(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function Ao(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Po(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var a,r,d,s;if(!(!he(l,o.draggable,e,!1)||l.animated||l===t)){var f=Z(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,f.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,f.top),n.right=Math.max((d=n.right)!==null&&d!==void 0?d:-1/0,f.right),n.bottom=Math.max((s=n.bottom)!==null&&s!==void 0?s:-1/0,f.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ue="Sortable"+new Date().getTime();function vl(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(S(n,"display")==="none"||n===x.ghost)){e.push({target:n,rect:Z(n)});var l=_e({},e[e.length-1].rect);if(n.thisAnimationDuration){var a=He(n,!0);a&&(l.top-=a.f,l.left-=a.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(fl(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,a=0;e.forEach(function(r){var d=0,s=r.target,f=s.fromRect,p=Z(s),u=s.prevFromRect,b=s.prevToRect,g=r.rect,A=He(s,!0);A&&(p.top-=A.f,p.left-=A.e),s.toRect=p,s.thisAnimationDuration&&$t(u,p)&&!$t(f,p)&&(g.top-p.top)/(g.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(d=bl(g,u,b,n.options)),$t(p,f)||(s.prevFromRect=f,s.prevToRect=p,d||(d=n.options.animation),n.animate(s,g,p,d)),d&&(l=!0,a=Math.max(a,d),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},d),s.thisAnimationDuration=d)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,a){if(a){S(t,"transition",""),S(t,"transform","");var r=He(this.el),d=r&&r.a,s=r&&r.d,f=(n.left-l.left)/(d||1),p=(n.top-l.top)/(s||1);t.animatingX=!!f,t.animatingY=!!p,S(t,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=gl(t),S(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),S(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){S(t,"transition",""),S(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function gl(e){return e.offsetWidth}function bl(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Re=[],Ct={initializeByDefault:!0},tt={mount:function(e){for(var o in Ct)Ct.hasOwnProperty(o)&&!(o in e)&&(e[o]=Ct[o]);Re.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Re.forEach(function(a){o[a.pluginName]&&(o[a.pluginName][l]&&o[a.pluginName][l](_e({sortable:o},t)),o.options[a.pluginName]&&o[a.pluginName][e]&&o[a.pluginName][e](_e({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Re.forEach(function(r){var d=r.pluginName;if(!(!e.options[d]&&!r.initializeByDefault)){var s=new r(e,o,e.options);s.sortable=e,s.options=e.options,e[d]=s,we(t,s.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var a=this.modifyOption(e,l,e.options[l]);typeof a<"u"&&(e.options[l]=a)}},getEventProperties:function(e,o){var t={};return Re.forEach(function(n){typeof n.eventProperties=="function"&&we(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Re.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function _l(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,a=e.cloneEl,r=e.toEl,d=e.fromEl,s=e.oldIndex,f=e.newIndex,p=e.oldDraggableIndex,u=e.newDraggableIndex,b=e.originalEvent,g=e.putSortable,A=e.extraEventProperties;if(o=o||t&&t[ue],!!o){var $,B=o.options,F="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Se&&!et?$=new CustomEvent(n,{bubbles:!0,cancelable:!0}):($=document.createEvent("Event"),$.initEvent(n,!0,!0)),$.to=r||t,$.from=d||t,$.item=l||t,$.clone=a,$.oldIndex=s,$.newIndex=f,$.oldDraggableIndex=p,$.newDraggableIndex=u,$.originalEvent=b,$.pullMode=g?g.lastPutMode:void 0;var O=_e(_e({},A),tt.getEventProperties(n,o));for(var P in O)$[P]=O[P];t&&t.dispatchEvent($),B[F]&&B[F].call(o,$)}}var yl=["evt"],re=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=cl(t,yl);tt.pluginEvent.bind(x)(e,o,_e({dragEl:m,parentEl:V,ghostEl:D,rootEl:L,nextEl:Te,lastDownEl:st,cloneEl:W,cloneHidden:$e,dragStarted:Le,putSortable:Q,activeSortable:x.active,originalEvent:n,oldIndex:Ue,oldDraggableIndex:Je,newIndex:ce,newDraggableIndex:xe,hideGhostForTarget:Bo,unhideGhostForTarget:Fo,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(a){le({sortable:o,name:a,originalEvent:n})}},l))};function le(e){_l(_e({putSortable:Q,cloneEl:W,targetEl:m,rootEl:L,oldIndex:Ue,oldDraggableIndex:Je,newIndex:ce,newDraggableIndex:xe},e))}var m,V,D,L,Te,st,W,$e,Ue,ce,Je,xe,nt,Q,Fe=!1,ht=!1,vt=[],De,me,Dt,Et,ro,so,Le,Be,Ze,Ke=!1,lt=!1,dt,ne,Tt=[],Rt=!1,gt=[],kt=typeof document<"u",at=Co,co=et||Se?"cssFloat":"float",wl=kt&&!Do&&!Co&&"draggable"in document.createElement("div"),Io=function(){if(kt){if(Se)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),No=function(e,o){var t=S(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Ye(e,0,o),a=Ye(e,1,o),r=l&&S(l),d=a&&S(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Z(l).width,f=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Z(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var p=r.float==="left"?"left":"right";return a&&(d.clear==="both"||d.clear===p)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||s>=n&&t[co]==="none"||a&&t[co]==="none"&&s+f>n)?"vertical":"horizontal"},kl=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,a=t?e.width:e.height,r=t?o.left:o.top,d=t?o.right:o.bottom,s=t?o.width:o.height;return n===r||l===d||n+a/2===r+s/2},Sl=function(e,o){var t;return vt.some(function(n){var l=n[ue].options.emptyInsertThreshold;if(!(!l||qt(n))){var a=Z(n),r=e>=a.left-l&&e<=a.right+l,d=o>=a.top-l&&o<=a.bottom+l;if(r&&d)return t=n}}),t},Ro=function(e){function o(l,a){return function(r,d,s,f){var p=r.options.group.name&&d.options.group.name&&r.options.group.name===d.options.group.name;if(l==null&&(a||p))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return o(l(r,d,s,f),a)(r,d,s,f);var u=(a?r:d).options.group.name;return l===!0||typeof l=="string"&&l===u||l.join&&l.indexOf(u)>-1}}var t={},n=e.group;(!n||rt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},Bo=function(){!Io&&D&&S(D,"display","none")},Fo=function(){!Io&&D&&S(D,"display","")};kt&&!Do&&document.addEventListener("click",function(e){if(ht)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ht=!1,!1},!0);var Ee=function(e){if(m){e=e.touches?e.touches[0]:e;var o=Sl(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[ue]._onDragOver(t)}}},xl=function(e){m&&m.parentNode[ue]._isOutsideThisEl(e.target)};function x(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=we({},o),e[ue]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return No(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,r){a.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:x.supportPointer!==!1&&"PointerEvent"in window&&!ze,emptyInsertThreshold:5};tt.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Ro(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:wl,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?U(e,"pointerdown",this._onTapStart):(U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),vt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),we(this,vl())}x.prototype={constructor:x,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Be=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,f=n.filter;if(Al(t),!m&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&ze&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=he(d,n.draggable,t,!1),!(d&&d.animated)&&st!==d)){if(Ue=pe(d),Je=pe(d,n.draggable),typeof f=="function"){if(f.call(this,e,d,this)){le({sortable:o,rootEl:s,name:"filter",targetEl:d,toEl:t,fromEl:t}),re("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=he(s,p.trim(),t,!1),p)return le({sortable:o,rootEl:p,name:"filter",targetEl:d,fromEl:t,toEl:t}),re("filter",o,{evt:e}),!0}),f)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!he(s,n.handle,t,!1)||this._prepareDragStart(e,r,d)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,a=n.options,r=l.ownerDocument,d;if(t&&!m&&t.parentNode===l){var s=Z(t);if(L=l,m=t,V=m.parentNode,Te=m.nextSibling,st=t,nt=a.group,x.dragged=m,De={target:m,clientX:(o||e).clientX,clientY:(o||e).clientY},ro=De.clientX-s.left,so=De.clientY-s.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,m.style["will-change"]="all",d=function(){if(re("delayEnded",n,{evt:e}),x.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!no&&n.nativeDraggable&&(m.draggable=!0),n._triggerDragStart(e,o),le({sortable:n,name:"choose",originalEvent:e}),de(m,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){To(m,f.trim(),Mt)}),U(r,"dragover",Ee),U(r,"mousemove",Ee),U(r,"touchmove",Ee),U(r,"mouseup",n._onDrop),U(r,"touchend",n._onDrop),U(r,"touchcancel",n._onDrop),no&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),re("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(et||Se))){if(x.eventCanceled){this._onDrop();return}U(r,"mouseup",n._disableDelayedDrag),U(r,"touchend",n._disableDelayedDrag),U(r,"touchcancel",n._disableDelayedDrag),U(r,"mousemove",n._delayedDragTouchMoveHandler),U(r,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&U(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(d,a.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Mt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._disableDelayedDrag),N(e,"touchend",this._disableDelayedDrag),N(e,"touchcancel",this._disableDelayedDrag),N(e,"mousemove",this._delayedDragTouchMoveHandler),N(e,"touchmove",this._delayedDragTouchMoveHandler),N(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?U(document,"pointermove",this._onTouchMove):o?U(document,"touchmove",this._onTouchMove):U(document,"mousemove",this._onTouchMove):(U(m,"dragend",this),U(L,"dragstart",this._onDragStart));try{document.selection?ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(Fe=!1,L&&m){re("dragStarted",this,{evt:o}),this.nativeDraggable&&U(document,"dragover",xl);var t=this.options;!e&&de(m,t.dragClass,!1),de(m,t.ghostClass,!0),x.active=this,e&&this._appendGhost(),le({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(me){this._lastX=me.clientX,this._lastY=me.clientY,Bo();for(var e=document.elementFromPoint(me.clientX,me.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(me.clientX,me.clientY),e!==o);)o=e;if(m.parentNode[ue]._isOutsideThisEl(e),o)do{if(o[ue]){var t=void 0;if(t=o[ue]._onDragOver({clientX:me.clientX,clientY:me.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Fo()}},_onTouchMove:function(e){if(De){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,a=D&&He(D,!0),r=D&&a&&a.a,d=D&&a&&a.d,s=at&&ne&&io(ne),f=(l.clientX-De.clientX+n.x)/(r||1)+(s?s[0]-Tt[0]:0)/(r||1),p=(l.clientY-De.clientY+n.y)/(d||1)+(s?s[1]-Tt[1]:0)/(d||1);if(!x.active&&!Fe){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(D){a?(a.e+=f-(Dt||0),a.f+=p-(Et||0)):a={a:1,b:0,c:0,d:1,e:f,f:p};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");S(D,"webkitTransform",u),S(D,"mozTransform",u),S(D,"msTransform",u),S(D,"transform",u),Dt=f,Et=p,me=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!D){var e=this.options.fallbackOnBody?document.body:L,o=Z(m,!0,at,!0,e),t=this.options;if(at){for(ne=e;S(ne,"position")==="static"&&S(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=be()),o.top+=ne.scrollTop,o.left+=ne.scrollLeft):ne=be(),Tt=io(ne)}D=m.cloneNode(!0),de(D,t.ghostClass,!1),de(D,t.fallbackClass,!0),de(D,t.dragClass,!0),S(D,"transition",""),S(D,"transform",""),S(D,"box-sizing","border-box"),S(D,"margin",0),S(D,"top",o.top),S(D,"left",o.left),S(D,"width",o.width),S(D,"height",o.height),S(D,"opacity","0.8"),S(D,"position",at?"absolute":"fixed"),S(D,"zIndex","100000"),S(D,"pointerEvents","none"),x.ghost=D,e.appendChild(D),S(D,"transform-origin",ro/parseInt(D.style.width)*100+"% "+so/parseInt(D.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(re("dragStart",this,{evt:e}),x.eventCanceled){this._onDrop();return}re("setupClone",this),x.eventCanceled||(W=Ao(m),W.removeAttribute("id"),W.draggable=!1,W.style["will-change"]="",this._hideClone(),de(W,this.options.chosenClass,!1),x.clone=W),t.cloneId=ct(function(){re("clone",t),!x.eventCanceled&&(t.options.removeCloneOnHide||L.insertBefore(W,m),t._hideClone(),le({sortable:t,name:"clone"}))}),!o&&de(m,l.dragClass,!0),o?(ht=!0,t._loopId=setInterval(t._emulateDragOver,50)):(N(document,"mouseup",t._onDrop),N(document,"touchend",t._onDrop),N(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,m)),U(document,"drop",t),S(m,"transform","translateZ(0)")),Fe=!0,t._dragStartId=ct(t._dragStarted.bind(t,o,e)),U(document,"selectstart",t),Le=!0,ze&&S(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,a,r=this.options,d=r.group,s=x.active,f=nt===d,p=r.sort,u=Q||s,b,g=this,A=!1;if(Rt)return;function $(ie,w){re(ie,g,_e({evt:e,isOwner:f,axis:b?"vertical":"horizontal",revert:a,dragRect:n,targetRect:l,canSort:p,fromSortable:u,target:t,completed:F,onMove:function(oe,St){return it(L,o,m,n,oe,Z(oe),e,St)},changed:O},w))}function B(){$("dragOverAnimationCapture"),g.captureAnimationState(),g!==u&&u.captureAnimationState()}function F(ie){return $("dragOverCompleted",{insertion:ie}),ie&&(f?s._hideClone():s._showClone(g),g!==u&&(de(m,Q?Q.options.ghostClass:s.options.ghostClass,!1),de(m,r.ghostClass,!0)),Q!==g&&g!==x.active?Q=g:g===x.active&&Q&&(Q=null),u===g&&(g._ignoreWhileAnimating=t),g.animateAll(function(){$("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(t===m&&!m.animated||t===o&&!t.animated)&&(Be=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(m.parentNode[ue]._isOutsideThisEl(e.target),!ie&&Ee(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),A=!0}function O(){ce=pe(m),xe=pe(m,r.draggable),le({sortable:g,name:"change",toEl:o,newIndex:ce,newDraggableIndex:xe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=he(t,r.draggable,o,!0),$("dragOver"),x.eventCanceled)return A;if(m.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||g._ignoreWhileAnimating===t)return F(!1);if(ht=!1,s&&!r.disabled&&(f?p||(a=V!==L):Q===this||(this.lastPutMode=nt.checkPull(this,s,m,e))&&d.checkPut(this,s,m,e))){if(b=this._getDirection(e,t)==="vertical",n=Z(m),$("dragOverValid"),x.eventCanceled)return A;if(a)return V=L,B(),this._hideClone(),$("revert"),x.eventCanceled||(Te?L.insertBefore(m,Te):L.appendChild(m)),F(!0);var P=qt(o,r.draggable);if(!P||El(e,b,this)&&!P.animated){if(P===m)return F(!1);if(P&&o===e.target&&(t=P),t&&(l=Z(t)),it(L,o,m,n,t,l,e,!!t)!==!1)return B(),P&&P.nextSibling?o.insertBefore(m,P.nextSibling):o.appendChild(m),V=o,O(),F(!0)}else if(P&&Dl(e,b,this)){var E=Ye(o,0,r,!0);if(E===m)return F(!1);if(t=E,l=Z(t),it(L,o,m,n,t,l,e,!1)!==!1)return B(),o.insertBefore(m,E),V=o,O(),F(!0)}else if(t.parentNode===o){l=Z(t);var C=0,Y,z=m.parentNode!==o,_=!kl(m.animated&&m.toRect||n,t.animated&&t.toRect||l,b),k=b?"top":"left",q=ao(t,"top","top")||ao(m,"top","top"),te=q?q.scrollTop:void 0;Be!==t&&(Y=l[k],Ke=!1,lt=!_&&r.invertSwap||z),C=Tl(e,t,l,b,_?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,lt,Be===t);var H;if(C!==0){var j=pe(m);do j-=C,H=V.children[j];while(H&&(S(H,"display")==="none"||H===D))}if(C===0||H===t)return F(!1);Be=t,Ze=C;var G=t.nextElementSibling,I=!1;I=C===1;var R=it(L,o,m,n,t,l,e,I);if(R!==!1)return(R===1||R===-1)&&(I=R===1),Rt=!0,setTimeout(Cl,30),B(),I&&!G?o.appendChild(m):t.parentNode.insertBefore(m,I?G:t),q&&Oo(q,0,te-q.scrollTop),V=m.parentNode,Y!==void 0&&!lt&&(dt=Math.abs(Y-Z(t)[k])),O(),F(!0)}if(o.contains(m))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){N(document,"mousemove",this._onTouchMove),N(document,"touchmove",this._onTouchMove),N(document,"pointermove",this._onTouchMove),N(document,"dragover",Ee),N(document,"mousemove",Ee),N(document,"touchmove",Ee)},_offUpEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._onDrop),N(e,"touchend",this._onDrop),N(e,"pointerup",this._onDrop),N(e,"touchcancel",this._onDrop),N(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(ce=pe(m),xe=pe(m,t.draggable),re("drop",this,{evt:e}),V=m&&m.parentNode,ce=pe(m),xe=pe(m,t.draggable),x.eventCanceled){this._nulling();return}Fe=!1,lt=!1,Ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bt(this.cloneId),Bt(this._dragStartId),this.nativeDraggable&&(N(document,"drop",this),N(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ze&&S(document.body,"user-select",""),S(m,"transform",""),e&&(Le&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),D&&D.parentNode&&D.parentNode.removeChild(D),(L===V||Q&&Q.lastPutMode!=="clone")&&W&&W.parentNode&&W.parentNode.removeChild(W),m&&(this.nativeDraggable&&N(m,"dragend",this),Mt(m),m.style["will-change"]="",Le&&!Fe&&de(m,Q?Q.options.ghostClass:this.options.ghostClass,!1),de(m,this.options.chosenClass,!1),le({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:e}),L!==V?(ce>=0&&(le({rootEl:V,name:"add",toEl:V,fromEl:L,originalEvent:e}),le({sortable:this,name:"remove",toEl:V,originalEvent:e}),le({rootEl:V,name:"sort",toEl:V,fromEl:L,originalEvent:e}),le({sortable:this,name:"sort",toEl:V,originalEvent:e})),Q&&Q.save()):ce!==Ue&&ce>=0&&(le({sortable:this,name:"update",toEl:V,originalEvent:e}),le({sortable:this,name:"sort",toEl:V,originalEvent:e})),x.active&&((ce==null||ce===-1)&&(ce=Ue,xe=Je),le({sortable:this,name:"end",toEl:V,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),L=m=V=D=Te=W=st=$e=De=me=Le=ce=xe=Ue=Je=Be=Ze=Q=nt=x.dragged=x.ghost=x.clone=x.active=null,gt.forEach(function(e){e.checked=!0}),gt.length=Dt=Et=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),$l(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,a=this.options;n<l;n++)o=t[n],he(o,a.draggable,this.el,!1)&&e.push(o.getAttribute(a.dataIdAttr)||Ol(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,a){var r=n.children[a];he(r,this.options.draggable,n,!1)&&(t[l]=r)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return he(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=tt.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Ro(t)},destroy:function(){re("destroy",this);var e=this.el;e[ue]=null,N(e,"mousedown",this._onTapStart),N(e,"touchstart",this._onTapStart),N(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(N(e,"dragover",this),N(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),vt.splice(vt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(re("hideClone",this),x.eventCanceled)return;S(W,"display","none"),this.options.removeCloneOnHide&&W.parentNode&&W.parentNode.removeChild(W),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(re("showClone",this),x.eventCanceled)return;m.parentNode==L&&!this.options.group.revertClone?L.insertBefore(W,m):Te?L.insertBefore(W,Te):L.appendChild(W),this.options.group.revertClone&&this.animate(m,W),S(W,"display",""),$e=!1}}};function $l(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function it(e,o,t,n,l,a,r,d){var s,f=e[ue],p=f.options.onMove,u;return window.CustomEvent&&!Se&&!et?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=o,s.from=e,s.dragged=t,s.draggedRect=n,s.related=l||o,s.relatedRect=a||Z(o),s.willInsertAfter=d,s.originalEvent=r,e.dispatchEvent(s),p&&(u=p.call(f,s,r)),u}function Mt(e){e.draggable=!1}function Cl(){Rt=!1}function Dl(e,o,t){var n=Z(Ye(t.el,0,t.options,!0)),l=Po(t.el,t.options,D),a=10;return o?e.clientX<l.left-a||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-a||e.clientY<n.bottom&&e.clientX<n.left}function El(e,o,t){var n=Z(qt(t.el,t.options.draggable)),l=Po(t.el,t.options,D),a=10;return o?e.clientX>l.right+a||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+a||e.clientX>n.right&&e.clientY>n.top}function Tl(e,o,t,n,l,a,r,d){var s=n?e.clientY:e.clientX,f=n?t.height:t.width,p=n?t.top:t.left,u=n?t.bottom:t.right,b=!1;if(!r){if(d&&dt<f*l){if(!Ke&&(Ze===1?s>p+f*a/2:s<u-f*a/2)&&(Ke=!0),Ke)b=!0;else if(Ze===1?s<p+dt:s>u-dt)return-Ze}else if(s>p+f*(1-l)/2&&s<u-f*(1-l)/2)return Ml(o)}return b=b||r,b&&(s<p+f*a/2||s>u-f*a/2)?s>p+f/2?1:-1:0}function Ml(e){return pe(m)<pe(e)?1:-1}function Ol(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function Al(e){gt.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&gt.push(n)}}function ct(e){return setTimeout(e,0)}function Bt(e){return clearTimeout(e)}kt&&U(document,"touchmove",function(e){(x.active||Fe)&&e.cancelable&&e.preventDefault()});x.utils={on:U,off:N,css:S,find:To,is:function(e,o){return!!he(e,o,e,!1)},extend:ml,throttle:Mo,closest:he,toggleClass:de,clone:Ao,index:pe,nextTick:ct,cancelNextTick:Bt,detectDirection:No,getChild:Ye};x.get=function(e){return e[ue]};x.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(x.utils=_e(_e({},x.utils),n.utils)),tt.mount(n)})};x.create=function(e,o){return new x(e,o)};x.version=ul;var J=[],je,Ft,Ut=!1,Ot,At,bt,We;function Pl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):this.options.supportPointer?U(document,"pointermove",this._handleFallbackAutoScroll):t.touches?U(document,"touchmove",this._handleFallbackAutoScroll):U(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):(N(document,"pointermove",this._handleFallbackAutoScroll),N(document,"touchmove",this._handleFallbackAutoScroll),N(document,"mousemove",this._handleFallbackAutoScroll)),uo(),ut(),hl()},nulling:function(){bt=Ft=je=Ut=We=Ot=At=null,J.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,r=document.elementFromPoint(l,a);if(bt=o,t||this.options.forceAutoScrollFallback||et||Se||ze){Pt(o,this.options,r,t);var d=Ce(r,!0);Ut&&(!We||l!==Ot||a!==At)&&(We&&uo(),We=setInterval(function(){var s=Ce(document.elementFromPoint(l,a),!0);s!==d&&(d=s,ut()),Pt(o,n.options,s,t)},10),Ot=l,At=a)}else{if(!this.options.bubbleScroll||Ce(r,!0)===be()){ut();return}Pt(o,this.options,Ce(r,!1),!1)}}},we(e,{pluginName:"scroll",initializeByDefault:!0})}function ut(){J.forEach(function(e){clearInterval(e.pid)}),J=[]}function uo(){clearInterval(We)}var Pt=Mo(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,r=o.scrollSensitivity,d=o.scrollSpeed,s=be(),f=!1,p;Ft!==t&&(Ft=t,ut(),je=o.scroll,p=o.scrollFn,je===!0&&(je=Ce(t,!0)));var u=0,b=je;do{var g=b,A=Z(g),$=A.top,B=A.bottom,F=A.left,O=A.right,P=A.width,E=A.height,C=void 0,Y=void 0,z=g.scrollWidth,_=g.scrollHeight,k=S(g),q=g.scrollLeft,te=g.scrollTop;g===s?(C=P<z&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),Y=E<_&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(C=P<z&&(k.overflowX==="auto"||k.overflowX==="scroll"),Y=E<_&&(k.overflowY==="auto"||k.overflowY==="scroll"));var H=C&&(Math.abs(O-l)<=r&&q+P<z)-(Math.abs(F-l)<=r&&!!q),j=Y&&(Math.abs(B-a)<=r&&te+E<_)-(Math.abs($-a)<=r&&!!te);if(!J[u])for(var G=0;G<=u;G++)J[G]||(J[G]={});(J[u].vx!=H||J[u].vy!=j||J[u].el!==g)&&(J[u].el=g,J[u].vx=H,J[u].vy=j,clearInterval(J[u].pid),(H!=0||j!=0)&&(f=!0,J[u].pid=setInterval((function(){n&&this.layer===0&&x.active._onTouchMove(bt);var I=J[this.layer].vy?J[this.layer].vy*d:0,R=J[this.layer].vx?J[this.layer].vx*d:0;typeof p=="function"&&p.call(x.dragged.parentNode[ue],R,I,e,bt,J[this.layer].el)!=="continue"||Oo(J[this.layer].el,R,I)}).bind({layer:u}),24))),u++}while(o.bubbleScroll&&b!==s&&(b=Ce(b,!1)));Ut=f}},30),Uo=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(o){var s=t||l;r();var f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,p=document.elementFromPoint(f.clientX,f.clientY);d(),s&&!s.el.contains(p)&&(a("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function Lt(){}Lt.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Ye(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Uo};we(Lt,{pluginName:"revertOnSpill"});function jt(){}jt.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:Uo};we(jt,{pluginName:"removeOnSpill"});x.mount(new Pl);x.mount(jt,Lt);function Il(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Nl(e){Yt()&&Wo(e)}function Rl(e){Yt()?jo(e):vo(e)}let Ho=null,Yo=null;function po(e=null,o=null){Ho=e,Yo=o}function Bl(){return{data:Ho,clonedData:Yo}}const fo=Symbol("cloneElement");function Fl(...e){var o,t;const n=(o=Yt())==null?void 0:o.proxy;let l=null;const a=e[0];let[,r,d]=e;Array.isArray(i(r))||(d=r,r=null);let s=null;const{immediate:f=!0,clone:p=Il,customUpdate:u}=(t=i(d))!=null?t:{};function b(_){var k;const{from:q,oldIndex:te,item:H}=_;l=Array.from(q.childNodes);const j=i((k=i(r))==null?void 0:k[te]),G=p(j);po(j,G),H[fo]=G}function g(_){const k=_.item[fo];if(!el(k)){if(xt(_.item),Ve(r)){const q=[...i(r)];r.value=Qt(q,_.newDraggableIndex,k);return}Qt(i(r),_.newDraggableIndex,k)}}function A(_){const{from:k,item:q,oldIndex:te,oldDraggableIndex:H,pullMode:j,clone:G}=_;if(eo(k,q,te),j==="clone"){xt(G);return}if(Ve(r)){const I=[...i(r)];r.value=Kt(I,H);return}Kt(i(r),H)}function $(_){if(u){u(_);return}const{from:k,item:q,oldIndex:te,oldDraggableIndex:H,newDraggableIndex:j}=_;if(xt(q),eo(k,q,te),Ve(r)){const G=[...i(r)];r.value=Zt(G,H,j);return}Zt(i(r),H,j)}function B(_){const{newIndex:k,oldIndex:q,from:te,to:H}=_;let j=null;const G=k===q&&te===H;try{if(G){let I=null;l==null||l.some((R,ie)=>{if(I&&(l==null?void 0:l.length)!==H.childNodes.length)return te.insertBefore(I,R.nextSibling),!0;const w=H.childNodes[ie];I=H==null?void 0:H.replaceChild(R,w)})}}catch(I){j=I}finally{l=null}vo(()=>{if(po(),j)throw j})}const F={onUpdate:$,onStart:b,onAdd:g,onRemove:A,onEnd:B};function O(_){const k=i(a);return _||(_=tl(k)?ol(k,n==null?void 0:n.$el):k),_&&!al(_)&&(_=_.$el),_||Qn("Root element not found"),_}function P(){var _;const k=(_=i(d))!=null?_:{},{immediate:q,clone:te}=k,H=Zn(k,["immediate","clone"]);return to(H,(j,G)=>{il(j)&&(H[j]=(I,...R)=>{const ie=Bl();return rl(I,ie),G(I,...R)})}),ll(r===null?{}:F,H)}const E=_=>{_=O(_),s&&C.destroy(),s=new x(_,P())};Lo(()=>d,()=>{s&&to(P(),(_,k)=>{s==null||s.option(_,k)})},{deep:!0});const C={option:(_,k)=>s==null?void 0:s.option(_,k),destroy:()=>{s==null||s.destroy(),s=null},save:()=>s==null?void 0:s.save(),toArray:()=>s==null?void 0:s.toArray(),closest:(..._)=>s==null?void 0:s.closest(..._)},Y=()=>C==null?void 0:C.option("disabled",!0),z=()=>C==null?void 0:C.option("disabled",!1);return Rl(()=>{f&&E()}),Nl(C.destroy),xo({start:E,pause:Y,resume:z},C)}const Ul=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"];[...Ul.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)];const Hl={class:"table table-striped sortable mb-0"},Yl={style:{width:"25%"}},Xl={style:{width:"25%"}},ql={style:{width:"25%"}},Ll={style:{width:"20%"}},jl={class:"pe-2"},Wl={class:"ps-2"},Vl={class:"typography-subheading"},zl={class:"btn-group btn-group-sm"},Gl=["title","onClick"],Jl=["title","onClick"],Zl=["title","onClick"],Kl=["title","onClick"],mo=ge({__name:"ReorderModal",setup(e,{expose:o}){const t=se(!0),n=se(null),l=ae("$tbody"),a=se([]),r=ae("$modal"),{show:d}=wt(r),{axios:s}=Xe(),f=E=>{n.value=E,t.value=!0,d(),s.get(E).then(C=>{a.value=C.data,t.value=!1})},{notifySuccess:p}=Pe(),{$gettext:u}=ke(),b=()=>{const E={};let C=0;a.value.forEach(Y=>{C++,E[Y.id]=C}),s.put(n.value,{order:E}).then(()=>{p(u("Playlist order set."))})},g=E=>{const C=a.value.splice(E,1)[0];a.value.splice(E+1,0,C),b()},A=E=>{const C=a.value.splice(E,1)[0];a.value.splice(a.value.length,0,C),b()},$=E=>{const C=a.value.splice(E,1)[0];a.value.splice(E-1,0,C),b()},B=E=>{const C=a.value.splice(E,1)[0];a.value.splice(0,0,C),b()};Zo("reorder");const{stop:F}=Ko(),O=()=>{Fl(l,a,{onEnd(){b()}})},P=()=>{F()};return o({open:f}),(E,C)=>(y(),fe(yt,{id:"reorder_modal",ref_key:"$modal",ref:r,size:"lg",title:i(u)("Reorder Playlist"),busy:t.value,"hide-footer":"",onShown:O,onHidden:P},{default:T(()=>[v(cn,{class:"text-start bg-primary rounded mb-2 p-1"}),c("table",Hl,[c("thead",null,[c("tr",null,[C[0]||(C[0]=c("th",{style:{width:"5%"}},"  ",-1)),c("th",Yl,h(i(u)("Title")),1),c("th",Xl,h(i(u)("Artist")),1),c("th",ql,h(i(u)("Album")),1),c("th",Ll,h(i(u)("Actions")),1)])]),c("tbody",{ref_key:"$tbody",ref:l},[(y(!0),M(ee,null,Qe(a.value,(Y,z)=>(y(),M("tr",{key:Y.media.id,class:"align-middle"},[c("td",jl,[v(dn,{url:Y.media.links.play},null,8,["url"])]),c("td",Wl,[c("span",Vl,h(Y.media.title),1)]),c("td",null,h(Y.media.artist),1),c("td",null,h(Y.media.album),1),c("td",null,[c("div",zl,[z+1<a.value.length?(y(),M("button",{key:0,type:"button",class:"btn btn-secondary",title:i(u)("Move to Bottom"),onClick:qe(_=>A(z),["prevent"])},[v(Ae,{icon:i(tn)},null,8,["icon"])],8,Gl)):K("",!0),z+1<a.value.length?(y(),M("button",{key:1,type:"button",class:"btn btn-primary",title:i(u)("Move Down"),onClick:qe(_=>g(z),["prevent"])},[v(Ae,{icon:i(on)},null,8,["icon"])],8,Jl)):K("",!0),z>0?(y(),M("button",{key:2,type:"button",class:"btn btn-primary",title:i(u)("Move Up"),onClick:qe(_=>$(z),["prevent"])},[v(Ae,{icon:i(nn)},null,8,["icon"])],8,Zl)):K("",!0),z>0?(y(),M("button",{key:3,type:"button",class:"btn btn-secondary",title:i(u)("Move to Top"),onClick:qe(_=>B(z),["prevent"])},[v(Ae,{icon:i(ln)},null,8,["icon"])],8,Kl)):K("",!0)])])]))),128))],512)])]),_:1},8,["title","busy"]))}}),Ql={key:0},ea={class:"card-text"},ta={class:"table-responsive",style:{"max-height":"350px","overflow-y":"scroll"}},oa={class:"table table-striped",style:{"max-height":"300px","overflow-y":"scroll"}},na={class:"p-2"},la={class:"p-2 text-monospace",style:{"overflow-x":"auto"}},aa={class:"mb-0"},ia={key:0,class:"mb-0 text-success"},ra={key:1,class:"mb-0 text-danger"},sa=ge({__name:"ImportModal",emits:["relist"],setup(e,{expose:o,emit:t}){const n=t,l=se(null),a=se(null),r=se(!1),d=se(null),s=O=>{a.value=O},f=ae("$modal"),{show:p,hide:u}=wt(f),b=O=>{a.value=null,r.value=!1,l.value=O,p()},{notifySuccess:g,notifyError:A}=Pe(),{axios:$}=Xe(),B=()=>{const O=new FormData;O.append("playlist_file",a.value),$.post(l.value,O).then(P=>{P.data.success?(d.value=P.data,g(P.data.message)):(A(P.data.message),u())})},F=()=>{n("relist"),d.value=null};return o({open:b}),(O,P)=>(y(),fe(yt,{id:"import_modal",ref_key:"$modal",ref:f,title:O.$gettext("Import from PLS/M3U"),size:"lg",onHidden:F},{"modal-footer":T(()=>[c("button",{type:"button",class:"btn btn-secondary",onClick:P[0]||(P[0]=(...E)=>i(u)&&i(u)(...E))},h(O.$gettext("Close")),1),d.value?K("",!0):(y(),M("button",{key:0,class:"btn btn-primary",type:"submit",onClick:B},h(O.$gettext("Import from PLS/M3U")),1))]),default:T(()=>[d.value?(y(),M("div",Ql,[c("p",ea,h(d.value.message),1),c("div",ta,[c("table",oa,[c("thead",null,[c("tr",null,[c("th",na,[X(h(O.$gettext("Original Path")),1),P[1]||(P[1]=c("br",null,null,-1)),X(" "+h(O.$gettext("Matched")),1)])])]),c("tbody",null,[(y(!0),M(ee,null,Qe(d.value.import_results,E=>(y(),M("tr",{key:E.path},[c("td",la,[c("pre",aa,h(E.path),1),E.match?(y(),M("pre",ia,h(E.match),1)):(y(),M("pre",ra,"                                "+h(O.$gettext("No Match"))+`
                            `,1))])]))),128))])])])])):(y(),M("form",{key:1,class:"form",onSubmit:qe(B,["prevent"])},[v(pn,{id:"import_modal_playlist_file"},{label:T(()=>[X(h(O.$gettext("Select PLS/M3U File to Import")),1)]),description:T(()=>[X(h(O.$gettext("Aplus will scan the uploaded file for matches in this station's music library. Media should already be uploaded before running this step. You can re-run this tool as many times as needed.")),1)]),default:T(({id:E})=>[v(fn,{id:E,onUploaded:s},null,8,["id"])]),_:1}),v(un)],32))]),_:1},8,["title"]))}}),da={class:"table table-striped sortable mb-0"},ca={style:{width:"50%"}},ua={style:{width:"50%"}},pa={class:"typography-subheading"},fa=ge({__name:"QueueModal",setup(e,{expose:o}){const t=se(!0),n=se(null),l=se([]),a=ae("$modal"),{show:r,hide:d}=wt(a),{axios:s}=Xe(),f=A=>{n.value=A,t.value=!0,s.get(A).then($=>{l.value=$.data,t.value=!1}),r()},p=()=>{t.value=!1,n.value=null},{notifySuccess:u}=Pe(),{$gettext:b}=ke(),g=()=>{s.delete(n.value).then(()=>{u(b("Playlist queue cleared.")),d()})};return o({open:f}),(A,$)=>(y(),fe(yt,{id:"queue_modal",ref_key:"$modal",ref:a,size:"lg",title:i(b)("Playback Queue"),busy:t.value,onHidden:p},{"modal-footer":T(()=>[c("button",{class:"btn btn-secondary",type:"button",onClick:$[0]||($[0]=(...B)=>i(d)&&i(d)(...B))},h(i(b)("Close")),1),c("button",{class:"btn btn-danger",type:"submit",onClick:g},h(i(b)("Clear Queue")),1)]),default:T(()=>[c("p",null,h(i(b)("This queue contains the remaining tracks in the order they will be queued by the Aplus AutoDJ (if the tracks are eligible to be played).")),1),c("table",da,[c("thead",null,[c("tr",null,[c("th",ca,h(i(b)("Title")),1),c("th",ua,h(i(b)("Artist")),1)])]),c("tbody",null,[(y(!0),M(ee,null,Qe(l.value,B=>(y(),M("tr",{key:B.id,class:"align-middle"},[c("td",null,[c("span",pa,h(B.title),1)]),c("td",null,h(B.artist),1)]))),128))])])]),_:1},8,["title","busy"]))}}),ma={class:"row g-3"},ha=ge({__name:"CloneModal",emits:["relist","needs-restart"],setup(e,{expose:o,emit:t}){const n=t,l=se(null),{form:a,v$:r,resetForm:d,ifValid:s}=wo({name:{required:pt},clone:{}},{name:"",clone:[]}),f=()=>{l.value=null,d()},{$gettext:p}=ke(),u=[{value:"media",text:p("Copy associated media and folders.")},{value:"schedule",text:p("Copy scheduled playback times.")}],b=ae("$modal"),g=(F,O)=>{f(),l.value=O,a.value.name=p("%{name} - Copy",{name:F}),b.value.show()},{notifySuccess:A}=Pe(),{axios:$}=Xe(),B=()=>{s(()=>{$({method:"POST",url:l.value,data:a.value}).then(()=>{A(),n("needs-restart"),n("relist"),b.value.hide()})})};return o({open:g}),(F,O)=>(y(),fe(yo,{id:"clone_modal",ref_key:"$modal",ref:b,title:i(p)("Duplicate Playlist"),"disable-save-button":i(r).$invalid,onSubmit:B,onHidden:f},{default:T(()=>[c("div",ma,[v(ve,{id:"form_edit_name",class:"col-md-12",field:i(r).name,label:i(p)("New Playlist Name")},null,8,["field","label"]),v(Oe,{id:"form_edit_clone",class:"col-md-12",field:i(r).clone,options:u,stacked:"",label:i(p)("Customize Copy")},null,8,["field","label"])])]),_:1},8,["title","disable-save-button"]))}}),va={class:"row g-3"},ga={class:"col-md-4"},ba={class:"col-md-8"},_a={style:{"max-height":"300px","overflow-y":"scroll"}},ya=["disabled"],wa=ge({__name:"ApplyToModal",emits:["relist"],setup(e,{expose:o,emit:t}){const n=t,l=ae("$modal"),{show:a,hide:r}=wt(l),{$gettext:d}=ke(),s=[{key:"name",isRowHeader:!0,label:d("Directory")}],f=se(!0),p=se(null),{record:u,reset:b}=mn({playlist:{id:null,name:""},directories:[]}),g=se([]),A=_=>{g.value=Nt.map(_,"path")},{form:$,v$:B,resetForm:F,ifValid:O}=wo({copyPlaylist:{}},{copyPlaylist:!1}),P=()=>{p.value=null,g.value=[],b(),F()},{axios:E}=Xe(),C=_=>{P(),p.value=_,f.value=!0,a(),E.get(_).then(k=>{u.value=k.data,f.value=!1})},{notifySuccess:Y}=Pe(),z=()=>{O(()=>{E.put(p.value,{...$.value,directories:g.value}).then(()=>{Y(d("Playlist successfully applied to folders."))}).finally(()=>{r(),n("relist")})})};return o({open:C}),(_,k)=>(y(),fe(yt,{id:"apply_playlist_to_modal",ref_key:"$modal",ref:l,size:"xl",centered:"",loading:f.value,title:i(d)("Apply Playlist to Folders"),onHidden:P},{"modal-footer":T(()=>[c("button",{type:"button",class:"btn btn-secondary",onClick:k[0]||(k[0]=(...q)=>i(r)&&i(r)(...q))},h(i(d)("Close")),1),c("button",{type:"button",class:"btn btn-primary",disabled:g.value.length===0,onClick:z},h(i(d)("Apply to Folders")),9,ya)]),default:T(()=>[c("div",va,[c("div",ga,[v(Xt,{id:"apply_to_playlist_name"},{label:T(()=>[X(h(i(d)("Playlist:")),1)]),default:T(()=>[X(" "+h(i(u).playlist.name),1)]),_:1})]),c("div",ba,[v(Me,{id:"form_applyto_copy_playlist",field:i(B).copyPlaylist},{label:T(()=>[X(h(i(d)("Create New Playlist for Each Folder")),1)]),_:1},8,["field"])])]),c("div",_a,[v(ho,{fields:s,items:i(u).directories,"handle-client-side":"","show-toolbar":!1,selectable:"",onRowSelected:A},null,8,["items"])])]),_:1},8,["loading","title"]))}}),ka={class:"card",role:"region","aria-labelledby":"hdr_playlists"},Sa={class:"card-header text-bg-primary"},xa={class:"row align-items-center"},$a={class:"col-md-6"},Ca={id:"hdr_playlists",class:"card-title"},Da={class:"col-md-6 text-end"},Ea={class:"card-body"},Ta={class:"card-body-flush"},Ma={class:"card-body buttons"},Oa={class:"m-0"},Aa={class:"badges"},Pa={class:"badge text-bg-secondary"},Ia={key:0,class:"badge text-bg-primary"},Na={key:1,class:"badge text-bg-info"},Ra={key:2,class:"badge text-bg-info"},Ba={key:3,class:"badge text-bg-info"},Fa={key:4,class:"badge text-bg-danger"},Ua={class:"btn-group btn-group-sm"},Ha=["onClick"],Ya=["onClick"],Xa=["onClick"],qa={class:"buttons",style:{"line-height":"2.5"}},La=["onClick"],ja=["onClick"],Wa=["onClick"],Va=["onClick"],za=["onClick"],Ga=["onClick"],Ja=["onClick"],Za=["onClick"],Ka=["href"],tr=ge({__name:"Playlists",props:{useManualAutoDj:{type:Boolean}},setup(e){const o=e,t=Gt("/playlists");Gt("/playlists/schedule");const{$gettext:n}=ke(),l=[{key:"name",isRowHeader:!0,label:n("Playlist"),sortable:!0},{key:"scheduling",label:n("Scheduling"),sortable:!1},{key:"num_songs",label:n("# Songs"),sortable:!1},{key:"actions",label:n("Actions"),sortable:!1,class:"shrink"}],{Duration:a}=bn(),r=I=>I===0?n("None"):a.fromMillis(I*1e3).rescale().toHuman(),d=ae("$dataTable"),{refresh:s}=_n(d),f=ae("$scheduleTab"),p=()=>{var I;s(),(I=f.value)==null||I.refresh()},u=ae("$editModal"),{doCreate:b,doEdit:g}=vn(u),A=ae("$reorderModal"),$=I=>{var R;(R=A.value)==null||R.open(I)},B=ae("$queueModal"),F=I=>{var R;(R=B.value)==null||R.open(I)},O=ae("$importModal"),P=I=>{var R;(R=O.value)==null||R.open(I)},E=ae("$cloneModal"),C=(I,R)=>{var ie;(ie=E.value)==null||ie.open(I,R)},Y=ae("$applyToModal"),z=I=>{var R;(R=Y.value)==null||R.open(I)},{mayNeedRestart:_}=gn(),k=()=>{o.useManualAutoDj&&_()},{notifySuccess:q}=Pe(),{axios:te}=Xe(),H=I=>{te.put(I).then(R=>{k(),q(R.data.message),p()})},{doDelete:j}=zt(n("Delete Playlist?"),()=>{p(),k()}),{doDelete:G}=zt(n("Clear all media from playlist?"),()=>{p(),k()});return(I,R)=>{const ie=Vo("router-link");return y(),M(ee,null,[c("section",ka,[c("div",Sa,[c("div",xa,[c("div",$a,[c("h2",Ca,h(i(n)("Playlists")),1)]),c("div",Da,[v(_o)])])]),c("div",Ea,[v(bo,{"content-class":"mt-3","destroy-on-hide":""},{default:T(()=>[v(_t,{id:"all_playlists",label:i(n)("All Playlists")},{default:T(()=>[c("div",Ta,[c("div",Ma,[v(hn,{text:i(n)("Add Playlist"),onClick:i(b)},null,8,["text","onClick"])]),v(ho,{id:"station_playlists",ref_key:"$dataTable",ref:d,paginated:"",fields:l,"api-url":i(t),detailed:""},{"cell(name)":T(w=>[c("h5",Oa,h(w.item.name),1),c("div",Aa,[c("span",Pa,[w.item.source==="songs"?(y(),M(ee,{key:0},[X(h(i(n)("Song-based")),1)],64)):(y(),M(ee,{key:1},[X(h(i(n)("Remote URL")),1)],64))]),w.item.is_jingle?(y(),M("span",Ia,h(i(n)("Jingle Mode")),1)):K("",!0),w.item.source==="songs"&&w.item.order==="sequential"?(y(),M("span",Na,h(i(n)("Sequential")),1)):K("",!0),w.item.include_in_on_demand?(y(),M("span",Ra,h(i(n)("On-Demand")),1)):K("",!0),w.item.schedule_items.length>0?(y(),M("span",Ba,h(i(n)("Scheduled")),1)):K("",!0),w.item.is_enabled?K("",!0):(y(),M("span",Fa,h(i(n)("Disabled")),1))])]),"cell(scheduling)":T(({item:w})=>[w.is_enabled?w.source!=="songs"?(y(),M(ee,{key:1},[X(h(i(n)("Remote URL")),1)],64)):w.type==="default"?(y(),M(ee,{key:2},[X(h(i(n)("General Rotation")),1),R[0]||(R[0]=c("br",null,null,-1)),X(" "+h(i(n)("Weight"))+": "+h(w.weight),1)],64)):w.type==="once_per_x_songs"?(y(),M(ee,{key:3},[X(h(i(n)("Once per %{songs} Songs",{songs:w.play_per_songs})),1)],64)):w.type==="once_per_x_minutes"?(y(),M(ee,{key:4},[X(h(i(n)("Once per %{minutes} Minutes",{minutes:w.play_per_minutes})),1)],64)):w.type==="once_per_hour"?(y(),M(ee,{key:5},[X(h(i(n)("Once per Hour (at %{minute})",{minute:w.play_per_hour_minute})),1)],64)):(y(),M(ee,{key:6},[X(h(i(n)("Custom")),1)],64)):(y(),M(ee,{key:0},[X(h(i(n)("Disabled")),1)],64))]),"cell(num_songs)":T(w=>[w.item.source==="songs"?(y(),M(ee,{key:0},[v(ie,{to:{name:"stations:files:index",params:{path:"playlist:"+w.item.short_name}}},{default:T(()=>[X(h(w.item.num_songs),1)]),_:2},1032,["to"]),X(" ("+h(r(w.item.total_length))+") ",1)],64)):(y(),M(ee,{key:1},[X("  ")],64))]),"cell(actions)":T(({item:w,isActive:oe,toggleDetails:St})=>[c("div",Ua,[c("button",{type:"button",class:"btn btn-primary",onClick:Wt=>i(g)(w.links.self)},h(i(n)("Edit")),9,Ha),c("button",{type:"button",class:"btn btn-danger",onClick:Wt=>i(j)(w.links.self)},h(i(n)("Delete")),9,Ya),c("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:Wt=>St()},[v(Ae,{icon:oe?i(an):i(rn)},null,8,["icon"]),X(" "+h(i(n)("More")),1)],8,Xa)])]),detail:T(({item:w})=>[c("div",qa,[w.links.order?(y(),M("button",{key:0,type:"button",class:"btn btn-sm btn-primary",onClick:oe=>$(w.links.order)},h(i(n)("Reorder")),9,La)):K("",!0),c("button",{type:"button",class:It(["btn btn-sm",w.is_enabled?"btn-warning":"btn-success"]),onClick:oe=>H(w.links.toggle)},h(w.is_enabled?i(n)("Disable"):i(n)("Enable")),11,ja),w.links.empty?(y(),M("button",{key:1,type:"button",class:"btn btn-sm btn-danger",onClick:oe=>i(G)(w.links.empty)},h(i(n)("Empty")),9,Wa)):K("",!0),w.links.reshuffle?(y(),M("button",{key:2,type:"button",class:"btn btn-sm btn-secondary",onClick:oe=>H(w.links.reshuffle)},h(i(n)("Reshuffle")),9,Va)):K("",!0),w.links.import?(y(),M("button",{key:3,type:"button",class:"btn btn-sm btn-secondary",onClick:oe=>P(w.links.import)},h(i(n)("Import from PLS/M3U")),9,za)):K("",!0),w.links.queue?(y(),M("button",{key:4,type:"button",class:"btn btn-sm btn-secondary",onClick:oe=>F(w.links.queue)},h(i(n)("Playback Queue")),9,Ga)):K("",!0),w.links.applyto?(y(),M("button",{key:5,type:"button",class:"btn btn-sm btn-secondary",onClick:oe=>z(w.links.applyto)},h(i(n)("Apply to Folders")),9,Ja)):K("",!0),c("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:oe=>C(w.name,w.links.clone)},h(i(n)("Duplicate")),9,Za),(y(),M(ee,null,Qe(["pls","m3u"],oe=>c("a",{key:oe,class:"btn btn-sm btn-secondary",href:w.links.export[oe],target:"_blank"},h(i(n)("Export %{format}",{format:oe.toUpperCase()})),9,Ka)),64))])]),_:1},8,["api-url"])])]),_:1},8,["label"])]),_:1})])]),v(Gn,{ref_key:"$editModal",ref:u,"create-url":i(t),onRelist:p,onNeedsRestart:k},null,8,["create-url"]),v(mo,{ref_key:"$reorderModal",ref:A},null,512),v(fa,{ref_key:"$queueModal",ref:B},null,512),v(mo,{ref_key:"$reorderModal",ref:A},null,512),v(sa,{ref_key:"$importModal",ref:O,onRelist:p},null,512),v(ha,{ref_key:"$cloneModal",ref:E,onRelist:p,onNeedsRestart:k},null,512),v(wa,{ref_key:"$applyToModal",ref:Y,onRelist:p},null,512)],64)}}});export{tr as default};
