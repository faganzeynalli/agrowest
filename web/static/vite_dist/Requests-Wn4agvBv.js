import{_ as A}from"./DataTable-DZ8UW5rS.js";import{l as x}from"./lodash-Bdl6ys83.js";import{A as q}from"./AlbumArt-D0N5gbUO.js";import{u as B,f as N,d as R}from"./usePlayerStore-CrWhEdqk.js";import{d,c as w,h as b,o as u,w as f,e as o,t as n,u as C,f as $,i as E,b as T,g as V,n as F,k as L}from"./vue-DTJ-1uEH.js";const S={class:"d-flex align-items-center"},U={class:"flex-fill"},D=["onClick"],P=d({__name:"RequestsDataTable",props:{requestListUri:{},showAlbumArt:{type:Boolean},customFields:{}},emits:["submitted"],setup(r,{emit:i}){const c=r,m=i,{$gettext:l}=B(),p=w(()=>{const a=[{key:"name",isRowHeader:!0,label:l("Name"),sortable:!1,selectable:!0},{key:"title",label:l("Title"),sortable:!0,selectable:!0,visible:!1,formatter:(e,t,s)=>s.song.title},{key:"artist",label:l("Artist"),sortable:!0,selectable:!0,visible:!1,formatter:(e,t,s)=>s.song.artist},{key:"album",label:l("Album"),sortable:!0,selectable:!0,visible:!1,formatter:(e,t,s)=>s.song.album},{key:"genre",label:l("Genre"),sortable:!0,selectable:!0,visible:!1,formatter:(e,t,s)=>s.song.genre}];return x.forEach({...c.customFields},e=>{a.push({key:"custom_field_"+e.id,label:e.name,sortable:!1,selectable:!0,visible:!1,formatter:(t,s,v)=>v.song.custom_fields[e.short_name]})}),a.push({key:"actions",label:l("Actions"),class:"shrink",sortable:!1}),a}),_=[10,25],{notifySuccess:y,notifyError:k}=N(),{axios:g}=R(),h=a=>{g.post(a).then(e=>{e.data.success?y(e.data.message):k(e.data.message)}).finally(()=>{m("submitted")})};return(a,e)=>(u(),b(A,{id:"public_requests",ref:"datatable",paginated:"","select-fields":"","page-options":_,fields:p.value,"api-url":a.requestListUri},{"cell(name)":f(t=>[o("div",S,[a.showAlbumArt?(u(),b(q,{key:0,src:t.item.song.art,width:40,class:"flex-shrink-1 pe-3"},null,8,["src"])):$("",!0),o("div",U,[E(n(t.item.song.title),1),e[0]||(e[0]=o("br",null,null,-1)),o("small",null,n(t.item.song.artist),1)])])]),"cell(actions)":f(t=>[o("button",{type:"button",class:"btn btn-sm btn-primary",onClick:s=>h(t.item.request_url)},n(C(l)("Request")),9,D)]),_:1},8,["fields","api-url"]))}}),z={class:"container-fluid"},J=d({inheritAttrs:!1,__name:"Requests",props:{requestListUri:{},showAlbumArt:{type:Boolean,default:!0},customFields:{default:()=>[]}},setup(r){const i=r;return(c,m)=>(u(),T("div",z,[V(P,F(L(i)),null,16)]))}});export{J as _};
