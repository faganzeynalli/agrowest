import{d as k,r as m,s as h,U as V,h as d,o as l,w as _,e as v,g as x,u as c,j as w,b as U,f as B,F as L,t as b,H as M}from"./vue-DTJ-1uEH.js";import{_ as F}from"./StreamingLogView-IVhe3t7M.js";import{f as H}from"./index-Bjjcwhm_.js";import{u as N,_ as S}from"./useHasModal-DtYoA97m.js";import{d as T}from"./usePlayerStore-CrWhEdqk.js";import{_ as z}from"./Loading-CxLO-rjm.js";import{o as D}from"./index.es-vGs_rtSc.js";import{u as E}from"./PanelLayout-CgEqeYFf.js";const R={style:{height:"300px",resize:"vertical",overflow:"auto !important"}},j=k({__name:"FixedLogView",props:{logUrl:{}},setup(y,{expose:f}){const e=y,s=m(!1),o=m(""),{isDark:p}=E(),{axios:n}=T();return h(V(e,"logUrl"),i=>{s.value=!0,o.value="",i!==null&&n({method:"GET",url:e.logUrl}).then(a=>{a.data.contents!==""&&(o.value=a.data.contents)}).finally(()=>{s.value=!1})},{immediate:!0}),f({getContents:()=>o.value}),(i,a)=>(l(),d(z,{loading:s.value},{default:_(()=>[v("div",R,[x(c(D),{id:"log-view-contents",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=g=>o.value=g),readonly:"",basic:"",dark:c(p)},null,8,["modelValue","dark"])])]),_:1},8,["loading"]))}}),Q=k({__name:"StreamingLogModal",setup(y,{expose:f}){const e=m(""),s=m(!0),o=w("$modal"),{show:p,hide:n}=N(o),r=w("$logView"),i=(t,u=!0)=>{e.value=t,s.value=u,p()},a=H(),g=()=>{var t;a.copy((t=r.value)==null?void 0:t.getContents())},C=()=>{e.value=""};return f({show:i}),(t,u)=>(l(),d(S,{id:"logs_modal",ref_key:"$modal",ref:o,size:"xl",title:t.$gettext("Log Viewer"),"no-enforce-focus":"",onHidden:C},{"modal-footer":_(()=>[v("button",{class:"btn btn-secondary",type:"button",onClick:u[0]||(u[0]=(...$)=>c(n)&&c(n)(...$))},b(t.$gettext("Close")),1),v("button",{class:"btn btn-primary btn_copy",type:"button",onClick:M(g,["prevent"])},b(t.$gettext("Copy to Clipboard")),1)]),default:_(()=>[e.value?(l(),U(L,{key:0},[s.value?(l(),d(F,{key:0,ref_key:"$logView",ref:r,"log-url":e.value},null,8,["log-url"])):(l(),d(j,{key:1,ref_key:"$logView",ref:r,"log-url":e.value},null,8,["log-url"]))],64)):B("",!0)]),_:1},8,["title"]))}});export{Q as _};
