import{_ as B}from"./DataTable-cMgABYUQ.js";import{_ as h}from"./index-WveReOzm.js";import{u as D}from"./useVuelidateOnFormTab-DprNfx7S.js";import{r as E}from"./index-CSh-MSYs.js";import{d as S,a4 as K,L as A,c as U,b as g,o as $,g as n,u as e,w as i,i as l,t as s,z as N,j as v,h as R,K as V,e as o,f as q}from"./vue-B-dHMJBO.js";import{u as L}from"./useBaseEditModal-BFzuNi8x.js";import{u as P}from"./usePlayerStore-CkejGpKz.js";import{_ as O}from"./ModalForm-BQaB-ref.js";import{u as j}from"./useHasDatatable-DPFcIMM0.js";import{u as z,_ as Y}from"./AddButton-mzslCaiE.js";import{u as G}from"./useConfirmAndDelete-6i90sp5u.js";import{_ as T}from"./CardPage-0fdasE1K.js";import{g as J}from"./router-C-xyFC2M.js";import"./lodash-Bdl6ys83.js";import"./lodash-BwctMegf.js";import"./icons-Yf7pfv1X.js";import"./FormMultiCheck-C8kU6V99.js";import"./FormCheckbox-CBrIHDuX.js";import"./useOptionalStorage-LDU0NgBk.js";import"./index-Ct57DpS4.js";import"./useFormField-B74zyo5n.js";import"./FormGroup-DZPf8gKm.js";import"./useVuelidateOnForm-vxUTvTiB.js";import"./mergeExisting-D7dGFTzO.js";import"./bootstrap.esm-BZy605kZ.js";import"./InvisibleSubmitButton-DW6QYji6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useSlotsExcept-ZKe4NxAj.js";import"./useHasModal-BzUs2Wgc.js";import"./Loading-B4WK-6A0.js";import"./useDialog-j5jWy_Yl.js";import"./InfoCard-D6xe4CFe.js";const Q={class:"row g-3"},W=S({__name:"Form",props:K({isEditMode:{type:Boolean}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(u){const d=u,t=A(u,"form"),{v$:a}=D(t,U(()=>({username:{required:E},password:d.isEditMode?{}:{required:E},publicKeys:{}})),{username:"",password:null,publicKeys:null});return(r,m)=>($(),g("div",Q,[n(h,{id:"edit_form_username",class:"col-md-6",field:e(a).username},{label:i(()=>[l(s(r.$gettext("Username")),1)]),_:1},8,["field"]),n(h,{id:"edit_form_password",class:"col-md-6",field:e(a).password,"input-type":"password"},N({_:2},[r.isEditMode?{name:"label",fn:i(()=>[l(s(r.$gettext("New Password")),1)]),key:"0"}:{name:"label",fn:i(()=>[l(s(r.$gettext("Password")),1)]),key:"1"},r.isEditMode?{name:"description",fn:i(()=>[l(s(r.$gettext("Leave blank to use the current password.")),1)]),key:"2"}:void 0]),1032,["field"]),n(h,{id:"edit_form_publicKeys",class:"col-md-12",field:e(a).publicKeys,"input-type":"textarea"},{label:i(()=>[l(s(r.$gettext("SSH Public Keys")),1)]),description:i(()=>[l(s(r.$gettext("Optionally supply SSH public keys this user can use to connect instead of a password. Enter one key per line.")),1)]),_:1},8,["field"])]))}}),X=S({__name:"EditModal",props:{createUrl:{}},emits:["relist"],setup(u,{expose:d,emit:t}){const a=u,r=t,m=v("$modal"),{loading:f,error:y,isEditMode:_,form:p,v$:c,clearContents:w,create:b,edit:k,doSubmit:F,close:H}=L(a,r,m,{},{}),{$gettext:M}=P(),I=U(()=>_.value?M("Edit SFTP User"):M("Add SFTP User"));return d({create:b,edit:k,close:H}),(de,C)=>($(),R(O,{ref_key:"$modal",ref:m,loading:e(f),title:I.value,error:e(y),"disable-save-button":e(c).$invalid,onSubmit:e(F),onHidden:e(w)},{default:i(()=>[n(W,{form:e(p),"onUpdate:form":C[0]||(C[0]=x=>V(p)?p.value=x:null),"is-edit-mode":e(_)},null,8,["form","is-edit-mode"])]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}}),Z={class:"row"},ee={class:"col-md-8"},te={class:"btn-group btn-group-sm"},oe=["onClick"],se=["onClick"],re={class:"col-md-4"},ie={class:"card-body"},ne={class:"mb-1"},ae={key:0},le={class:"mb-1"},qe=S({__name:"SftpUsers",props:{connectionInfo:{}},setup(u){const d=J("/sftp-users"),{$gettext:t}=P(),a=[{key:"username",isRowHeader:!0,label:t("Username"),sortable:!1},{key:"actions",label:t("Actions"),sortable:!1,class:"shrink"}],r=v("$dataTable"),{relist:m}=j(r),f=v("$editModal"),{doCreate:y,doEdit:_}=z(f),{doDelete:p}=G(t("Delete SFTP User?"),m);return(c,w)=>($(),g("div",Z,[o("div",ee,[n(T,{"header-id":"hdr_sftp_users",title:e(t)("SFTP Users")},{actions:i(()=>[n(Y,{text:e(t)("Add SFTP User"),onClick:e(y)},null,8,["text","onClick"])]),default:i(()=>[n(B,{id:"station_sftp_users",ref_key:"$dataTable",ref:r,"show-toolbar":!1,fields:a,"api-url":e(d)},{"cell(actions)":i(b=>[o("div",te,[o("button",{type:"button",class:"btn btn-primary",onClick:k=>e(_)(b.item.links.self)},s(e(t)("Edit")),9,oe),o("button",{type:"button",class:"btn btn-danger",onClick:k=>e(p)(b.item.links.self)},s(e(t)("Delete")),9,se)])]),_:1},8,["api-url"])]),_:1},8,["title"])]),o("div",re,[n(T,{"header-id":"hdr_connection_info",title:e(t)("Connection Information")},{default:i(()=>[o("div",ie,[o("dl",null,[o("dt",ne,s(e(t)("Server:")),1),o("dd",null,[o("code",null,s(c.connectionInfo.url),1)]),c.connectionInfo.ip?($(),g("dd",ae,[l(s(e(t)("You may need to connect directly to your IP address:"))+" ",1),o("code",null,s(c.connectionInfo.ip),1)])):q("",!0),o("dt",le,s(e(t)("Port:")),1),o("dd",null,[o("code",null,s(c.connectionInfo.port),1)])])])]),_:1},8,["title"])]),n(X,{ref_key:"$editModal",ref:f,"create-url":e(d),onRelist:e(m)},null,8,["create-url","onRelist"])]))}});export{qe as default};
