import{n as B,m as $,p as K,o as X,q as z,s as Q,t as Y,v as Z,x as ee,y as q,z as te,A as ne,B as V}from"./usePlayerStore-BlBABSf7.js";import{N as C,r as D,c as T,C as _,s as U,p as ae,W as oe,u as ue,q as re,X as se,B as ie}from"./vue-Cts3TEHg.js";const W=z?window:void 0,j=z?window.navigator:void 0;function le(e){var t;const u=_(e);return(t=u==null?void 0:u.$el)!=null?t:u}function x(...e){const t=[],u=()=>{t.forEach(a=>a()),t.length=0},v=(a,n,o,r)=>(a.addEventListener(n,o,r),()=>a.removeEventListener(n,o,r)),d=T(()=>{const a=q(_(e[0])).filter(n=>n!=null);return a.every(n=>typeof n!="string")?a:void 0}),i=$(()=>{var a,n;return[(n=(a=d.value)==null?void 0:a.map(o=>le(o)))!=null?n:[W].filter(o=>o!=null),q(_(d.value?e[1]:e[0])),q(ue(d.value?e[2]:e[1])),_(d.value?e[3]:e[2])]},([a,n,o,r])=>{if(u(),!(a!=null&&a.length)||!(n!=null&&n.length)||!(o!=null&&o.length))return;const c=ee(r)?{...r}:r;t.push(...a.flatMap(S=>n.flatMap(b=>o.map(y=>v(S,b,y,c)))))},{flush:"post"}),m=()=>{i(),u()};return V(u),m}function ce(){const e=C(!1),t=oe();return t&&ae(()=>{e.value=!0},t),e}function k(e){const t=ce();return T(()=>(t.value,!!e()))}function Se(e,t,u){const{immediate:v=!0,delay:d=0,onError:i=B,onSuccess:m=B,resetOnExecute:a=!0,shallow:n=!0,throwError:o}=u??{},r=n?C(t):D(t),c=C(!1),S=C(!1),b=C(void 0);async function y(p=0,...l){a&&(r.value=t),b.value=void 0,c.value=!1,S.value=!0,p>0&&await K(p);const s=typeof e=="function"?e(...l):e;try{const g=await s;r.value=g,c.value=!0,m(g)}catch(g){if(b.value=g,i(g),o)throw g}finally{S.value=!1}return r.value}v&&y(d);const h={state:r,isReady:c,isLoading:S,error:b,execute:y};function w(){return new Promise((p,l)=>{X(S).toBe(!1).then(()=>p(h)).catch(l)})}return{...h,then(p,l){return w().then(p,l)}}}function J(e,t={}){const{controls:u=!1,navigator:v=j}=t,d=k(()=>v&&"permissions"in v),i=C(),m=typeof e=="string"?{name:e}:e,a=C(),n=()=>{var r,c;a.value=(c=(r=i.value)==null?void 0:r.state)!=null?c:"prompt"};x(i,"change",n,{passive:!0});const o=te(async()=>{if(d.value){if(!i.value)try{i.value=await v.permissions.query(m)}catch{i.value=void 0}finally{n()}if(u)return ie(i.value)}});return o(),u?{state:a,isSupported:d,query:o}:a}function be(e={}){const{navigator:t=j,read:u=!1,source:v,copiedDuring:d=1500,legacy:i=!1}=e,m=k(()=>t&&"clipboard"in t),a=J("clipboard-read"),n=J("clipboard-write"),o=T(()=>m.value||i),r=C(""),c=C(!1),S=Z(()=>c.value=!1,d,{immediate:!1});function b(){let l=!(m.value&&p(a.value));if(!l)try{t.clipboard.readText().then(s=>{r.value=s})}catch{l=!0}l&&(r.value=w())}o.value&&u&&x(["copy","cut"],b,{passive:!0});async function y(l=_(v)){if(o.value&&l!=null){let s=!(m.value&&p(n.value));if(!s)try{await t.clipboard.writeText(l)}catch{s=!0}s&&h(l),r.value=l,c.value=!0,S.start()}}function h(l){const s=document.createElement("textarea");s.value=l??"",s.style.position="absolute",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),s.remove()}function w(){var l,s,g;return(g=(s=(l=document==null?void 0:document.getSelection)==null?void 0:l.call(document))==null?void 0:s.toString())!=null?g:""}function p(l){return l==="granted"||l==="prompt"}return{isSupported:o,text:r,copied:c,copy:y}}const R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P="__vueuse_ssr_handlers__",fe=de();function de(){return P in R||(R[P]=R[P]||{}),R[P]}function ve(e,t){return fe[e]||t}function pe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const me={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},F="vueuse-storage";function ye(e,t,u,v={}){var d;const{flush:i="pre",deep:m=!0,listenToStorageChanges:a=!0,writeDefaults:n=!0,mergeDefaults:o=!1,shallow:r,window:c=W,eventFilter:S,onError:b=f=>{console.error(f)},initOnMounted:y}=v,h=(r?C:D)(typeof t=="function"?t():t),w=T(()=>_(e));if(!u)try{u=ve("getDefaultStorage",()=>{var f;return(f=W)==null?void 0:f.localStorage})()}catch(f){b(f)}if(!u)return h;const p=_(t),l=pe(p),s=(d=v.serializer)!=null?d:me[l],{pause:g,resume:O}=Q(h,()=>I(h.value),{flush:i,deep:m,eventFilter:S});U(w,()=>A(),{flush:i}),c&&a&&Y(()=>{u instanceof Storage?x(c,"storage",A,{passive:!0}):x(c,F,H),y&&A()}),y||A();function M(f,E){if(c){const N={key:w.value,oldValue:f,newValue:E,storageArea:u};c.dispatchEvent(u instanceof Storage?new StorageEvent("storage",N):new CustomEvent(F,{detail:N}))}}function I(f){try{const E=u.getItem(w.value);if(f==null)M(E,null),u.removeItem(w.value);else{const N=s.write(f);E!==N&&(u.setItem(w.value,N),M(E,N))}}catch(E){b(E)}}function G(f){const E=f?f.newValue:u.getItem(w.value);if(E==null)return n&&p!=null&&u.setItem(w.value,s.write(p)),p;if(!f&&o){const N=s.read(E);return typeof o=="function"?o(N,p):l==="object"&&!Array.isArray(N)?{...p,...N}:N}else return typeof E!="string"?E:s.read(E)}function A(f){if(!(f&&f.storageArea!==u)){if(f&&f.key==null){h.value=p;return}if(!(f&&f.key!==w.value)){g();try{(f==null?void 0:f.newValue)!==s.write(h.value)&&(h.value=G(f))}catch(E){b(E)}finally{f?re(O):O()}}}}function H(f){A(f.detail)}return h}function Ee(e={}){const{navigator:t=j,requestPermissions:u=!1,constraints:v={audio:!0,video:!0},onUpdated:d}=e,i=D([]),m=T(()=>i.value.filter(y=>y.kind==="videoinput")),a=T(()=>i.value.filter(y=>y.kind==="audioinput")),n=T(()=>i.value.filter(y=>y.kind==="audiooutput")),o=k(()=>t&&t.mediaDevices&&t.mediaDevices.enumerateDevices),r=C(!1);let c;async function S(){o.value&&(i.value=await t.mediaDevices.enumerateDevices(),d==null||d(i.value),c&&(c.getTracks().forEach(y=>y.stop()),c=null))}async function b(){if(!o.value)return!1;if(r.value)return!0;const{state:y,query:h}=J("camera",{controls:!0});if(await h(),y.value!=="granted"){let w=!0;try{c=await t.mediaDevices.getUserMedia(v)}catch{c=null,w=!1}S(),r.value=w}else r.value=!0;return r.value}return o.value&&(u&&b(),x(t.mediaDevices,"devicechange",S,{passive:!0}),S()),{devices:i,ensurePermissions:b,permissionGranted:r,videoInputs:m,audioInputs:a,audioOutputs:n,isSupported:o}}const L=new Map;function Ce(e){const t=se();function u(a){var n;const o=L.get(e)||new Set;o.add(a),L.set(e,o);const r=()=>d(a);return(n=t==null?void 0:t.cleanups)==null||n.push(r),r}function v(a){function n(...o){d(n),a(...o)}return u(n)}function d(a){const n=L.get(e);n&&(n.delete(a),n.size||i())}function i(){L.delete(e)}function m(a,n){var o;(o=L.get(e))==null||o.forEach(r=>r(a,n))}return{on:u,once:v,off:d,emit:m,reset:i}}function ge(e){return e===!0?{}:e}function Ne(e,t=[],u={}){const v=D(null),d=D(null),i=C("CONNECTING"),m=D(null),a=C(null),n=ne(e),o=C(null);let r=!1,c=0;const{withCredentials:S=!1,immediate:b=!0,autoConnect:y=!0,autoReconnect:h}=u,w=()=>{z&&m.value&&(m.value.close(),m.value=null,i.value="CLOSED",r=!0)},p=()=>{if(r||typeof n.value>"u")return;const s=new EventSource(n.value,{withCredentials:S});i.value="CONNECTING",m.value=s,s.onopen=()=>{i.value="OPEN",a.value=null},s.onerror=g=>{if(i.value="CLOSED",a.value=g,s.readyState===2&&!r&&h){s.close();const{retries:O=-1,delay:M=1e3,onFailed:I}=ge(h);c+=1,typeof O=="number"&&(O<0||c<O)||typeof O=="function"&&O()?setTimeout(p,M):I==null||I()}},s.onmessage=g=>{v.value=null,d.value=g.data,o.value=g.lastEventId};for(const g of t)x(s,g,O=>{v.value=g,d.value=O.data||null},{passive:!0})},l=()=>{z&&(w(),r=!1,c=0,p())};return b&&l(),y&&U(n,l),V(w),{eventSource:m,event:v,data:d,status:i,error:a,open:l,close:w,lastEventId:o}}function Oe(e,t,u={}){const{window:v=W}=u;return ye(e,t,v==null?void 0:v.localStorage,u)}export{Se as a,Ee as b,x as c,k as d,Oe as e,be as f,Ne as g,ce as h,Ce as u};
