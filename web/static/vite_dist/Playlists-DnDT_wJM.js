import{_ as vo}from"./DataTable-D872TXoQ.js";import{d as be,L as Yt,h as me,o as y,u as i,w as T,e as u,m as Re,g as v,v as Be,t as h,i as Y,U as Lo,b as M,x as Nt,f as ee,s as tt,F as oe,j as ae,c as jo,K as Ge,W as Xt,y as Wo,p as Vo,q as go,a3 as zo,r as se,E as je,a as Go}from"./vue-B-dHMJBO.js";import{_ as ge,u as Jo}from"./index-YC60PMYr.js";import{_ as Pe}from"./FormGroupCheckbox-DiVpfNN7.js";import{_ as lt}from"./FormFieldset-CSY1jkmB.js";import{l as Rt}from"./lodash-Bdl6ys83.js";import{_ as Ae}from"./FormGroupMultiCheck-BXD8Vj_5.js";import{_ as Zo}from"./FormGroupSelect-CJm0Mvj_.js";import{u as Se,a as Ko,f as Ne,d as Le,j as Qo,l as en}from"./usePlayerStore-BJXDzq-w.js";import{u as bo}from"./useVuelidateOnFormTab-OK0Di3KA.js";import{r as mt}from"./index-CSh-MSYs.js";import{_ as wt,a as _o}from"./Tab-BUAj4Txt.js";import{_ as Ie,a5 as tn,x as on,a6 as nn,a7 as ln,a8 as an,a9 as rn,aa as sn,ab as dn}from"./icons-Yf7pfv1X.js";import{_ as zt}from"./TimeCode-CYxn4qP2.js";import{_ as qt}from"./FormMarkup-BA315dX5.js";import{_ as yo,a as cn}from"./ScheduleViewTab-CEdjz_CD.js";import{u as un}from"./useBaseEditModal-Ch8hxrey.js";import{_ as wo}from"./ModalForm-Z02aZIGv.js";import{_ as pn}from"./PlayButton-Brbz4iK8.js";import{_ as fn}from"./InlinePlayer-B6VJrexO.js";import{_ as kt,u as St}from"./useHasModal-BalH1zuK.js";import{I as mn}from"./InvisibleSubmitButton-DW6QYji6.js";import{_ as hn}from"./FormGroup-DZPf8gKm.js";import{_ as vn}from"./FormFile-nZ9a7fD4.js";import{u as ko,a as gn}from"./useVuelidateOnForm-BgH7FQU3.js";import{_ as bn,u as _n}from"./AddButton-mzslCaiE.js";import{u as yn}from"./assets/frontend/js/pages/Stations-ClDpmz3n.js";import{u as Gt}from"./useConfirmAndDelete-DDlE-STy.js";import{u as wn}from"./luxon-Cw61P3gq.js";import{g as Jt}from"./router-wzMi1FLb.js";import{u as kn}from"./useHasDatatable-DPFcIMM0.js";import"./FormMultiCheck-C8kU6V99.js";import"./FormCheckbox-CBrIHDuX.js";import"./useOptionalStorage-CjmLv0hJ.js";import"./index-Cwv7sFxi.js";import"./useFormField-DTxYJN5U.js";import"./lodash-BwctMegf.js";import"./useSlotsExcept-ZKe4NxAj.js";import"./bootstrap.esm-BZy605kZ.js";import"./ScheduleView-CNkyIV7v.js";import"./datetime-BTmRqpun.js";import"./mergeExisting-D7dGFTzO.js";import"./useShowVolume-aywU-oMl.js";import"./hlsjs-Cx0E5yqS.js";import"./formatTime-DvDPwXf4.js";import"./MuteButton-DqH7ZJD-.js";import"./Loading-B4WK-6A0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./router-DA15hoP2.js";import"./PanelLayout-BXXqPnEo.js";import"./populateComponentRemotely-s4ApEVi1.js";import"./acl-VuRcXUu_.js";import"./useStationDateTimeFormatter-nKrxjiBK.js";import"./Lightbox-CyVEhnVk.js";import"./HeaderInlinePlayer-DvP0QD5g.js";import"./lightbox-BJHiTgc7.js";import"./useDialog-o3Jra7al.js";const Sn={class:"row g-3 mb-3"},xn={class:"card mb-3",role:"region"},$n={class:"card-header text-bg-primary"},Cn={class:"card-title"},Dn={class:"card-body"},En={class:"row g-3 mb-3"},Tn={href:"/docs/user-guide/playlists/#advanced-playlists",target:"_blank"},Mn={class:"row g-3"},On={class:"row g-3"},Pn={class:"row g-3"},An={class:"row g-3"},In={class:"card mb-3",role:"region"},Nn={class:"card-header text-bg-primary"},Rn={class:"card-title"},Bn={class:"card-body"},Fn={class:"row g-3"},Un=be({__name:"BasicInfo",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const o=Yt(e,"form"),{v$:t,tabClass:l}=bo(o,{name:{required:mt},is_enabled:{},include_in_on_demand:{},weight:{},type:{},source:{},order:{},remote_url:{},remote_type:{},remote_buffer:{},is_jingle:{},play_per_songs:{},play_per_minutes:{},play_per_hour_minute:{},include_in_requests:{},avoid_duplicates:{}},{name:"",is_enabled:!0,include_in_on_demand:!1,weight:3,type:"default",source:"songs",order:"shuffle",remote_url:null,remote_type:"stream",remote_buffer:0,is_jingle:!1,play_per_songs:0,play_per_minutes:0,play_per_hour_minute:0,include_in_requests:!0,avoid_duplicates:!0}),{$gettext:n}=Se(),a=[{value:"songs",text:n("Song-Based"),description:n("A playlist containing media files hosted on this server.")},{value:"remote_url",text:n("Remote URL"),description:n("A playlist that instructs the station to play from a remote URL.")}],r=[{value:"default",text:n("General Rotation"),description:n("Standard playlist, shuffles with other standard playlists based on weight.")},{value:"once_per_x_songs",text:n("Once per x Songs"),description:n("Play once every $x songs.")},{value:"once_per_x_minutes",text:n("Once per x Minutes"),description:n("Play once every $x minutes.")},{value:"once_per_hour",text:n("Once per Hour"),description:n("Play once per hour at the specified minute.")},{value:"custom",text:n("Advanced"),description:n("Manually define how this playlist is used in Liquidsoap configuration.")}],d=[{value:"shuffle",text:n("Shuffled"),description:n("The full playlist is shuffled and then played through in the shuffled order.")},{value:"random",text:n("Random"),description:n("A completely random track is picked for playback every time the queue is populated.")},{value:"sequential",text:n("Sequential"),description:n("The order of the playlist is manually specified and followed by the AutoDJ.")}],s=[{value:"stream",text:n("Icecast/Shoutcast Stream URL")},{value:"playlist",text:n("Playlist (M3U/PLS) URL")},{value:"other",text:n("Other Remote URL (File, HLS, etc.)")}],f=Rt.map(Rt.range(1,26),p=>({value:p,text:String(p)}));return(p,c)=>(y(),me(wt,{label:i(n)("Basic Info"),"item-header-class":i(l)},{default:T(()=>[u("div",Sn,[v(ge,{id:"form_edit_name",class:"col-md-6",field:i(t).name,label:i(n)("Playlist Name")},null,8,["field","label"]),v(Pe,{id:"form_edit_is_enabled",class:"col-md-6",field:i(t).is_enabled,label:i(n)("Enable"),description:i(n)("If disabled, the playlist will not be included in radio playback, but can still be managed.")},null,8,["field","label","description"]),v(Ae,{id:"edit_form_source",class:"col-md-12",field:i(t).source,options:a,stacked:"",radio:"",label:i(n)("Source")},null,8,["field","label"])]),Re(u("section",xn,[u("div",$n,[u("h2",Cn,h(i(n)("Song-Based Playlist")),1)]),u("div",Dn,[u("div",En,[v(Pe,{id:"form_edit_avoid_duplicates",class:"col-md-6",field:i(t).avoid_duplicates,label:i(n)("Avoid Duplicate Artists/Titles"),description:i(n)("Whether the AutoDJ should attempt to avoid duplicate artists and track titles when playing media from this playlist.")},null,8,["field","label","description"]),v(Pe,{id:"form_edit_include_in_on_demand",class:"col-md-6",field:i(t).include_in_on_demand,label:i(n)("Include in On-Demand Player"),description:i(n)("If this station has on-demand streaming and downloading enabled, only songs that are in playlists with this setting enabled will be visible.")},null,8,["field","label","description"]),v(Pe,{id:"form_edit_include_in_requests",class:"col-md-6",field:i(t).include_in_requests,label:i(n)("Allow Requests from This Playlist"),description:i(n)("If requests are enabled for your station, users will be able to request media that is on this playlist.")},null,8,["field","label","description"]),v(Pe,{id:"form_edit_is_jingle",class:"col-md-6",field:i(t).is_jingle,description:i(n)("Enable this setting to prevent metadata from being sent to the AutoDJ for files in this playlist. This is useful if the playlist contains jingles or bumpers.")},{label:T(()=>[Y(h(i(n)('Hide Metadata from Listeners ("Jingle Mode")')),1)]),_:1},8,["field","description"]),v(Ae,{id:"edit_form_type",class:"col-md-6",field:i(t).type,options:r,stacked:"",radio:"",label:i(n)("Playlist Type")},{description:T(()=>[u("a",Tn,h(i(n)("Learn about Advanced Playlists")),1)]),_:1},8,["field","label"]),v(Ae,{id:"edit_form_order",class:"col-md-6",field:i(t).order,options:d,stacked:"",radio:"",label:i(n)("Song Playback Order")},null,8,["field","label"])]),Re(v(lt,null,{label:T(()=>[Y(h(i(n)("General Rotation")),1)]),default:T(()=>[u("div",Mn,[v(Zo,{id:"form_edit_weight",class:"col-md-12",field:i(t).weight,options:i(f),label:i(n)("Playlist Weight"),description:i(n)("Higher weight playlists are played more frequently compared to other lower-weight playlists.")},null,8,["field","options","label","description"])])]),_:1},512),[[Be,o.value.type==="default"]]),Re(v(lt,null,{label:T(()=>[Y(h(i(n)("Once per x Songs")),1)]),default:T(()=>[u("div",On,[v(ge,{id:"form_edit_play_per_songs",class:"col-md-12",field:i(t).play_per_songs,"input-type":"number","input-attrs":{min:"0",max:"150"},label:i(n)("Number of Songs Between Plays"),description:i(n)("This playlist will play every $x songs, where $x is specified here.")},null,8,["field","label","description"])])]),_:1},512),[[Be,o.value.type==="once_per_x_songs"]]),Re(v(lt,null,{label:T(()=>[Y(h(i(n)("Once per x Minutes")),1)]),default:T(()=>[u("div",Pn,[v(ge,{id:"form_edit_play_per_minutes",class:"col-md-12",field:i(t).play_per_minutes,"input-type":"number","input-attrs":{min:"0",max:"360"},label:i(n)("Number of Minutes Between Plays"),description:i(n)("This playlist will play every $x minutes, where $x is specified here.")},null,8,["field","label","description"])])]),_:1},512),[[Be,o.value.type==="once_per_x_minutes"]]),Re(v(lt,null,{label:T(()=>[Y(h(i(n)("Once per Hour")),1)]),default:T(()=>[u("div",An,[v(ge,{id:"form_edit_play_per_hour_minute",class:"col-md-12",field:i(t).play_per_hour_minute,"input-type":"number","input-attrs":{min:"0",max:"59"},label:i(n)("Minute of Hour to Play"),description:i(n)("Specify the minute of every hour that this playlist should play.")},null,8,["field","label","description"])])]),_:1},512),[[Be,o.value.type==="once_per_hour"]])])],512),[[Be,o.value.source==="songs"]]),Re(u("section",In,[u("div",Nn,[u("h2",Rn,h(i(n)("Remote URL Playlist")),1)]),u("div",Bn,[u("div",Fn,[v(ge,{id:"form_edit_remote_url",class:"col-md-6",field:i(t).remote_url,label:i(n)("Remote URL")},null,8,["field","label"]),v(Ae,{id:"edit_form_remote_type",class:"col-md-6",field:i(t).remote_type,options:s,stacked:"",radio:"",label:i(n)("Remote URL Type")},null,8,["field","label"]),v(ge,{id:"form_edit_remote_buffer",class:"col-md-6",field:i(t).remote_buffer,"input-type":"number","input-attrs":{min:0,max:120},label:i(n)("Remote Playback Buffer (Seconds)"),description:i(n)("The length of playback time that Liquidsoap should buffer when playing this remote playlist. Shorter times may lead to intermittent playback on unstable connections.")},null,8,["field","label","description"])])])],512),[[Be,o.value.source==="remote_url"]])]),_:1},8,["label","item-header-class"]))}}),Hn={class:"card mb-3"},Yn={class:"card-header text-bg-primary d-flex align-items-center"},Xn={class:"flex-fill"},qn={class:"card-title"},Ln={class:"flex-shrink-0"},jn={class:"card-body"},Wn={class:"row g-3"},Vn=be({__name:"ScheduleRow",props:{index:{},row:{}},emits:["remove"],setup(e,{emit:o}){const t=e,l=o,n=Jo({start_time:{required:mt},end_time:{required:mt},start_date:{},end_date:{},days:{},loop_once:{}},Lo(t,"row")),{$gettext:a}=Se(),r=[{value:1,text:a("Monday")},{value:2,text:a("Tuesday")},{value:3,text:a("Wednesday")},{value:4,text:a("Thursday")},{value:5,text:a("Friday")},{value:6,text:a("Saturday")},{value:7,text:a("Sunday")}],d=()=>{l("remove")};return(s,f)=>(y(),M("section",Hn,[u("div",Yn,[u("div",Xn,[u("h2",qn,h(i(a)("Scheduled Time #%{num}",{num:s.index+1})),1)]),u("div",Ln,[u("button",{type:"button",class:"btn btn-sm btn-dark",onClick:f[0]||(f[0]=p=>d())},[v(Ie,{icon:i(tn)},null,8,["icon"]),u("span",null,h(i(a)("Remove")),1)])])]),u("div",jn,[u("div",Wn,[v(ge,{id:"edit_form_start_time_"+s.index,class:"col-md-4",field:i(n).start_time,label:i(a)("Start Time"),description:i(a)("To play once per day, set the start and end times to the same value.")},{default:T(({id:p,model:c,fieldClass:b})=>[v(zt,{id:p,modelValue:c.$model,"onUpdate:modelValue":g=>c.$model=g,class:Nt(b)},null,8,["id","modelValue","onUpdate:modelValue","class"])]),_:1},8,["id","field","label","description"]),v(ge,{id:"edit_form_end_time_"+s.index,class:"col-md-4",field:i(n).end_time,label:i(a)("End Time"),description:i(a)("If the end time is before the start time, the playlist will play overnight.")},{default:T(({id:p,model:c,fieldClass:b})=>[v(zt,{id:p,modelValue:c.$model,"onUpdate:modelValue":g=>c.$model=g,class:Nt(b)},null,8,["id","modelValue","onUpdate:modelValue","class"])]),_:1},8,["id","field","label","description"]),v(qt,{id:"station_time_zone",class:"col-md-4",label:i(a)("Station Time Zone")},{default:T(()=>[v(yo)]),_:1},8,["label"]),v(ge,{id:"edit_form_start_date_"+s.index,class:"col-md-4",field:i(n).start_date,"input-type":"date",label:i(a)("Start Date"),description:i(a)("To set this schedule to run only within a certain date range, specify a start and end date.")},null,8,["id","field","label","description"]),v(ge,{id:"edit_form_end_date_"+s.index,class:"col-md-4",field:i(n).end_date,"input-type":"date",label:i(a)("End Date")},null,8,["id","field","label"]),v(Pe,{id:"edit_form_loop_once_"+s.index,class:"col-md-4",field:i(n).loop_once,label:i(a)("Loop Once"),description:i(a)("Only loop through playlist once.")},null,8,["id","field","label","description"]),v(Ae,{id:"edit_form_days_"+s.index,class:"col-md-4",field:i(n).days,label:i(a)("Scheduled Play Days of Week"),description:i(a)("Leave blank to play on every day of the week."),options:r,stacked:""},null,8,["id","field","label","description"])])])]))}}),zn={class:"buttons"},Gn=be({__name:"Schedule",props:{scheduleItems:{default:()=>[]},scheduleItemsModifiers:{}},emits:["update:scheduleItems"],setup(e){const o=Yt(e,"scheduleItems"),t=()=>{o.value.push({start_time:null,end_time:null,start_date:null,end_date:null,days:[],loop_once:!1})},l=n=>{o.value.splice(n,1)};return(n,a)=>(y(),me(wt,{label:n.$gettext("Schedule")},{default:T(()=>[o.value.length===0?(y(),me(qt,{key:0,id:"no_scheduled_entries"},{label:T(()=>[Y(h(n.$gettext("Not Scheduled")),1)]),default:T(()=>[u("p",null,h(n.$gettext("This playlist currently has no scheduled times. It will play at all times. To add a new scheduled time, click the button below.")),1)]),_:1})):ee("",!0),(y(!0),M(oe,null,tt(o.value,(r,d)=>(y(),me(Vn,{key:d,row:o.value[d],"onUpdate:row":s=>o.value[d]=s,index:d,onRemove:s=>l(d)},null,8,["row","onUpdate:row","index","onRemove"]))),128)),u("div",zn,[u("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t},[v(Ie,{icon:i(on)},null,8,["icon"]),u("span",null,h(n.$gettext("Add Schedule Item")),1)])])]),_:1},8,["label"]))}}),Jn={class:"row g-3"},Zn=be({__name:"Advanced",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const o=Yt(e,"form"),{v$:t,tabClass:l}=bo(o,{backend_options:{}},{backend_options:[]}),{$gettext:n}=Se(),a=[{value:"interrupt",text:n("Interrupt other songs to play at scheduled time.")},{value:"single_track",text:n("Only play one track at scheduled time.")},{value:"merge",text:n("Merge playlist to play as a single track.")}];return(r,d)=>(y(),me(wt,{label:i(n)("Advanced"),"item-header-class":i(l)},{default:T(()=>[u("div",Jn,[v(Ae,{id:"edit_form_backend_options",class:"col-md-12",field:i(t).backend_options,options:a,stacked:"",label:i(n)("Advanced Manual AutoDJ Scheduling Options"),description:i(n)("Control how this playlist is handled by the AutoDJ software.")},null,8,["field","label","description"])])]),_:1},8,["label","item-header-class"]))}}),Kn=be({__name:"EditModal",props:{createUrl:{}},emits:["relist","needs-restart"],setup(e,{expose:o,emit:t}){const l=e,n=t,{enableAdvancedFeatures:a}=Ko(),r=ae("$modal"),{notifySuccess:d}=Ne(),{loading:s,error:f,isEditMode:p,form:c,v$:b,clearContents:g,create:P,edit:x,doSubmit:N,close:R}=un(l,n,r,{schedule_items:{}},{schedule_items:[]},{onSubmitSuccess:()=>{d(),n("relist"),n("needs-restart"),R()}}),{$gettext:O}=Se(),A=jo(()=>p.value?O("Edit Playlist"):O("Add Playlist"));return o({create:P,edit:x,close:R}),(E,$)=>(y(),me(wo,{ref_key:"$modal",ref:r,loading:i(s),title:A.value,error:i(f),"disable-save-button":i(b).$invalid,onSubmit:i(N),onHidden:i(g)},{default:T(()=>[v(_o,null,{default:T(()=>[v(Un,{form:i(c),"onUpdate:form":$[0]||($[0]=H=>Ge(c)?c.value=H:null)},null,8,["form"]),v(Gn,{"schedule-items":i(c).schedule_items,"onUpdate:scheduleItems":$[1]||($[1]=H=>i(c).schedule_items=H)},null,8,["schedule-items"]),i(a)?(y(),me(Zn,{key:0,form:i(c),"onUpdate:form":$[2]||($[2]=H=>Ge(c)?c.value=H:null)},null,8,["form"])):ee("",!0)]),_:1})]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}});var Qn=Object.defineProperty,ht=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,Zt=(e,o,t)=>o in e?Qn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,$o=(e,o)=>{for(var t in o||(o={}))So.call(o,t)&&Zt(e,t,o[t]);if(ht)for(var t of ht(o))xo.call(o,t)&&Zt(e,t,o[t]);return e},el=(e,o)=>{var t={};for(var l in e)So.call(e,l)&&o.indexOf(l)<0&&(t[l]=e[l]);if(e!=null&&ht)for(var l of ht(e))o.indexOf(l)<0&&xo.call(e,l)&&(t[l]=e[l]);return t};const Co="[vue-draggable-plus]: ";function tl(e){console.warn(Co+e)}function ol(e){console.error(Co+e)}function Kt(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function Qt(e,o){return Array.isArray(e)&&e.splice(o,1),e}function eo(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function nl(e){return typeof e>"u"}function ll(e){return typeof e=="string"}function to(e,o,t){const l=e.children[t];e.insertBefore(o,l)}function $t(e){e.parentNode&&e.parentNode.removeChild(e)}function al(e,o=document){var t;let l=null;return typeof(o==null?void 0:o.querySelector)=="function"?l=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):l=document.querySelector(e),l||tl(`Element not found: ${e}`),l}function il(e,o,t=null){return function(...l){return e.apply(t,l),o.apply(t,l)}}function rl(e,o){const t=$o({},e);return Object.keys(o).forEach(l=>{t[l]?t[l]=il(e[l],o[l]):t[l]=o[l]}),t}function sl(e){return e instanceof HTMLElement}function oo(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function dl(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const cl=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function no(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);o&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,l)}return t}function ye(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?no(Object(t),!0).forEach(function(l){ul(e,l,t[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):no(Object(t)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))})}return e}function dt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(o){return typeof o}:dt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},dt(e)}function ul(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function ke(){return ke=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},ke.apply(this,arguments)}function pl(e,o){if(e==null)return{};var t={},l=Object.keys(e),n,a;for(a=0;a<l.length;a++)n=l[a],!(o.indexOf(n)>=0)&&(t[n]=e[n]);return t}function fl(e,o){if(e==null)return{};var t=pl(e,o),l,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)l=a[n],!(o.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(t[l]=e[l])}return t}var ml="1.15.2";function we(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var xe=we(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ot=we(/Edge/i),lo=we(/firefox/i),Je=we(/safari/i)&&!we(/chrome/i)&&!we(/android/i),Do=we(/iP(ad|od|hone)/i),Eo=we(/chrome/i)&&we(/android/i),To={capture:!1,passive:!1};function B(e,o,t){e.addEventListener(o,t,!xe&&To)}function I(e,o,t){e.removeEventListener(o,t,!xe&&To)}function vt(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function hl(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ve(e,o,t,l){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&vt(e,o):vt(e,o))||l&&e===t)return e;if(e===t)break}while(e=hl(e))}return null}var ao=/\s+/g;function ce(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var l=(" "+e.className+" ").replace(ao," ").replace(" "+o+" "," ");e.className=(l+(t?" "+o:"")).replace(ao," ")}}function k(e,o,t){var l=e&&e.style;if(l){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in l)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),l[o]=t+(typeof t=="string"?"":"px")}}function Xe(e,o){var t="";if(typeof e=="string")t=e;else do{var l=k(e,"transform");l&&l!=="none"&&(t=l+" "+t)}while(!o&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function Mo(e,o,t){if(e){var l=e.getElementsByTagName(o),n=0,a=l.length;if(t)for(;n<a;n++)t(l[n],n);return l}return[]}function _e(){var e=document.scrollingElement;return e||document.documentElement}function Q(e,o,t,l,n){if(!(!e.getBoundingClientRect&&e!==window)){var a,r,d,s,f,p,c;if(e!==window&&e.parentNode&&e!==_e()?(a=e.getBoundingClientRect(),r=a.top,d=a.left,s=a.bottom,f=a.right,p=a.height,c=a.width):(r=0,d=0,s=window.innerHeight,f=window.innerWidth,p=window.innerHeight,c=window.innerWidth),(o||t)&&e!==window&&(n=n||e.parentNode,!xe))do if(n&&n.getBoundingClientRect&&(k(n,"transform")!=="none"||t&&k(n,"position")!=="static")){var b=n.getBoundingClientRect();r-=b.top+parseInt(k(n,"border-top-width")),d-=b.left+parseInt(k(n,"border-left-width")),s=r+a.height,f=d+a.width;break}while(n=n.parentNode);if(l&&e!==window){var g=Xe(n||e),P=g&&g.a,x=g&&g.d;g&&(r/=x,d/=P,c/=P,p/=x,s=r+p,f=d+c)}return{top:r,left:d,bottom:s,right:f,width:c,height:p}}}function io(e,o,t){for(var l=De(e,!0),n=Q(e)[o];l;){var a=Q(l)[t],r=void 0;if(r=n>=a,!r)return l;if(l===_e())break;l=De(l,!1)}return!1}function qe(e,o,t,l){for(var n=0,a=0,r=e.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==S.ghost&&(l||r[a]!==S.dragged)&&ve(r[a],t.draggable,e,!1)){if(n===o)return r[a];n++}a++}return null}function Lt(e,o){for(var t=e.lastElementChild;t&&(t===S.ghost||k(t,"display")==="none"||o&&!vt(t,o));)t=t.previousElementSibling;return t||null}function fe(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==S.clone&&(!o||vt(e,o))&&t++;return t}function ro(e){var o=0,t=0,l=_e();if(e)do{var n=Xe(e),a=n.a,r=n.d;o+=e.scrollLeft*a,t+=e.scrollTop*r}while(e!==l&&(e=e.parentNode));return[o,t]}function vl(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var l in o)if(o.hasOwnProperty(l)&&o[l]===e[t][l])return Number(t)}return-1}function De(e,o){if(!e||!e.getBoundingClientRect)return _e();var t=e,l=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=k(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return _e();if(l||o)return t;l=!0}}while(t=t.parentNode);return _e()}function gl(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function Ct(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var Ze;function Oo(e,o){return function(){if(!Ze){var t=arguments,l=this;t.length===1?e.call(l,t[0]):e.apply(l,t),Ze=setTimeout(function(){Ze=void 0},o)}}}function bl(){clearTimeout(Ze),Ze=void 0}function Po(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function Ao(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Io(e,o,t){var l={};return Array.from(e.children).forEach(function(n){var a,r,d,s;if(!(!ve(n,o.draggable,e,!1)||n.animated||n===t)){var f=Q(n);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,f.left),l.top=Math.min((r=l.top)!==null&&r!==void 0?r:1/0,f.top),l.right=Math.max((d=l.right)!==null&&d!==void 0?d:-1/0,f.right),l.bottom=Math.max((s=l.bottom)!==null&&s!==void 0?s:-1/0,f.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var pe="Sortable"+new Date().getTime();function _l(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(l){if(!(k(l,"display")==="none"||l===S.ghost)){e.push({target:l,rect:Q(l)});var n=ye({},e[e.length-1].rect);if(l.thisAnimationDuration){var a=Xe(l,!0);a&&(n.top-=a.f,n.left-=a.e)}l.fromRect=n}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(vl(e,{target:t}),1)},animateAll:function(t){var l=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var n=!1,a=0;e.forEach(function(r){var d=0,s=r.target,f=s.fromRect,p=Q(s),c=s.prevFromRect,b=s.prevToRect,g=r.rect,P=Xe(s,!0);P&&(p.top-=P.f,p.left-=P.e),s.toRect=p,s.thisAnimationDuration&&Ct(c,p)&&!Ct(f,p)&&(g.top-p.top)/(g.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(d=wl(g,c,b,l.options)),Ct(p,f)||(s.prevFromRect=f,s.prevToRect=p,d||(d=l.options.animation),l.animate(s,g,p,d)),d&&(n=!0,a=Math.max(a,d),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},d),s.thisAnimationDuration=d)}),clearTimeout(o),n?o=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),e=[]},animate:function(t,l,n,a){if(a){k(t,"transition",""),k(t,"transform","");var r=Xe(this.el),d=r&&r.a,s=r&&r.d,f=(l.left-n.left)/(d||1),p=(l.top-n.top)/(s||1);t.animatingX=!!f,t.animatingY=!!p,k(t,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=yl(t),k(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),k(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){k(t,"transition",""),k(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function yl(e){return e.offsetWidth}function wl(e,o,t,l){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*l.animation}var Fe=[],Dt={initializeByDefault:!0},nt={mount:function(e){for(var o in Dt)Dt.hasOwnProperty(o)&&!(o in e)&&(e[o]=Dt[o]);Fe.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Fe.push(e)},pluginEvent:function(e,o,t){var l=this;this.eventCanceled=!1,t.cancel=function(){l.eventCanceled=!0};var n=e+"Global";Fe.forEach(function(a){o[a.pluginName]&&(o[a.pluginName][n]&&o[a.pluginName][n](ye({sortable:o},t)),o.options[a.pluginName]&&o[a.pluginName][e]&&o[a.pluginName][e](ye({sortable:o},t)))})},initializePlugins:function(e,o,t,l){Fe.forEach(function(r){var d=r.pluginName;if(!(!e.options[d]&&!r.initializeByDefault)){var s=new r(e,o,e.options);s.sortable=e,s.options=e.options,e[d]=s,ke(t,s.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var a=this.modifyOption(e,n,e.options[n]);typeof a<"u"&&(e.options[n]=a)}},getEventProperties:function(e,o){var t={};return Fe.forEach(function(l){typeof l.eventProperties=="function"&&ke(t,l.eventProperties.call(o[l.pluginName],e))}),t},modifyOption:function(e,o,t){var l;return Fe.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[o]=="function"&&(l=n.optionListeners[o].call(e[n.pluginName],t))}),l}};function kl(e){var o=e.sortable,t=e.rootEl,l=e.name,n=e.targetEl,a=e.cloneEl,r=e.toEl,d=e.fromEl,s=e.oldIndex,f=e.newIndex,p=e.oldDraggableIndex,c=e.newDraggableIndex,b=e.originalEvent,g=e.putSortable,P=e.extraEventProperties;if(o=o||t&&t[pe],!!o){var x,N=o.options,R="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!xe&&!ot?x=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(l,!0,!0)),x.to=r||t,x.from=d||t,x.item=n||t,x.clone=a,x.oldIndex=s,x.newIndex=f,x.oldDraggableIndex=p,x.newDraggableIndex=c,x.originalEvent=b,x.pullMode=g?g.lastPutMode:void 0;var O=ye(ye({},P),nt.getEventProperties(l,o));for(var A in O)x[A]=O[A];t&&t.dispatchEvent(x),N[R]&&N[R].call(o,x)}}var Sl=["evt"],re=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=t.evt,n=fl(t,Sl);nt.pluginEvent.bind(S)(e,o,ye({dragEl:m,parentEl:V,ghostEl:D,rootEl:q,nextEl:Oe,lastDownEl:ct,cloneEl:W,cloneHidden:Ce,dragStarted:We,putSortable:te,activeSortable:S.active,originalEvent:l,oldIndex:Ye,oldDraggableIndex:Ke,newIndex:ue,newDraggableIndex:$e,hideGhostForTarget:Fo,unhideGhostForTarget:Uo,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(a){le({sortable:o,name:a,originalEvent:l})}},n))};function le(e){kl(ye({putSortable:te,cloneEl:W,targetEl:m,rootEl:q,oldIndex:Ye,oldDraggableIndex:Ke,newIndex:ue,newDraggableIndex:$e},e))}var m,V,D,q,Oe,ct,W,Ce,Ye,ue,Ke,$e,at,te,He=!1,gt=!1,bt=[],Te,he,Et,Tt,so,co,We,Ue,Qe,et=!1,it=!1,ut,ne,Mt=[],Bt=!1,_t=[],xt=typeof document<"u",rt=Do,uo=ot||xe?"cssFloat":"float",xl=xt&&!Eo&&!Do&&"draggable"in document.createElement("div"),No=function(){if(xt){if(xe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ro=function(e,o){var t=k(e),l=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),n=qe(e,0,o),a=qe(e,1,o),r=n&&k(n),d=a&&k(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Q(n).width,f=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Q(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&r.float&&r.float!=="none"){var p=r.float==="left"?"left":"right";return a&&(d.clear==="both"||d.clear===p)?"vertical":"horizontal"}return n&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||s>=l&&t[uo]==="none"||a&&t[uo]==="none"&&s+f>l)?"vertical":"horizontal"},$l=function(e,o,t){var l=t?e.left:e.top,n=t?e.right:e.bottom,a=t?e.width:e.height,r=t?o.left:o.top,d=t?o.right:o.bottom,s=t?o.width:o.height;return l===r||n===d||l+a/2===r+s/2},Cl=function(e,o){var t;return bt.some(function(l){var n=l[pe].options.emptyInsertThreshold;if(!(!n||Lt(l))){var a=Q(l),r=e>=a.left-n&&e<=a.right+n,d=o>=a.top-n&&o<=a.bottom+n;if(r&&d)return t=l}}),t},Bo=function(e){function o(n,a){return function(r,d,s,f){var p=r.options.group.name&&d.options.group.name&&r.options.group.name===d.options.group.name;if(n==null&&(a||p))return!0;if(n==null||n===!1)return!1;if(a&&n==="clone")return n;if(typeof n=="function")return o(n(r,d,s,f),a)(r,d,s,f);var c=(a?r:d).options.group.name;return n===!0||typeof n=="string"&&n===c||n.join&&n.indexOf(c)>-1}}var t={},l=e.group;(!l||dt(l)!="object")&&(l={name:l}),t.name=l.name,t.checkPull=o(l.pull,!0),t.checkPut=o(l.put),t.revertClone=l.revertClone,e.group=t},Fo=function(){!No&&D&&k(D,"display","none")},Uo=function(){!No&&D&&k(D,"display","")};xt&&!Eo&&document.addEventListener("click",function(e){if(gt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),gt=!1,!1},!0);var Me=function(e){if(m){e=e.touches?e.touches[0]:e;var o=Cl(e.clientX,e.clientY);if(o){var t={};for(var l in e)e.hasOwnProperty(l)&&(t[l]=e[l]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[pe]._onDragOver(t)}}},Dl=function(e){m&&m.parentNode[pe]._isOutsideThisEl(e.target)};function S(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=ke({},o),e[pe]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ro(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,r){a.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:S.supportPointer!==!1&&"PointerEvent"in window&&!Je,emptyInsertThreshold:5};nt.initializePlugins(this,e,t);for(var l in t)!(l in o)&&(o[l]=t[l]);Bo(o);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=o.forceFallback?!1:xl,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?B(e,"pointerdown",this._onTapStart):(B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),bt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),ke(this,_l())}S.prototype={constructor:S,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ue=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,l=this.options,n=l.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,f=l.filter;if(Nl(t),!m&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||l.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&Je&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=ve(d,l.draggable,t,!1),!(d&&d.animated)&&ct!==d)){if(Ye=fe(d),Ke=fe(d,l.draggable),typeof f=="function"){if(f.call(this,e,d,this)){le({sortable:o,rootEl:s,name:"filter",targetEl:d,toEl:t,fromEl:t}),re("filter",o,{evt:e}),n&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=ve(s,p.trim(),t,!1),p)return le({sortable:o,rootEl:p,name:"filter",targetEl:d,fromEl:t,toEl:t}),re("filter",o,{evt:e}),!0}),f)){n&&e.cancelable&&e.preventDefault();return}l.handle&&!ve(s,l.handle,t,!1)||this._prepareDragStart(e,r,d)}}},_prepareDragStart:function(e,o,t){var l=this,n=l.el,a=l.options,r=n.ownerDocument,d;if(t&&!m&&t.parentNode===n){var s=Q(t);if(q=n,m=t,V=m.parentNode,Oe=m.nextSibling,ct=t,at=a.group,S.dragged=m,Te={target:m,clientX:(o||e).clientX,clientY:(o||e).clientY},so=Te.clientX-s.left,co=Te.clientY-s.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,m.style["will-change"]="all",d=function(){if(re("delayEnded",l,{evt:e}),S.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!lo&&l.nativeDraggable&&(m.draggable=!0),l._triggerDragStart(e,o),le({sortable:l,name:"choose",originalEvent:e}),ce(m,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Mo(m,f.trim(),Ot)}),B(r,"dragover",Me),B(r,"mousemove",Me),B(r,"touchmove",Me),B(r,"mouseup",l._onDrop),B(r,"touchend",l._onDrop),B(r,"touchcancel",l._onDrop),lo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),re("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(ot||xe))){if(S.eventCanceled){this._onDrop();return}B(r,"mouseup",l._disableDelayedDrag),B(r,"touchend",l._disableDelayedDrag),B(r,"touchcancel",l._disableDelayedDrag),B(r,"mousemove",l._delayedDragTouchMoveHandler),B(r,"touchmove",l._delayedDragTouchMoveHandler),a.supportPointer&&B(r,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(d,a.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Ot(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._disableDelayedDrag),I(e,"touchend",this._disableDelayedDrag),I(e,"touchcancel",this._disableDelayedDrag),I(e,"mousemove",this._delayedDragTouchMoveHandler),I(e,"touchmove",this._delayedDragTouchMoveHandler),I(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):o?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(m,"dragend",this),B(q,"dragstart",this._onDragStart));try{document.selection?pt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(He=!1,q&&m){re("dragStarted",this,{evt:o}),this.nativeDraggable&&B(document,"dragover",Dl);var t=this.options;!e&&ce(m,t.dragClass,!1),ce(m,t.ghostClass,!0),S.active=this,e&&this._appendGhost(),le({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,Fo();for(var e=document.elementFromPoint(he.clientX,he.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY),e!==o);)o=e;if(m.parentNode[pe]._isOutsideThisEl(e),o)do{if(o[pe]){var t=void 0;if(t=o[pe]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Uo()}},_onTouchMove:function(e){if(Te){var o=this.options,t=o.fallbackTolerance,l=o.fallbackOffset,n=e.touches?e.touches[0]:e,a=D&&Xe(D,!0),r=D&&a&&a.a,d=D&&a&&a.d,s=rt&&ne&&ro(ne),f=(n.clientX-Te.clientX+l.x)/(r||1)+(s?s[0]-Mt[0]:0)/(r||1),p=(n.clientY-Te.clientY+l.y)/(d||1)+(s?s[1]-Mt[1]:0)/(d||1);if(!S.active&&!He){if(t&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(D){a?(a.e+=f-(Et||0),a.f+=p-(Tt||0)):a={a:1,b:0,c:0,d:1,e:f,f:p};var c="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");k(D,"webkitTransform",c),k(D,"mozTransform",c),k(D,"msTransform",c),k(D,"transform",c),Et=f,Tt=p,he=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!D){var e=this.options.fallbackOnBody?document.body:q,o=Q(m,!0,rt,!0,e),t=this.options;if(rt){for(ne=e;k(ne,"position")==="static"&&k(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=_e()),o.top+=ne.scrollTop,o.left+=ne.scrollLeft):ne=_e(),Mt=ro(ne)}D=m.cloneNode(!0),ce(D,t.ghostClass,!1),ce(D,t.fallbackClass,!0),ce(D,t.dragClass,!0),k(D,"transition",""),k(D,"transform",""),k(D,"box-sizing","border-box"),k(D,"margin",0),k(D,"top",o.top),k(D,"left",o.left),k(D,"width",o.width),k(D,"height",o.height),k(D,"opacity","0.8"),k(D,"position",rt?"absolute":"fixed"),k(D,"zIndex","100000"),k(D,"pointerEvents","none"),S.ghost=D,e.appendChild(D),k(D,"transform-origin",so/parseInt(D.style.width)*100+"% "+co/parseInt(D.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,l=e.dataTransfer,n=t.options;if(re("dragStart",this,{evt:e}),S.eventCanceled){this._onDrop();return}re("setupClone",this),S.eventCanceled||(W=Ao(m),W.removeAttribute("id"),W.draggable=!1,W.style["will-change"]="",this._hideClone(),ce(W,this.options.chosenClass,!1),S.clone=W),t.cloneId=pt(function(){re("clone",t),!S.eventCanceled&&(t.options.removeCloneOnHide||q.insertBefore(W,m),t._hideClone(),le({sortable:t,name:"clone"}))}),!o&&ce(m,n.dragClass,!0),o?(gt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(I(document,"mouseup",t._onDrop),I(document,"touchend",t._onDrop),I(document,"touchcancel",t._onDrop),l&&(l.effectAllowed="move",n.setData&&n.setData.call(t,l,m)),B(document,"drop",t),k(m,"transform","translateZ(0)")),He=!0,t._dragStartId=pt(t._dragStarted.bind(t,o,e)),B(document,"selectstart",t),We=!0,Je&&k(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,l,n,a,r=this.options,d=r.group,s=S.active,f=at===d,p=r.sort,c=te||s,b,g=this,P=!1;if(Bt)return;function x(F,j){re(F,g,ye({evt:e,isOwner:f,axis:b?"vertical":"horizontal",revert:a,dragRect:l,targetRect:n,canSort:p,fromSortable:c,target:t,completed:R,onMove:function(Ee,w){return st(q,o,m,l,Ee,Q(Ee),e,w)},changed:O},j))}function N(){x("dragOverAnimationCapture"),g.captureAnimationState(),g!==c&&c.captureAnimationState()}function R(F){return x("dragOverCompleted",{insertion:F}),F&&(f?s._hideClone():s._showClone(g),g!==c&&(ce(m,te?te.options.ghostClass:s.options.ghostClass,!1),ce(m,r.ghostClass,!0)),te!==g&&g!==S.active?te=g:g===S.active&&te&&(te=null),c===g&&(g._ignoreWhileAnimating=t),g.animateAll(function(){x("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==c&&(c.animateAll(),c._ignoreWhileAnimating=null)),(t===m&&!m.animated||t===o&&!t.animated)&&(Ue=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(m.parentNode[pe]._isOutsideThisEl(e.target),!F&&Me(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function O(){ue=fe(m),$e=fe(m,r.draggable),le({sortable:g,name:"change",toEl:o,newIndex:ue,newDraggableIndex:$e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=ve(t,r.draggable,o,!0),x("dragOver"),S.eventCanceled)return P;if(m.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||g._ignoreWhileAnimating===t)return R(!1);if(gt=!1,s&&!r.disabled&&(f?p||(a=V!==q):te===this||(this.lastPutMode=at.checkPull(this,s,m,e))&&d.checkPut(this,s,m,e))){if(b=this._getDirection(e,t)==="vertical",l=Q(m),x("dragOverValid"),S.eventCanceled)return P;if(a)return V=q,N(),this._hideClone(),x("revert"),S.eventCanceled||(Oe?q.insertBefore(m,Oe):q.appendChild(m)),R(!0);var A=Lt(o,r.draggable);if(!A||Ol(e,b,this)&&!A.animated){if(A===m)return R(!1);if(A&&o===e.target&&(t=A),t&&(n=Q(t)),st(q,o,m,l,t,n,e,!!t)!==!1)return N(),A&&A.nextSibling?o.insertBefore(m,A.nextSibling):o.appendChild(m),V=o,O(),R(!0)}else if(A&&Ml(e,b,this)){var E=qe(o,0,r,!0);if(E===m)return R(!1);if(t=E,n=Q(t),st(q,o,m,l,t,n,e,!1)!==!1)return N(),o.insertBefore(m,E),V=o,O(),R(!0)}else if(t.parentNode===o){n=Q(t);var $=0,H,J=m.parentNode!==o,_=!$l(m.animated&&m.toRect||l,t.animated&&t.toRect||n,b),C=b?"top":"left",X=io(t,"top","top")||io(m,"top","top"),Z=X?X.scrollTop:void 0;Ue!==t&&(H=n[C],et=!1,it=!_&&r.invertSwap||J),$=Pl(e,t,n,b,_?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,it,Ue===t);var U;if($!==0){var L=fe(m);do L-=$,U=V.children[L];while(U&&(k(U,"display")==="none"||U===D))}if($===0||U===t)return R(!1);Ue=t,Qe=$;var z=t.nextElementSibling,G=!1;G=$===1;var ie=st(q,o,m,l,t,n,e,G);if(ie!==!1)return(ie===1||ie===-1)&&(G=ie===1),Bt=!0,setTimeout(Tl,30),N(),G&&!z?o.appendChild(m):t.parentNode.insertBefore(m,G?z:t),X&&Po(X,0,Z-X.scrollTop),V=m.parentNode,H!==void 0&&!it&&(ut=Math.abs(H-Q(t)[C])),O(),R(!0)}if(o.contains(m))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",Me),I(document,"mousemove",Me),I(document,"touchmove",Me)},_offUpEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._onDrop),I(e,"touchend",this._onDrop),I(e,"pointerup",this._onDrop),I(e,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(ue=fe(m),$e=fe(m,t.draggable),re("drop",this,{evt:e}),V=m&&m.parentNode,ue=fe(m),$e=fe(m,t.draggable),S.eventCanceled){this._nulling();return}He=!1,it=!1,et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ft(this.cloneId),Ft(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Je&&k(document.body,"user-select",""),k(m,"transform",""),e&&(We&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),D&&D.parentNode&&D.parentNode.removeChild(D),(q===V||te&&te.lastPutMode!=="clone")&&W&&W.parentNode&&W.parentNode.removeChild(W),m&&(this.nativeDraggable&&I(m,"dragend",this),Ot(m),m.style["will-change"]="",We&&!He&&ce(m,te?te.options.ghostClass:this.options.ghostClass,!1),ce(m,this.options.chosenClass,!1),le({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:e}),q!==V?(ue>=0&&(le({rootEl:V,name:"add",toEl:V,fromEl:q,originalEvent:e}),le({sortable:this,name:"remove",toEl:V,originalEvent:e}),le({rootEl:V,name:"sort",toEl:V,fromEl:q,originalEvent:e}),le({sortable:this,name:"sort",toEl:V,originalEvent:e})),te&&te.save()):ue!==Ye&&ue>=0&&(le({sortable:this,name:"update",toEl:V,originalEvent:e}),le({sortable:this,name:"sort",toEl:V,originalEvent:e})),S.active&&((ue==null||ue===-1)&&(ue=Ye,$e=Ke),le({sortable:this,name:"end",toEl:V,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),q=m=V=D=Oe=W=ct=Ce=Te=he=We=ue=$e=Ye=Ke=Ue=Qe=te=at=S.dragged=S.ghost=S.clone=S.active=null,_t.forEach(function(e){e.checked=!0}),_t.length=Et=Tt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),El(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,l=0,n=t.length,a=this.options;l<n;l++)o=t[l],ve(o,a.draggable,this.el,!1)&&e.push(o.getAttribute(a.dataIdAttr)||Il(o));return e},sort:function(e,o){var t={},l=this.el;this.toArray().forEach(function(n,a){var r=l.children[a];ve(r,this.options.draggable,l,!1)&&(t[n]=r)},this),o&&this.captureAnimationState(),e.forEach(function(n){t[n]&&(l.removeChild(t[n]),l.appendChild(t[n]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return ve(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var l=nt.modifyOption(this,e,o);typeof l<"u"?t[e]=l:t[e]=o,e==="group"&&Bo(t)},destroy:function(){re("destroy",this);var e=this.el;e[pe]=null,I(e,"mousedown",this._onTapStart),I(e,"touchstart",this._onTapStart),I(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(e,"dragover",this),I(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bt.splice(bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(re("hideClone",this),S.eventCanceled)return;k(W,"display","none"),this.options.removeCloneOnHide&&W.parentNode&&W.parentNode.removeChild(W),Ce=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ce){if(re("showClone",this),S.eventCanceled)return;m.parentNode==q&&!this.options.group.revertClone?q.insertBefore(W,m):Oe?q.insertBefore(W,Oe):q.appendChild(W),this.options.group.revertClone&&this.animate(m,W),k(W,"display",""),Ce=!1}}};function El(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function st(e,o,t,l,n,a,r,d){var s,f=e[pe],p=f.options.onMove,c;return window.CustomEvent&&!xe&&!ot?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=o,s.from=e,s.dragged=t,s.draggedRect=l,s.related=n||o,s.relatedRect=a||Q(o),s.willInsertAfter=d,s.originalEvent=r,e.dispatchEvent(s),p&&(c=p.call(f,s,r)),c}function Ot(e){e.draggable=!1}function Tl(){Bt=!1}function Ml(e,o,t){var l=Q(qe(t.el,0,t.options,!0)),n=Io(t.el,t.options,D),a=10;return o?e.clientX<n.left-a||e.clientY<l.top&&e.clientX<l.right:e.clientY<n.top-a||e.clientY<l.bottom&&e.clientX<l.left}function Ol(e,o,t){var l=Q(Lt(t.el,t.options.draggable)),n=Io(t.el,t.options,D),a=10;return o?e.clientX>n.right+a||e.clientY>l.bottom&&e.clientX>l.left:e.clientY>n.bottom+a||e.clientX>l.right&&e.clientY>l.top}function Pl(e,o,t,l,n,a,r,d){var s=l?e.clientY:e.clientX,f=l?t.height:t.width,p=l?t.top:t.left,c=l?t.bottom:t.right,b=!1;if(!r){if(d&&ut<f*n){if(!et&&(Qe===1?s>p+f*a/2:s<c-f*a/2)&&(et=!0),et)b=!0;else if(Qe===1?s<p+ut:s>c-ut)return-Qe}else if(s>p+f*(1-n)/2&&s<c-f*(1-n)/2)return Al(o)}return b=b||r,b&&(s<p+f*a/2||s>c-f*a/2)?s>p+f/2?1:-1:0}function Al(e){return fe(m)<fe(e)?1:-1}function Il(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,l=0;t--;)l+=o.charCodeAt(t);return l.toString(36)}function Nl(e){_t.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var l=o[t];l.checked&&_t.push(l)}}function pt(e){return setTimeout(e,0)}function Ft(e){return clearTimeout(e)}xt&&B(document,"touchmove",function(e){(S.active||He)&&e.cancelable&&e.preventDefault()});S.utils={on:B,off:I,css:k,find:Mo,is:function(e,o){return!!ve(e,o,e,!1)},extend:gl,throttle:Oo,closest:ve,toggleClass:ce,clone:Ao,index:fe,nextTick:pt,cancelNextTick:Ft,detectDirection:Ro,getChild:qe};S.get=function(e){return e[pe]};S.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(S.utils=ye(ye({},S.utils),l.utils)),nt.mount(l)})};S.create=function(e,o){return new S(e,o)};S.version=ml;var K=[],Ve,Ut,Ht=!1,Pt,At,yt,ze;function Rl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):t.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),po(),ft(),bl()},nulling:function(){yt=Ut=Ve=Ht=ze=Pt=At=null,K.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var l=this,n=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,r=document.elementFromPoint(n,a);if(yt=o,t||this.options.forceAutoScrollFallback||ot||xe||Je){It(o,this.options,r,t);var d=De(r,!0);Ht&&(!ze||n!==Pt||a!==At)&&(ze&&po(),ze=setInterval(function(){var s=De(document.elementFromPoint(n,a),!0);s!==d&&(d=s,ft()),It(o,l.options,s,t)},10),Pt=n,At=a)}else{if(!this.options.bubbleScroll||De(r,!0)===_e()){ft();return}It(o,this.options,De(r,!1),!1)}}},ke(e,{pluginName:"scroll",initializeByDefault:!0})}function ft(){K.forEach(function(e){clearInterval(e.pid)}),K=[]}function po(){clearInterval(ze)}var It=Oo(function(e,o,t,l){if(o.scroll){var n=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,r=o.scrollSensitivity,d=o.scrollSpeed,s=_e(),f=!1,p;Ut!==t&&(Ut=t,ft(),Ve=o.scroll,p=o.scrollFn,Ve===!0&&(Ve=De(t,!0)));var c=0,b=Ve;do{var g=b,P=Q(g),x=P.top,N=P.bottom,R=P.left,O=P.right,A=P.width,E=P.height,$=void 0,H=void 0,J=g.scrollWidth,_=g.scrollHeight,C=k(g),X=g.scrollLeft,Z=g.scrollTop;g===s?($=A<J&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),H=E<_&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):($=A<J&&(C.overflowX==="auto"||C.overflowX==="scroll"),H=E<_&&(C.overflowY==="auto"||C.overflowY==="scroll"));var U=$&&(Math.abs(O-n)<=r&&X+A<J)-(Math.abs(R-n)<=r&&!!X),L=H&&(Math.abs(N-a)<=r&&Z+E<_)-(Math.abs(x-a)<=r&&!!Z);if(!K[c])for(var z=0;z<=c;z++)K[z]||(K[z]={});(K[c].vx!=U||K[c].vy!=L||K[c].el!==g)&&(K[c].el=g,K[c].vx=U,K[c].vy=L,clearInterval(K[c].pid),(U!=0||L!=0)&&(f=!0,K[c].pid=setInterval((function(){l&&this.layer===0&&S.active._onTouchMove(yt);var G=K[this.layer].vy?K[this.layer].vy*d:0,ie=K[this.layer].vx?K[this.layer].vx*d:0;typeof p=="function"&&p.call(S.dragged.parentNode[pe],ie,G,e,yt,K[this.layer].el)!=="continue"||Po(K[this.layer].el,ie,G)}).bind({layer:c}),24))),c++}while(o.bubbleScroll&&b!==s&&(b=De(b,!1)));Ht=f}},30),Ho=function(e){var o=e.originalEvent,t=e.putSortable,l=e.dragEl,n=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(o){var s=t||n;r();var f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,p=document.elementFromPoint(f.clientX,f.clientY);d(),s&&!s.el.contains(p)&&(a("spill"),this.onSpill({dragEl:l,putSortable:t}))}};function jt(){}jt.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var l=qe(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(o,l):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Ho};ke(jt,{pluginName:"revertOnSpill"});function Wt(){}Wt.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,l=t||this.sortable;l.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),l.animateAll()},drop:Ho};ke(Wt,{pluginName:"removeOnSpill"});S.mount(new Rl);S.mount(Wt,jt);function Bl(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Fl(e){Xt()&&zo(e)}function Ul(e){Xt()?Vo(e):go(e)}let Yo=null,Xo=null;function fo(e=null,o=null){Yo=e,Xo=o}function Hl(){return{data:Yo,clonedData:Xo}}const mo=Symbol("cloneElement");function Yl(...e){var o,t;const l=(o=Xt())==null?void 0:o.proxy;let n=null;const a=e[0];let[,r,d]=e;Array.isArray(i(r))||(d=r,r=null);let s=null;const{immediate:f=!0,clone:p=Bl,customUpdate:c}=(t=i(d))!=null?t:{};function b(_){var C;const{from:X,oldIndex:Z,item:U}=_;n=Array.from(X.childNodes);const L=i((C=i(r))==null?void 0:C[Z]),z=p(L);fo(L,z),U[mo]=z}function g(_){const C=_.item[mo];if(!nl(C)){if($t(_.item),Ge(r)){const X=[...i(r)];r.value=eo(X,_.newDraggableIndex,C);return}eo(i(r),_.newDraggableIndex,C)}}function P(_){const{from:C,item:X,oldIndex:Z,oldDraggableIndex:U,pullMode:L,clone:z}=_;if(to(C,X,Z),L==="clone"){$t(z);return}if(Ge(r)){const G=[...i(r)];r.value=Qt(G,U);return}Qt(i(r),U)}function x(_){if(c){c(_);return}const{from:C,item:X,oldIndex:Z,oldDraggableIndex:U,newDraggableIndex:L}=_;if($t(X),to(C,X,Z),Ge(r)){const z=[...i(r)];r.value=Kt(z,U,L);return}Kt(i(r),U,L)}function N(_){const{newIndex:C,oldIndex:X,from:Z,to:U}=_;let L=null;const z=C===X&&Z===U;try{if(z){let G=null;n==null||n.some((ie,F)=>{if(G&&(n==null?void 0:n.length)!==U.childNodes.length)return Z.insertBefore(G,ie.nextSibling),!0;const j=U.childNodes[F];G=U==null?void 0:U.replaceChild(ie,j)})}}catch(G){L=G}finally{n=null}go(()=>{if(fo(),L)throw L})}const R={onUpdate:x,onStart:b,onAdd:g,onRemove:P,onEnd:N};function O(_){const C=i(a);return _||(_=ll(C)?al(C,l==null?void 0:l.$el):C),_&&!sl(_)&&(_=_.$el),_||ol("Root element not found"),_}function A(){var _;const C=(_=i(d))!=null?_:{},{immediate:X,clone:Z}=C,U=el(C,["immediate","clone"]);return oo(U,(L,z)=>{dl(L)&&(U[L]=(G,...ie)=>{const F=Hl();return cl(G,F),z(G,...ie)})}),rl(r===null?{}:R,U)}const E=_=>{_=O(_),s&&$.destroy(),s=new S(_,A())};Wo(()=>d,()=>{s&&oo(A(),(_,C)=>{s==null||s.option(_,C)})},{deep:!0});const $={option:(_,C)=>s==null?void 0:s.option(_,C),destroy:()=>{s==null||s.destroy(),s=null},save:()=>s==null?void 0:s.save(),toArray:()=>s==null?void 0:s.toArray(),closest:(..._)=>s==null?void 0:s.closest(..._)},H=()=>$==null?void 0:$.option("disabled",!0),J=()=>$==null?void 0:$.option("disabled",!1);return Ul(()=>{f&&E()}),Fl($.destroy),$o({start:E,pause:H,resume:J},$)}const Xl=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"];[...Xl.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)];const ql={class:"table table-striped sortable mb-0"},Ll={style:{width:"25%"}},jl={style:{width:"25%"}},Wl={style:{width:"25%"}},Vl={style:{width:"20%"}},zl={class:"pe-2"},Gl={class:"ps-2"},Jl={class:"typography-subheading"},Zl={class:"btn-group btn-group-sm"},Kl=["title","onClick"],Ql=["title","onClick"],ea=["title","onClick"],ta=["title","onClick"],ho=be({__name:"ReorderModal",setup(e,{expose:o}){const t=se(!0),l=se(null),n=ae("$tbody"),a=se([]),r=ae("$modal"),{show:d}=St(r),{axios:s}=Le(),f=E=>{l.value=E,t.value=!0,d(),s.get(E).then($=>{a.value=$.data,t.value=!1})},{notifySuccess:p}=Ne(),{$gettext:c}=Se(),b=()=>{const E={};let $=0;a.value.forEach(H=>{$++,E[H.id]=$}),s.put(l.value,{order:E}).then(()=>{p(c("Playlist order set."))})},g=E=>{const $=a.value.splice(E,1)[0];a.value.splice(E+1,0,$),b()},P=E=>{const $=a.value.splice(E,1)[0];a.value.splice(a.value.length,0,$),b()},x=E=>{const $=a.value.splice(E,1)[0];a.value.splice(E-1,0,$),b()},N=E=>{const $=a.value.splice(E,1)[0];a.value.splice(0,0,$),b()};Qo("reorder");const{stop:R}=en(),O=()=>{Yl(n,a,{onEnd(){b()}})},A=()=>{R()};return o({open:f}),(E,$)=>(y(),me(kt,{id:"reorder_modal",ref_key:"$modal",ref:r,size:"lg",title:i(c)("Reorder Playlist"),busy:t.value,"hide-footer":"",onShown:O,onHidden:A},{default:T(()=>[v(fn,{class:"text-start bg-primary rounded mb-2 p-1"}),u("table",ql,[u("thead",null,[u("tr",null,[$[0]||($[0]=u("th",{style:{width:"5%"}},"   ",-1)),u("th",Ll,h(i(c)("Title")),1),u("th",jl,h(i(c)("Artist")),1),u("th",Wl,h(i(c)("Album")),1),u("th",Vl,h(i(c)("Actions")),1)])]),u("tbody",{ref_key:"$tbody",ref:n},[(y(!0),M(oe,null,tt(a.value,(H,J)=>(y(),M("tr",{key:H.media.id,class:"align-middle"},[u("td",zl,[v(pn,{url:H.media.links.play},null,8,["url"])]),u("td",Gl,[u("span",Jl,h(H.media.title),1)]),u("td",null,h(H.media.artist),1),u("td",null,h(H.media.album),1),u("td",null,[u("div",Zl,[J+1<a.value.length?(y(),M("button",{key:0,type:"button",class:"btn btn-secondary",title:i(c)("Move to Bottom"),onClick:je(_=>P(J),["prevent"])},[v(Ie,{icon:i(nn)},null,8,["icon"])],8,Kl)):ee("",!0),J+1<a.value.length?(y(),M("button",{key:1,type:"button",class:"btn btn-primary",title:i(c)("Move Down"),onClick:je(_=>g(J),["prevent"])},[v(Ie,{icon:i(ln)},null,8,["icon"])],8,Ql)):ee("",!0),J>0?(y(),M("button",{key:2,type:"button",class:"btn btn-primary",title:i(c)("Move Up"),onClick:je(_=>x(J),["prevent"])},[v(Ie,{icon:i(an)},null,8,["icon"])],8,ea)):ee("",!0),J>0?(y(),M("button",{key:3,type:"button",class:"btn btn-secondary",title:i(c)("Move to Top"),onClick:je(_=>N(J),["prevent"])},[v(Ie,{icon:i(rn)},null,8,["icon"])],8,ta)):ee("",!0)])])]))),128))],512)])]),_:1},8,["title","busy"]))}}),oa={key:0},na={class:"card-text"},la={class:"table-responsive",style:{"max-height":"350px","overflow-y":"scroll"}},aa={class:"table table-striped",style:{"max-height":"300px","overflow-y":"scroll"}},ia={class:"p-2"},ra={class:"p-2 text-monospace",style:{"overflow-x":"auto"}},sa={class:"mb-0"},da={key:0,class:"mb-0 text-success"},ca={key:1,class:"mb-0 text-danger"},ua=be({__name:"ImportModal",emits:["relist"],setup(e,{expose:o,emit:t}){const l=t,n=se(null),a=se(null),r=se(!1),d=se(null),s=O=>{a.value=O},f=ae("$modal"),{show:p,hide:c}=St(f),b=O=>{a.value=null,r.value=!1,n.value=O,p()},{notifySuccess:g,notifyError:P}=Ne(),{axios:x}=Le(),N=()=>{const O=new FormData;O.append("playlist_file",a.value),x.post(n.value,O).then(A=>{A.data.success?(d.value=A.data,g(A.data.message)):(P(A.data.message),c())})},R=()=>{l("relist"),d.value=null};return o({open:b}),(O,A)=>(y(),me(kt,{id:"import_modal",ref_key:"$modal",ref:f,title:O.$gettext("Import from PLS/M3U"),size:"lg",onHidden:R},{"modal-footer":T(()=>[u("button",{type:"button",class:"btn btn-secondary",onClick:A[0]||(A[0]=(...E)=>i(c)&&i(c)(...E))},h(O.$gettext("Close")),1),d.value?ee("",!0):(y(),M("button",{key:0,class:"btn btn-primary",type:"submit",onClick:N},h(O.$gettext("Import from PLS/M3U")),1))]),default:T(()=>[d.value?(y(),M("div",oa,[u("p",na,h(d.value.message),1),u("div",la,[u("table",aa,[u("thead",null,[u("tr",null,[u("th",ia,[Y(h(O.$gettext("Original Path")),1),A[1]||(A[1]=u("br",null,null,-1)),Y(" "+h(O.$gettext("Matched")),1)])])]),u("tbody",null,[(y(!0),M(oe,null,tt(d.value.import_results,E=>(y(),M("tr",{key:E.path},[u("td",ra,[u("pre",sa,h(E.path),1),E.match?(y(),M("pre",da,h(E.match),1)):(y(),M("pre",ca,"                                "+h(O.$gettext("No Match"))+`
                            `,1))])]))),128))])])])])):(y(),M("form",{key:1,class:"form",onSubmit:je(N,["prevent"])},[v(hn,{id:"import_modal_playlist_file"},{label:T(()=>[Y(h(O.$gettext("Select PLS/M3U File to Import")),1)]),description:T(()=>[Y(h(O.$gettext("Aplus will scan the uploaded file for matches in this station's music library. Media should already be uploaded before running this step. You can re-run this tool as many times as needed.")),1)]),default:T(({id:E})=>[v(vn,{id:E,onUploaded:s},null,8,["id"])]),_:1}),v(mn)],32))]),_:1},8,["title"]))}}),pa={class:"table table-striped sortable mb-0"},fa={style:{width:"50%"}},ma={style:{width:"50%"}},ha={class:"typography-subheading"},va=be({__name:"QueueModal",setup(e,{expose:o}){const t=se(!0),l=se(null),n=se([]),a=ae("$modal"),{show:r,hide:d}=St(a),{axios:s}=Le(),f=P=>{l.value=P,t.value=!0,s.get(P).then(x=>{n.value=x.data,t.value=!1}),r()},p=()=>{t.value=!1,l.value=null},{notifySuccess:c}=Ne(),{$gettext:b}=Se(),g=()=>{s.delete(l.value).then(()=>{c(b("Playlist queue cleared.")),d()})};return o({open:f}),(P,x)=>(y(),me(kt,{id:"queue_modal",ref_key:"$modal",ref:a,size:"lg",title:i(b)("Playback Queue"),busy:t.value,onHidden:p},{"modal-footer":T(()=>[u("button",{class:"btn btn-secondary",type:"button",onClick:x[0]||(x[0]=(...N)=>i(d)&&i(d)(...N))},h(i(b)("Close")),1),u("button",{class:"btn btn-danger",type:"submit",onClick:g},h(i(b)("Clear Queue")),1)]),default:T(()=>[u("p",null,h(i(b)("This queue contains the remaining tracks in the order they will be queued by the Aplus AutoDJ (if the tracks are eligible to be played).")),1),u("table",pa,[u("thead",null,[u("tr",null,[u("th",fa,h(i(b)("Title")),1),u("th",ma,h(i(b)("Artist")),1)])]),u("tbody",null,[(y(!0),M(oe,null,tt(n.value,N=>(y(),M("tr",{key:N.id,class:"align-middle"},[u("td",null,[u("span",ha,h(N.title),1)]),u("td",null,h(N.artist),1)]))),128))])])]),_:1},8,["title","busy"]))}}),ga={class:"row g-3"},ba=be({__name:"CloneModal",emits:["relist","needs-restart"],setup(e,{expose:o,emit:t}){const l=t,n=se(null),{form:a,v$:r,resetForm:d,ifValid:s}=ko({name:{required:mt},clone:{}},{name:"",clone:[]}),f=()=>{n.value=null,d()},{$gettext:p}=Se(),c=[{value:"media",text:p("Copy associated media and folders.")},{value:"schedule",text:p("Copy scheduled playback times.")}],b=ae("$modal"),g=(R,O)=>{f(),n.value=O,a.value.name=p("%{name} - Copy",{name:R}),b.value.show()},{notifySuccess:P}=Ne(),{axios:x}=Le(),N=()=>{s(()=>{x({method:"POST",url:n.value,data:a.value}).then(()=>{P(),l("needs-restart"),l("relist"),b.value.hide()})})};return o({open:g}),(R,O)=>(y(),me(wo,{id:"clone_modal",ref_key:"$modal",ref:b,title:i(p)("Duplicate Playlist"),"disable-save-button":i(r).$invalid,onSubmit:N,onHidden:f},{default:T(()=>[u("div",ga,[v(ge,{id:"form_edit_name",class:"col-md-12",field:i(r).name,label:i(p)("New Playlist Name")},null,8,["field","label"]),v(Ae,{id:"form_edit_clone",class:"col-md-12",field:i(r).clone,options:c,stacked:"",label:i(p)("Customize Copy")},null,8,["field","label"])])]),_:1},8,["title","disable-save-button"]))}}),_a={class:"row g-3"},ya={class:"col-md-4"},wa={class:"col-md-8"},ka={style:{"max-height":"300px","overflow-y":"scroll"}},Sa=["disabled"],xa=be({__name:"ApplyToModal",emits:["relist"],setup(e,{expose:o,emit:t}){const l=t,n=ae("$modal"),{show:a,hide:r}=St(n),{$gettext:d}=Se(),s=[{key:"name",isRowHeader:!0,label:d("Directory")}],f=se(!0),p=se(null),{record:c,reset:b}=gn({playlist:{id:null,name:""},directories:[]}),g=se([]),P=_=>{g.value=Rt.map(_,"path")},{form:x,v$:N,resetForm:R,ifValid:O}=ko({copyPlaylist:{}},{copyPlaylist:!1}),A=()=>{p.value=null,g.value=[],b(),R()},{axios:E}=Le(),$=_=>{A(),p.value=_,f.value=!0,a(),E.get(_).then(C=>{c.value=C.data,f.value=!1})},{notifySuccess:H}=Ne(),J=()=>{O(()=>{E.put(p.value,{...x.value,directories:g.value}).then(()=>{H(d("Playlist successfully applied to folders."))}).finally(()=>{r(),l("relist")})})};return o({open:$}),(_,C)=>(y(),me(kt,{id:"apply_playlist_to_modal",ref_key:"$modal",ref:n,size:"xl",centered:"",loading:f.value,title:i(d)("Apply Playlist to Folders"),onHidden:A},{"modal-footer":T(()=>[u("button",{type:"button",class:"btn btn-secondary",onClick:C[0]||(C[0]=(...X)=>i(r)&&i(r)(...X))},h(i(d)("Close")),1),u("button",{type:"button",class:"btn btn-primary",disabled:g.value.length===0,onClick:J},h(i(d)("Apply to Folders")),9,Sa)]),default:T(()=>[u("div",_a,[u("div",ya,[v(qt,{id:"apply_to_playlist_name"},{label:T(()=>[Y(h(i(d)("Playlist:")),1)]),default:T(()=>[Y(" "+h(i(c).playlist.name),1)]),_:1})]),u("div",wa,[v(Pe,{id:"form_applyto_copy_playlist",field:i(N).copyPlaylist},{label:T(()=>[Y(h(i(d)("Create New Playlist for Each Folder")),1)]),_:1},8,["field"])])]),u("div",ka,[v(vo,{fields:s,items:i(c).directories,"handle-client-side":"","show-toolbar":!1,selectable:"",onRowSelected:P},null,8,["items"])])]),_:1},8,["loading","title"]))}}),$a={class:"card",role:"region","aria-labelledby":"hdr_playlists"},Ca={class:"card-header text-bg-primary"},Da={class:"row align-items-center"},Ea={class:"col-md-6"},Ta={id:"hdr_playlists",class:"card-title"},Ma={class:"col-md-6 text-end"},Oa={class:"card-body"},Pa={class:"card-body-flush"},Aa={class:"card-body buttons"},Ia={class:"m-0"},Na={class:"badges"},Ra={class:"badge text-bg-secondary"},Ba={key:0,class:"badge text-bg-primary"},Fa={key:1,class:"badge text-bg-info"},Ua={key:2,class:"badge text-bg-info"},Ha={key:3,class:"badge text-bg-info"},Ya={key:4,class:"badge text-bg-danger"},Xa={class:"btn-group btn-group-sm"},qa=["onClick"],La=["onClick"],ja=["onClick"],Wa={class:"buttons",style:{"line-height":"2.5"}},Va=["onClick"],za=["onClick"],Ga=["onClick"],Ja=["onClick"],Za=["onClick"],Ka=["onClick"],Qa=["onClick"],ei=["onClick"],ti=["href"],ar=be({__name:"Playlists",props:{useManualAutoDj:{type:Boolean}},setup(e){const o=e,t=Jt("/playlists"),l=Jt("/playlists/schedule"),{$gettext:n}=Se(),a=[{key:"name",isRowHeader:!0,label:n("Playlist"),sortable:!0},{key:"scheduling",label:n("Scheduling"),sortable:!1},{key:"num_songs",label:n("# Songs"),sortable:!1},{key:"actions",label:n("Actions"),sortable:!1,class:"shrink"}],{Duration:r}=wn(),d=F=>F===0?n("None"):r.fromMillis(F*1e3).rescale().toHuman(),s=ae("$dataTable"),{refresh:f}=kn(s),p=ae("$scheduleTab"),c=()=>{var F;f(),(F=p.value)==null||F.refresh()},b=ae("$editModal"),{doCreate:g,doEdit:P}=_n(b),x=F=>{P(F.extendedProps.edit_url)},N=ae("$reorderModal"),R=F=>{var j;(j=N.value)==null||j.open(F)},O=ae("$queueModal"),A=F=>{var j;(j=O.value)==null||j.open(F)},E=ae("$importModal"),$=F=>{var j;(j=E.value)==null||j.open(F)},H=ae("$cloneModal"),J=(F,j)=>{var Ee;(Ee=H.value)==null||Ee.open(F,j)},_=ae("$applyToModal"),C=F=>{var j;(j=_.value)==null||j.open(F)},{mayNeedRestart:X}=yn(),Z=()=>{o.useManualAutoDj&&X()},{notifySuccess:U}=Ne(),{axios:L}=Le(),z=F=>{L.put(F).then(j=>{Z(),U(j.data.message),c()})},{doDelete:G}=Gt(n("Delete Playlist?"),()=>{c(),Z()}),{doDelete:ie}=Gt(n("Clear all media from playlist?"),()=>{c(),Z()});return(F,j)=>{const Ee=Go("router-link");return y(),M(oe,null,[u("section",$a,[u("div",Ca,[u("div",Da,[u("div",Ea,[u("h2",Ta,h(i(n)("Playlists")),1)]),u("div",Ma,[v(yo)])])]),u("div",Oa,[v(_o,{"content-class":"mt-3","destroy-on-hide":""},{default:T(()=>[v(wt,{id:"all_playlists",label:i(n)("All Playlists")},{default:T(()=>[u("div",Pa,[u("div",Aa,[v(bn,{text:i(n)("Add Playlist"),onClick:i(g)},null,8,["text","onClick"])]),v(vo,{id:"station_playlists",ref_key:"$dataTable",ref:s,paginated:"",fields:a,"api-url":i(t),detailed:""},{"cell(name)":T(w=>[u("h5",Ia,h(w.item.name),1),u("div",Na,[u("span",Ra,[w.item.source==="songs"?(y(),M(oe,{key:0},[Y(h(i(n)("Song-based")),1)],64)):(y(),M(oe,{key:1},[Y(h(i(n)("Remote URL")),1)],64))]),w.item.is_jingle?(y(),M("span",Ba,h(i(n)("Jingle Mode")),1)):ee("",!0),w.item.source==="songs"&&w.item.order==="sequential"?(y(),M("span",Fa,h(i(n)("Sequential")),1)):ee("",!0),w.item.include_in_on_demand?(y(),M("span",Ua,h(i(n)("On-Demand")),1)):ee("",!0),w.item.schedule_items.length>0?(y(),M("span",Ha,h(i(n)("Scheduled")),1)):ee("",!0),w.item.is_enabled?ee("",!0):(y(),M("span",Ya,h(i(n)("Disabled")),1))])]),"cell(scheduling)":T(({item:w})=>[w.is_enabled?w.source!=="songs"?(y(),M(oe,{key:1},[Y(h(i(n)("Remote URL")),1)],64)):w.type==="default"?(y(),M(oe,{key:2},[Y(h(i(n)("General Rotation")),1),j[0]||(j[0]=u("br",null,null,-1)),Y(" "+h(i(n)("Weight"))+": "+h(w.weight),1)],64)):w.type==="once_per_x_songs"?(y(),M(oe,{key:3},[Y(h(i(n)("Once per %{songs} Songs",{songs:w.play_per_songs})),1)],64)):w.type==="once_per_x_minutes"?(y(),M(oe,{key:4},[Y(h(i(n)("Once per %{minutes} Minutes",{minutes:w.play_per_minutes})),1)],64)):w.type==="once_per_hour"?(y(),M(oe,{key:5},[Y(h(i(n)("Once per Hour (at %{minute})",{minute:w.play_per_hour_minute})),1)],64)):(y(),M(oe,{key:6},[Y(h(i(n)("Custom")),1)],64)):(y(),M(oe,{key:0},[Y(h(i(n)("Disabled")),1)],64))]),"cell(num_songs)":T(w=>[w.item.source==="songs"?(y(),M(oe,{key:0},[v(Ee,{to:{name:"stations:files:index",params:{path:"playlist:"+w.item.short_name}}},{default:T(()=>[Y(h(w.item.num_songs),1)]),_:2},1032,["to"]),Y(" ("+h(d(w.item.total_length))+") ",1)],64)):(y(),M(oe,{key:1},[Y("   ")],64))]),"cell(actions)":T(({item:w,isActive:de,toggleDetails:qo})=>[u("div",Xa,[u("button",{type:"button",class:"btn btn-primary",onClick:Vt=>i(P)(w.links.self)},h(i(n)("Edit")),9,qa),u("button",{type:"button",class:"btn btn-danger",onClick:Vt=>i(G)(w.links.self)},h(i(n)("Delete")),9,La),u("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:Vt=>qo()},[v(Ie,{icon:de?i(sn):i(dn)},null,8,["icon"]),Y(" "+h(i(n)("More")),1)],8,ja)])]),detail:T(({item:w})=>[u("div",Wa,[w.links.order?(y(),M("button",{key:0,type:"button",class:"btn btn-sm btn-primary",onClick:de=>R(w.links.order)},h(i(n)("Reorder")),9,Va)):ee("",!0),u("button",{type:"button",class:Nt(["btn btn-sm",w.is_enabled?"btn-warning":"btn-success"]),onClick:de=>z(w.links.toggle)},h(w.is_enabled?i(n)("Disable"):i(n)("Enable")),11,za),w.links.empty?(y(),M("button",{key:1,type:"button",class:"btn btn-sm btn-danger",onClick:de=>i(ie)(w.links.empty)},h(i(n)("Empty")),9,Ga)):ee("",!0),w.links.reshuffle?(y(),M("button",{key:2,type:"button",class:"btn btn-sm btn-secondary",onClick:de=>z(w.links.reshuffle)},h(i(n)("Reshuffle")),9,Ja)):ee("",!0),w.links.import?(y(),M("button",{key:3,type:"button",class:"btn btn-sm btn-secondary",onClick:de=>$(w.links.import)},h(i(n)("Import from PLS/M3U")),9,Za)):ee("",!0),w.links.queue?(y(),M("button",{key:4,type:"button",class:"btn btn-sm btn-secondary",onClick:de=>A(w.links.queue)},h(i(n)("Playback Queue")),9,Ka)):ee("",!0),w.links.applyto?(y(),M("button",{key:5,type:"button",class:"btn btn-sm btn-secondary",onClick:de=>C(w.links.applyto)},h(i(n)("Apply to Folders")),9,Qa)):ee("",!0),u("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:de=>J(w.name,w.links.clone)},h(i(n)("Duplicate")),9,ei),(y(),M(oe,null,tt(["pls","m3u"],de=>u("a",{key:de,class:"btn btn-sm btn-secondary",href:w.links.export[de],target:"_blank"},h(i(n)("Export %{format}",{format:de.toUpperCase()})),9,ti)),64))])]),_:1},8,["api-url"])])]),_:1},8,["label"]),v(cn,{ref_key:"$scheduleTab",ref:p,"schedule-url":i(l),onClick:x},null,8,["schedule-url"])]),_:1})])]),v(Kn,{ref_key:"$editModal",ref:b,"create-url":i(t),onRelist:c,onNeedsRestart:Z},null,8,["create-url"]),v(ho,{ref_key:"$reorderModal",ref:N},null,512),v(va,{ref_key:"$queueModal",ref:O},null,512),v(ho,{ref_key:"$reorderModal",ref:N},null,512),v(ua,{ref_key:"$importModal",ref:E,onRelist:c},null,512),v(ba,{ref_key:"$cloneModal",ref:H,onRelist:c,onNeedsRestart:Z},null,512),v(xa,{ref_key:"$applyToModal",ref:_,onRelist:c},null,512)],64)}}});export{ar as default};
