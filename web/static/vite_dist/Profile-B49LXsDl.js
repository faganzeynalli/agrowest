import{b as Q,f as ft,d as H,u as O}from"./usePlayerStore-B-xb-_xl.js";import{a as Pt}from"./index-n3LP3PHk.js";import{g as bt}from"./router-CcCQPAao.js";import{u as R,S as D}from"./acl-C74L9GZp.js";import{_ as f,j as yt,m as q,K as pt,P as _t,M as Ut,Q as W,R as Tt,e as At,i as Bt,S as Rt,T as gt,J as kt}from"./icons-BVVFRq1s.js";import{_ as I}from"./CardPage-D-r1d3Gj.js";import{d as T,a as V,b as r,o as a,e as t,g as i,f as u,t as s,u as e,w as h,F as x,h as w,y as Y,i as m,j as K,H as $t,z as vt,q as Dt,c as B,x as G,m as mt,A as j,n as St,k as xt}from"./vue-DTJ-1uEH.js";import{_ as Mt}from"./Loading-CxLO-rjm.js";import{_ as F}from"./PlayButton-SDcr0bvY.js";import{B as X,F as L}from"./RadioAdapters-DeTvpZIq.js";import{u as Ct,n as It}from"./useNowPlaying-QRp0WDJI.js";import{a as Et}from"./lightbox-Cb_2lrH-.js";import{r as Lt}from"./index-C5jhSXy3.js";import{_ as ht}from"./index-BzHzio3J.js";import{u as Nt}from"./useVuelidateOnForm-B8-9RmK7.js";import{u as qt,_ as Ft}from"./useHasModal-DsCiwLlO.js";import{I as Ht}from"./InvisibleSubmitButton-CAE8DMRX.js";import{_ as Ot}from"./InfoCard-Db4untlq.js";import{u as Vt}from"./useDialog-B7mv4txH.js";import{l as zt}from"./lodash-Bdl6ys83.js";import{u as jt}from"./useStationDateTimeFormatter-DPYd-LLw.js";import{u as Jt}from"./luxon-DKiUQxiR.js";import{_ as J}from"./CopyToClipboardButton-BMh_A-g6.js";import{_ as wt}from"./RunningBadge-B-PtFy8E.js";import{u as Yt}from"./useOptionalStorage-DbEMDEit.js";import{u as Kt}from"./useAutoRefreshingAsyncState-DwpbneK1.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./formatTime-DvDPwXf4.js";import"./useFormField-D7VfyZIu.js";import"./FormGroup-BNI6R37d.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./datetime-BTmRqpun.js";import"./useRefreshableAsyncState-B6lXOoKU.js";const Qt={class:"outside-card-header d-flex align-items-center"},Wt={class:"flex-fill"},Gt={class:"display-6 m-0"},Xt={key:0,class:"flex-shrink-0 ms-3"},Zt={class:"card-body"},te={class:"card-text"},ee=T({__name:"StationDisabledPanel",setup(k){const{name:o}=Q();return(l,n)=>{const g=V("router-link");return a(),r(x,null,[t("div",Qt,[t("div",Wt,[t("h2",Gt,s(e(o)),1)]),e(R)(e(D).Profile)?(a(),r("div",Xt,[i(g,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:h(()=>[i(f,{icon:e(yt)},null,8,["icon"]),t("span",null,s(l.$gettext("Edit Profile")),1)]),_:1})])):u("",!0)]),i(I,{id:"station-disabled",title:l.$gettext("Station Disabled")},{default:h(()=>[t("div",Zt,[t("p",te,s(l.$gettext("Your station is currently not enabled for broadcasting. You can still manage media, playlists, and other station settings. To re-enable broadcasting, edit your station profile.")),1)])]),_:1},8,["title"])],64)}}}),se={class:"table table-striped table-responsive mb-0"},ne={colspan:"2"},oe={class:"text-end"},ae={class:"pe-1"},le={class:"ps-1"},ie={class:"mb-1"},re=["href"],de={class:"ps-1 text-end"},ce={class:"listeners-total ps-1"},ue={class:"listeners-unique pe-1"},pe={colspan:"2"},_e={class:"text-end"},me={class:"pe-1"},he={class:"ps-1"},fe={class:"mb-1"},be=["href"],ye={class:"ps-1 text-end"},ge={class:"listeners-total ps-1"},ke={class:"listeners-unique pe-1"},$e={colspan:"2"},ve={class:"text-end"},Se={class:"align-middle"},xe={class:"pe-1"},we={class:"ps-1"},Pe=["href"],Ue={class:"ps-1 text-end"},Te={class:"listeners-total ps-1"},Ae=["href"],Be=["href"],Re=T({inheritAttrs:!1,__name:"StreamsPanel",props:{station:{}},setup(k){return(o,l)=>(a(),w(I,{"header-id":"hdr_streams",title:o.$gettext("Streams")},{footer_actions:h(()=>[t("a",{class:"btn btn-link text-primary",href:o.station.playlist_pls_url},[i(f,{icon:e(pt)},null,8,["icon"]),t("span",null,s(o.$gettext("Download PLS")),1)],8,Ae),t("a",{class:"btn btn-link text-primary",href:o.station.playlist_m3u_url},[i(f,{icon:e(pt)},null,8,["icon"]),t("span",null,s(o.$gettext("Download M3U")),1)],8,Be)]),default:h(()=>[t("table",se,[l[2]||(l[2]=t("colgroup",null,[t("col",{style:{width:"2%"}}),t("col",{style:{width:"78%"}}),t("col",{style:{width:"20%"}})],-1)),o.station.mounts.length>0?(a(),r(x,{key:0},[t("thead",null,[t("tr",null,[t("th",ne,s(o.$gettext("Local Streams")),1),t("th",oe,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[(a(!0),r(x,null,Y(o.station.mounts,n=>(a(),r("tr",{key:n.id,class:"align-middle"},[t("td",ae,[i(F,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",le,[t("h6",ie,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,re)]),t("td",de,[i(f,{class:"sm align-middle",icon:e(q)},null,8,["icon"]),t("span",ce,s(n.listeners.total),1),l[0]||(l[0]=t("br",null,null,-1)),t("small",null,[t("span",ue,s(n.listeners.unique),1),m(" "+s(o.$gettext("Unique")),1)])])]))),128))])],64)):u("",!0),o.station.remotes.length>0?(a(),r(x,{key:1},[t("thead",null,[t("tr",null,[t("th",pe,s(o.$gettext("Remote Relays")),1),t("th",_e,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[(a(!0),r(x,null,Y(o.station.remotes,n=>(a(),r("tr",{key:n.id,class:"align-middle"},[t("td",me,[i(F,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",he,[t("h6",fe,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,be)]),t("td",ye,[i(f,{class:"sm align-middle",icon:e(q)},null,8,["icon"]),t("span",ge,s(n.listeners.total),1),l[1]||(l[1]=t("br",null,null,-1)),t("small",null,[t("span",ke,s(n.listeners.unique),1),m(" "+s(o.$gettext("Unique")),1)])])]))),128))])],64)):u("",!0),o.station.hls_enabled?(a(),r(x,{key:2},[t("thead",null,[t("tr",null,[t("th",$e,s(o.$gettext("HTTP Live Streaming (HLS)")),1),t("th",ve,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[t("tr",Se,[t("td",xe,[i(F,{class:"btn-lg",url:o.station.hls_url,"is-stream":"","is-hls":""},null,8,["url"])]),t("td",we,[t("a",{href:o.station.hls_url,target:"_blank"},s(o.station.hls_url),9,Pe)]),t("td",Ue,[i(f,{class:"sm align-middle",icon:e(q)},null,8,["icon"]),t("span",Te,s(o.station.hls_listeners)+" "+s(o.$gettext("Unique")),1)])])])],64)):u("",!0)])]),_:1},8,["title"]))}}),De={class:"outside-card-header d-flex align-items-center"},Me={key:0,class:"flex-shrink-0 me-2"},Ce={class:"flex-fill"},Ie={class:"display-6 m-0"},Ee={key:0,class:"text-muted"},Le={key:1,class:"flex-shrink-0 ms-3"},Ne=T({inheritAttrs:!1,__name:"HeaderPanel",props:{station:{},stationName:{},stationDescription:{},hasStarted:{type:Boolean}},setup(k){return(o,l)=>{const n=V("router-link");return a(),r("div",De,[o.station.listen_url&&o.hasStarted?(a(),r("div",Me,[i(F,{class:"btn-xl",url:o.station.listen_url,"is-stream":""},null,8,["url"])])):u("",!0),t("div",Ce,[t("h2",Ie,[m(s(o.stationName),1),l[0]||(l[0]=t("br",null,null,-1)),o.stationDescription?(a(),r("small",Ee,s(o.stationDescription),1)):u("",!0)])]),e(R)(e(D).Profile)?(a(),r("div",Le,[i(n,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:h(()=>[i(f,{icon:e(yt)},null,8,["icon"]),t("span",null,s(o.$gettext("Edit Profile")),1)]),_:1})])):u("",!0)])}}}),qe={class:"row g-3"},Fe=T({__name:"UpdateMetadataModal",setup(k,{expose:o}){const l=bt("/nowplaying/update"),{form:n,v$:g,resetForm:b,ifValid:d}=Nt({title:{required:Lt},artist:{}},{title:null,artist:null}),v=K("$modal"),{hide:y,show:p}=qt(v),c=()=>{b()},_=K("$field"),S=()=>{Dt(()=>{var M;(M=_.value)==null||M.focus()})},{notifySuccess:N}=ft(),{axios:z}=H(),{$gettext:P}=O(),$=()=>{d(()=>{z.post(l.value,n.value).then(()=>{N(P("Metadata updated."))}).finally(()=>{y()})})};return o({open:p}),(M,U)=>(a(),w(Ft,{id:"update_metadata",ref_key:"$modal",ref:v,centered:"",title:e(P)("Update Metadata"),onHidden:c,onShown:S},{"modal-footer":h(()=>[t("button",{type:"button",class:"btn btn-secondary",onClick:U[0]||(U[0]=(...A)=>e(y)&&e(y)(...A))},s(e(P)("Close")),1),t("button",{type:"button",class:vt(["btn",e(g).$invalid?"btn-danger":"btn-primary"]),onClick:$},s(e(P)("Update Metadata")),3)]),default:h(()=>[i(Ot,null,{default:h(()=>[m(s(e(P)("Use this form to send a manual metadata update. Note that this will override any existing metadata on the stream.")),1)]),_:1}),t("form",{onSubmit:$t($,["prevent"])},[t("div",qe,[i(ht,{id:"update_metadata_title",ref_key:"$field",ref:_,class:"col-12",field:e(g).title,label:e(P)("Title")},null,8,["field","label"]),i(ht,{id:"update_metadata_artist",class:"col-12",field:e(g).artist,label:e(P)("Artist")},null,8,["field","label"])]),i(Ht)],32)]),_:1},8,["title"]))}});function C(k,o={}){const{axios:l}=H(),{showAlert:n}=Vt(),{notify:g}=ft();return()=>{n(o).then(b=>{b.value&&l.post(k).then(({data:d})=>{g(d.formatted_message,{variant:d.success?"success":"warning"})})})}}const He={class:"d-flex align-items-center"},Oe=["id"],Ve={class:"card-subtitle text-end flex-fill my-0",style:{"line-height":"1"}},ze={class:"ps-1"},je={class:"pe-1"},Je={class:"card-body"},Ye={class:"row"},Ke={class:"col-md-6"},Qe={class:"clearfix"},We={class:"d-table"},Ge={class:"d-table-row"},Xe={class:"d-table-cell align-middle text-end pe-2 pb-2"},Ze={class:"d-table-cell align-middle w-100 pb-2"},ts={class:"m-0"},es={class:"d-table-row"},ss={class:"d-table-cell align-top text-end pe-2"},ns=["href"],os=["src"],as={class:"d-table-cell align-middle w-100"},ls={key:0},is={class:"media-heading m-0 text-muted"},rs={key:1},ds={class:"media-heading m-0",style:{"line-height":"1.2"}},cs={class:"text-muted"},us={key:2},ps={class:"media-heading m-0",style:{"line-height":"1.2"}},_s={key:3},ms={class:"text-muted"},hs={key:4,class:"nowplaying-progress"},fs={class:"col-md-6"},bs={key:0,class:"clearfix"},ys={class:"d-table"},gs={class:"d-table-row"},ks={class:"d-table-cell align-middle pe-2 text-end pb-2"},$s={class:"d-table-cell align-middle w-100 pb-2"},vs={class:"m-0"},Ss={class:"d-table-row"},xs={class:"d-table-cell align-top text-end pe-2"},ws=["href"],Ps=["src"],Us={class:"d-table-cell align-middle w-100"},Ts={key:0},As={class:"media-heading m-0",style:{"line-height":"1"}},Bs={class:"text-muted"},Rs={key:1},Ds={class:"media-heading m-0",style:{"line-height":"1"}},Ms={key:2},Cs={class:"text-muted"},Is={key:1,class:"clearfix"},Es={style:{"margin-left":"22px"}},Ls={class:"media-heading",style:{"margin-left":"22px"}},Ns=T({inheritAttrs:!1,__name:"NowPlayingPanel",props:{backendType:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean}},setup(k){const o=k,{offlineText:l}=Q(),{np:n,currentTrackDurationDisplay:g,currentTrackElapsedDisplay:b}=Ct(o),{$gettext:d,$ngettext:v}=O(),y=B(()=>{var P,$,M,U;return v("%{listeners} Listener","%{listeners} Listeners",(($=(P=n.value)==null?void 0:P.listeners)==null?void 0:$.total)??0,{listeners:String(((U=(M=n.value)==null?void 0:M.listeners)==null?void 0:U.total)??0)})}),p=B(()=>o.backendType===X.Liquidsoap),{vLightbox:c}=Et(),_=C(o.backendSkipSongUri,{title:d("Skip current song?"),confirmButtonText:d("Skip Song")}),S=C(o.backendDisconnectStreamerUri,{title:d("Disconnect current streamer?"),confirmButtonText:d("Disconnect Streamer")}),N=K("$updateMetadataModal"),z=()=>{var P;(P=N.value)==null||P.open()};return(P,$)=>{const M=V("router-link");return a(),r(x,null,[i(I,{id:"profile-nowplaying",class:"nowplaying","header-id":"hdr_now_playing"},G({header:h(({id:U})=>{var A;return[t("div",He,[t("h3",{id:U,class:"flex-shrink card-title my-0"},s(e(d)("On the Air")),9,Oe),t("h6",Ve,[i(f,{class:"align-middle",icon:e(q)},null,8,["icon"]),t("span",ze,s(y.value),1),$[3]||($[3]=t("br",null,null,-1)),t("small",null,[t("span",je,s(((A=e(n).listeners)==null?void 0:A.unique)??0),1),m(" "+s(e(d)("Unique")),1)])]),e(R)(e(D).Reports)?(a(),w(M,{key:0,class:"flex-shrink btn btn-link text-white ms-2 px-1 py-2",to:{name:"stations:reports:listeners"},title:e(d)("Listener Report")},{default:h(()=>[i(f,{icon:e(Bt)},null,8,["icon"])]),_:1},8,["title"])):u("",!0)])]}),default:h(()=>{var U,A,E,Z,tt,et,st,nt,ot,at,lt,it,rt,dt,ct,ut;return[t("div",Je,[t("div",Ye,[t("div",Ke,[t("div",Qe,[t("div",We,[t("div",Ge,[t("div",Xe,[i(f,{icon:e(Tt)},null,8,["icon"])]),t("div",Ze,[t("h5",ts,s(e(d)("Now Playing")),1)])]),t("div",es,[t("div",ss,[(A=(U=e(n).now_playing)==null?void 0:U.song)!=null&&A.art?mt((a(),r("a",{key:0,href:e(n).now_playing.song.art,target:"_blank"},[t("img",{class:"rounded",src:e(n).now_playing.song.art,alt:"Album Art",style:{width:"50px"}},null,8,os)],8,ns)),[[e(c)]]):u("",!0)]),t("div",as,[e(n).is_online?(Z=(E=e(n).now_playing)==null?void 0:E.song)!=null&&Z.title?(a(),r("div",rs,[t("h6",ds,[m(s(e(n).now_playing.song.title),1),$[4]||($[4]=t("br",null,null,-1)),t("small",cs,s(e(n).now_playing.song.artist),1)])])):(a(),r("div",us,[t("h6",ps,s(((et=(tt=e(n).now_playing)==null?void 0:tt.song)==null?void 0:et.text)??""),1)])):(a(),r("div",ls,[t("h5",is,s(e(l)??e(d)("Station Offline")),1)])),(st=e(n).now_playing)!=null&&st.playlist?(a(),r("div",_s,[t("small",ms,s(e(d)("Playlist"))+" : "+s(e(n).now_playing.playlist),1)])):u("",!0),e(b)?(a(),r("div",hs,[t("small",null,s(e(b))+" / "+s(e(g)),1)])):u("",!0)])])])])]),t("div",fs,[!((nt=e(n).live)!=null&&nt.is_live)&&e(n).playing_next?(a(),r("div",bs,[t("div",ys,[t("div",gs,[t("div",ks,[i(f,{icon:e(_t)},null,8,["icon"])]),t("div",$s,[t("h5",vs,s(e(d)("Playing Next")),1)])]),t("div",Ss,[t("div",xs,[(at=(ot=e(n).playing_next)==null?void 0:ot.song)!=null&&at.art?mt((a(),r("a",{key:0,href:e(n).playing_next.song.art,target:"_blank"},[t("img",{src:e(n).playing_next.song.art,class:"rounded",alt:"Album Art",style:{width:"40px"}},null,8,Ps)],8,ws)),[[e(c)]]):u("",!0)]),t("div",Us,[(it=(lt=e(n).playing_next)==null?void 0:lt.song)!=null&&it.title?(a(),r("div",Ts,[t("h6",As,[m(s(e(n).playing_next.song.title),1),$[5]||($[5]=t("br",null,null,-1)),t("small",Bs,s(e(n).playing_next.song.artist),1)])])):(a(),r("div",Rs,[t("h6",Ds,s(((dt=(rt=e(n).playing_next)==null?void 0:rt.song)==null?void 0:dt.text)??""),1)])),e(n).playing_next.playlist?(a(),r("div",Ms,[t("small",Cs,s(e(d)("Playlist"))+" : "+s(e(n).playing_next.playlist),1)])):u("",!0)])])])])):(ct=e(n).live)!=null&&ct.is_live?(a(),r("div",Is,[t("h6",Es,[i(f,{icon:e(At)},null,8,["icon"]),m(" "+s(e(d)("Live")),1)]),t("h4",Ls,s((ut=e(n).live)==null?void 0:ut.streamer_name),1)])):u("",!0)])])])]}),_:2},[p.value&&e(R)(e(D).Broadcasting)?{name:"footer_actions",fn:h(()=>{var U,A;return[(U=e(n).live)!=null&&U.is_live?u("",!0):(a(),r("button",{key:0,id:"btn_skip_song",type:"button",class:"btn btn-link text-primary",onClick:$[0]||($[0]=E=>e(_)())},[i(f,{icon:e(_t)},null,8,["icon"]),t("span",null,s(e(d)("Skip Song")),1)])),(A=e(n).live)!=null&&A.is_live?(a(),r("button",{key:1,id:"btn_disconnect_streamer",type:"button",class:"btn btn-link text-primary",onClick:$[1]||($[1]=E=>e(S)())},[i(f,{icon:e(Ut)},null,8,["icon"]),t("span",null,s(e(d)("Disconnect Streamer")),1)])):u("",!0),t("button",{id:"btn_update_metadata",type:"button",class:"btn btn-link text-secondary",onClick:$[2]||($[2]=E=>z())},[i(f,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(d)("Update Metadata")),1)])]}),key:"0"}:void 0]),1024),p.value&&e(R)(e(D).Broadcasting)?(a(),w(Fe,{key:0,ref_key:"$updateMetadataModal",ref:N},null,512)):u("",!0)],64)}}}),qs={class:"table table-striped mb-0"},Fs={class:"d-flex w-100 justify-content-between align-items-center"},Hs={class:"m-0"},Os={class:"text-end m-0"},Vs=T({inheritAttrs:!1,__name:"SchedulePanel",props:{scheduleItems:{}},setup(k){const o=k,{DateTime:l}=Jt(),{now:n,timestampToDateTime:g,formatDateTime:b}=jt(),d=B(()=>{const v=n();return zt.map(o.scheduleItems,y=>{const p=g(y.start_timestamp),c=g(y.end_timestamp);return y.time_until=p.toRelative(),y.start_formatted=b(p,p.hasSame(v,"day")?l.TIME_SIMPLE:l.DATETIME_MED),y.end_formatted=b(c,c.hasSame(p,"day")?l.TIME_SIMPLE:l.DATETIME_MED),y})});return(v,y)=>d.value.length>0?(a(),w(I,{key:0,class:"scheduled","header-id":"hdr_scheduled",title:v.$gettext("Scheduled")},{default:h(()=>[t("table",qs,[t("tbody",null,[(a(!0),r(x,null,Y(d.value,p=>(a(),r("tr",{key:p.id},[t("td",null,[t("div",Fs,[t("h5",Hs,[t("small",null,[p.type==="playlist"?(a(),r(x,{key:0},[m(s(v.$gettext("Playlist")),1)],64)):(a(),r(x,{key:1},[m(s(v.$gettext("Streamer/DJ")),1)],64))]),y[0]||(y[0]=t("br",null,null,-1)),m(" "+s(p.name),1)]),t("p",Os,[t("small",null,s(p.start_formatted)+" - "+s(p.end_formatted),1),y[1]||(y[1]=t("br",null,null,-1)),t("strong",null,[p.is_now?(a(),r(x,{key:0},[m(s(v.$gettext("Now")),1)],64)):(a(),r(x,{key:1},[m(s(p.time_until),1)],64))])])])])]))),128))])])]),_:1},8,["title"])):u("",!0)}}),zs=["id"],js={class:"table table-striped table-responsive"},Js={class:"align-middle"},Ys=["href"],Ks={class:"px-0"},Qs={class:"text-monospace"},Ws={class:"px-0"},Gs={class:"align-middle"},Xs={class:"ps-0",colspan:"2"},Zs={key:0,class:"form-text"},tn={class:"align-middle"},en={class:"px-0"},sn={class:"text-monospace"},nn={class:"px-0"},on={class:"align-middle"},an={class:"px-0"},ln={class:"text-monospace"},rn={class:"px-0"},dn=T({inheritAttrs:!1,__name:"FrontendPanel",props:{frontendRunning:{type:Boolean},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},hasStarted:{type:Boolean}},setup(k){const o=k,l=Yt("station_show_frontend_credentials",!1),{$gettext:n}=O(),g=B(()=>l.value?n("Hide Credentials"):n("Show Credentials")),b=B(()=>{switch(o.frontendType){case L.Icecast:return"Icecast";case L.Rsas:return"Rocket Streaming Audio Server (RSAS)";case L.Shoutcast:return"Shoutcast";default:return""}}),d=B(()=>o.frontendType===L.Shoutcast),v=C(o.frontendRestartUri,{title:n("Restart service?"),confirmButtonText:n("Restart")}),y=C(o.frontendStartUri,{title:n("Start service?"),confirmButtonText:n("Start"),confirmButtonClass:"btn-success"}),p=C(o.frontendStopUri,{title:n("Stop service?"),confirmButtonText:n("Stop"),confirmButtonClass:"btn-danger"});return(c,_)=>(a(),w(I,{id:"profile-frontend",class:"mb-4","header-id":"hdr_frontend"},G({header:h(({id:S})=>[t("h3",{id:S,class:"card-title"},[m(s(e(n)("Broadcasting Service"))+" ",1),i(wt,{running:c.frontendRunning},null,8,["running"]),_[4]||(_[4]=t("br",null,null,-1)),t("small",null,s(b.value),1)],8,zs)]),default:h(()=>[e(R)(e(D).Broadcasting)?(a(),r("div",{key:0,class:vt(["collapse",e(l)?"show":""])},[t("table",js,[t("tbody",null,[t("tr",Js,[t("td",null,[t("a",{href:c.frontendAdminUri,target:"_blank"},s(e(n)("Administration")),9,Ys)]),t("td",Ks,[t("div",null,[m(s(e(n)("Username:"))+" ",1),_[5]||(_[5]=t("span",{class:"text-monospace"},"admin",-1))]),t("div",null,[m(s(e(n)("Password:"))+" ",1),t("span",Qs,s(c.frontendAdminPassword),1)])]),t("td",Ws,[i(J,{text:c.frontendAdminPassword,"hide-text":""},null,8,["text"])])]),t("tr",Gs,[t("td",null,s(e(n)("Port")),1),t("td",Xs,[m(s(c.frontendPort)+" ",1),d.value?(a(),r("div",Zs,s(e(n)("Some clients may require that you enter a port number that is either one above or one below this number.")),1)):u("",!0)])]),t("tr",tn,[t("td",null,s(e(n)("Source")),1),t("td",en,[t("div",null,[m(s(e(n)("Username:"))+" ",1),_[6]||(_[6]=t("span",{class:"text-monospace"},"source",-1))]),t("div",null,[m(s(e(n)("Password:"))+" ",1),t("span",sn,s(c.frontendSourcePassword),1)])]),t("td",nn,[i(J,{text:c.frontendSourcePassword,"hide-text":""},null,8,["text"])])]),t("tr",on,[t("td",null,s(e(n)("Relay")),1),t("td",an,[t("div",null,[m(s(e(n)("Username:"))+" ",1),_[7]||(_[7]=t("span",{class:"text-monospace"},"relay",-1))]),t("div",null,[m(s(e(n)("Password:"))+" ",1),t("span",ln,s(c.frontendRelayPassword),1)])]),t("td",rn,[i(J,{text:c.frontendRelayPassword,"hide-text":""},null,8,["text"])])])])])],2)):u("",!0)]),_:2},[e(R)(e(D).Broadcasting)?{name:"footer_actions",fn:h(()=>[t("a",{class:"btn btn-link text-primary",onClick:_[0]||(_[0]=$t(S=>l.value=!e(l),["prevent"]))},[i(f,{icon:e(Rt)},null,8,["icon"]),t("span",null,s(g.value),1)]),c.hasStarted?(a(),r(x,{key:0},[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:_[1]||(_[1]=(...S)=>e(v)&&e(v)(...S))},[i(f,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(n)("Restart")),1)]),c.frontendRunning?u("",!0):(a(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:_[2]||(_[2]=S=>e(y)())},[i(f,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(n)("Start")),1)])),c.frontendRunning?(a(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:_[3]||(_[3]=S=>e(p)())},[i(f,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(n)("Stop")),1)])):u("",!0)],64)):u("",!0)]),key:"0"}:void 0]),1024))}}),cn={class:"card-body"},un={class:"card-text"},pn=T({__name:"BackendNonePanel",setup(k){return(o,l)=>(a(),w(I,{id:"profile-backend","header-id":"hdr_backend_disabled",title:o.$gettext("AutoDJ Disabled")},{default:h(()=>[t("div",cn,[t("p",un,s(o.$gettext("AutoDJ has been disabled for this station. No music will automatically be played when a source is not live.")),1)])]),_:1},8,["title"]))}}),_n=["id"],mn={class:"card-body"},hn={class:"card-text"},fn={key:0,class:"buttons"},bn=T({inheritAttrs:!1,__name:"BackendPanel",props:{backendRunning:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{}},setup(k){const o=k,{$gettext:l,$ngettext:n}=O(),g=B(()=>{const p=n("%{numSongs} uploaded song","%{numSongs} uploaded songs",o.numSongs,{numSongs:String(o.numSongs)}),c=n("%{numPlaylists} playlist","%{numPlaylists} playlists",o.numPlaylists,{numPlaylists:String(o.numPlaylists)});return l("LiquidSoap is currently shuffling from %{songs} and %{playlists}.",{songs:p,playlists:c})}),b=B(()=>o.backendType===X.Liquidsoap?"Liquidsoap":""),d=C(o.backendRestartUri,{title:l("Restart service?"),confirmButtonText:l("Restart")}),v=C(o.backendStartUri,{title:l("Start service?"),confirmButtonText:l("Start"),confirmButtonClass:"btn-success"}),y=C(o.backendStopUri,{title:l("Stop service?"),confirmButtonText:l("Stop"),confirmButtonClass:"btn-danger"});return(p,c)=>{const _=V("router-link");return a(),w(I,{id:"profile-backend","header-id":"hdr_backend"},G({header:h(({id:S})=>[t("h3",{id:S,class:"card-title"},[m(s(e(l)("AutoDJ Service"))+" ",1),i(wt,{running:p.backendRunning},null,8,["running"]),c[3]||(c[3]=t("br",null,null,-1)),t("small",null,s(b.value),1)],8,_n)]),default:h(()=>[t("div",mn,[t("p",hn,s(g.value),1),e(R)(e(D).Media)?(a(),r("div",fn,[i(_,{class:"btn btn-primary",to:{name:"stations:files:index"}},{default:h(()=>[m(s(e(l)("Music Files")),1)]),_:1}),i(_,{class:"btn btn-primary",to:{name:"stations:playlists:index"}},{default:h(()=>[m(s(e(l)("Playlists")),1)]),_:1})])):u("",!0)])]),_:2},[e(R)(e(D).Broadcasting)&&p.hasStarted?{name:"footer_actions",fn:h(()=>[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:c[0]||(c[0]=S=>e(d)())},[i(f,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(l)("Restart")),1)]),p.backendRunning?u("",!0):(a(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:c[1]||(c[1]=S=>e(v)())},[i(f,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(l)("Start")),1)])),p.backendRunning?(a(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:c[2]||(c[2]=S=>e(y)())},[i(f,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(l)("Stop")),1)])):u("",!0)]),key:"0"}:void 0]),1024)}}}),yn={class:"card-body"},gn={class:"card-text"},kn=T({__name:"NowPlayingNotStartedPanel",setup(k){return(o,l)=>(a(),w(I,{id:"profile-now-playing","header-id":"hdr_now_playing",title:o.$gettext("On the Air")},{default:h(()=>[t("div",yn,[t("p",gn,s(o.$gettext("Information about the current playing track will appear here once your station has started.")),1)])]),_:1},8,["title"]))}}),$n={id:"profile",class:"row row-of-cards"},vn={class:"col-lg-7"},Sn={class:"col-lg-5"},xn=T({__name:"EnabledProfile",props:{profileApiUri:{},stationSupportsRequests:{type:Boolean},stationSupportsStreamers:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},stationName:{},stationDescription:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean},enableRequests:{type:Boolean},enablePublicPage:{type:Boolean},enableStreamers:{type:Boolean},enableOnDemand:{type:Boolean},publicPageUri:{},publicWebDjUri:{},publicOnDemandUri:{},publicPodcastsUri:{},publicScheduleUri:{},publicPageEmbedUri:{},publicOnDemandEmbedUri:{},publicRequestEmbedUri:{},publicHistoryEmbedUri:{},publicScheduleEmbedUri:{},publicPodcastsEmbedUri:{}},setup(k){const o=k,l=B(()=>o.frontendType!==L.Remote),n=B(()=>o.backendType!==X.None),{axiosSilent:g}=H(),{state:b}=Kt(()=>g.get(o.profileApiUri).then(d=>d.data),{station:{...It.station},services:{backend_running:!1,frontend_running:!1,has_started:!1,needs_restart:!1},schedule:[]},{timeout:15e3});return(d,v)=>(a(),r(x,null,[i(Ne,j(o,{station:e(b).station}),null,16,["station"]),t("div",$n,[t("div",vn,[d.hasStarted?(a(),r(x,{key:0},[i(Ns,St(xt(o)),null,16),i(Vs,{"schedule-items":e(b).schedule},null,8,["schedule-items"]),i(Re,{station:e(b).station},null,8,["station"])],64)):(a(),w(kn,{key:1}))]),t("div",Sn,[l.value?(a(),w(dn,j({key:0},o,{"frontend-running":e(b).services.frontend_running}),null,16,["frontend-running"])):u("",!0),n.value?(a(),w(bn,j({key:1},o,{"backend-running":e(b).services.backend_running}),null,16,["backend-running"])):(a(),w(pn,{key:2}))])])],64))}}),ao=T({__name:"Profile",setup(k){const{isEnabled:o}=Q(),{axios:l}=H(),{isLoading:n,state:g}=Pt(async()=>o?await(await l.get(bt("/vue/profile").value)).data:null,null);return(b,d)=>e(o)?(a(),w(Mt,{key:0,loading:e(n),lazy:""},{default:h(()=>[i(xn,St(xt(e(g))),null,16)]),_:1},8,["loading"])):(a(),w(ee,{key:1}))}});export{ao as default};
