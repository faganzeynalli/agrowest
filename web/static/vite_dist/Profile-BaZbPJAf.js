import{b as K,f as ht,d as q,u as F}from"./usePlayerStore-DOYQnJem.js";import{a as Pt}from"./index-C8dGdHzE.js";import{g as ft}from"./router-D6LKHXR-.js";import{u as T,S as R}from"./acl-CXGsZxPD.js";import{_ as y,r as bt,l as yt,C as ut,J as pt,F as Ut,K as W,L as Bt,e as At,i as Tt,M as Rt,N as gt,B as kt}from"./icons-Be1GHOkw.js";import{_ as C}from"./CardPage-BV0W_9Ux.js";import{d as U,a as H,b as l,o as a,e as t,g as r,f as p,t as s,u as e,w as m,F as w,j as S,y as j,h,i as Y,H as $t,z as vt,q as Dt,c as A,x as G,m as _t,A as z,n as St,k as xt,p as Mt}from"./vue-Cts3TEHg.js";import{_ as Ct}from"./Loading-vp9RNwAY.js";import{_ as N}from"./PlayButton-C4c-pHts.js";import{B as Q,F as E}from"./RadioAdapters-DeTvpZIq.js";import{u as It,n as Et}from"./useNowPlaying-BHVxyL4G.js";import{a as Lt}from"./lightbox-CLViexMZ.js";import{r as Nt}from"./index-Hn1RL1dT.js";import{_ as mt}from"./index-phcAyhUG.js";import{u as qt}from"./useVuelidateOnForm-lBv3aMe4.js";import{u as Ft,_ as Ht}from"./useHasModal-CjOCaRaT.js";import{I as Ot}from"./InvisibleSubmitButton-EsMx6l8t.js";import{_ as Vt}from"./InfoCard-C2q1AMp7.js";import{u as zt}from"./useDialog-CyagRW3b.js";import{l as Jt}from"./lodash-Bdl6ys83.js";import{u as jt}from"./useStationDateTimeFormatter-Z5GyH32x.js";import{u as Yt}from"./luxon-CX7nng3G.js";import{_ as J}from"./CopyToClipboardButton-Bj_jC-yo.js";import{_ as wt}from"./RunningBadge-q2daLVHg.js";import{u as Kt}from"./useOptionalStorage-CQEbEUjo.js";import{u as Wt}from"./useAutoRefreshingAsyncState-Bxb9tjy4.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./formatTime-DvDPwXf4.js";import"./useFormField-DVEVG5eH.js";import"./FormGroup-LCbWR38E.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./datetime-BTmRqpun.js";import"./useRefreshableAsyncState-C2K4cdwx.js";const Gt={class:"outside-card-header d-flex align-items-center"},Qt={class:"flex-fill"},Xt={class:"display-6 m-0"},Zt={key:0,class:"flex-shrink-0 ms-3"},te={class:"card-body"},ee={class:"card-text"},se=U({__name:"StationDisabledPanel",setup(g){const{name:o}=K();return(i,n)=>{const b=H("router-link");return a(),l(w,null,[t("div",Gt,[t("div",Qt,[t("h2",Xt,s(e(o)),1)]),e(T)(e(R).Profile)?(a(),l("div",Zt,[r(b,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:m(()=>[r(y,{icon:e(bt)},null,8,["icon"]),t("span",null,s(i.$gettext("Edit Profile")),1)]),_:1})])):p("",!0)]),r(C,{id:"station-disabled",title:i.$gettext("Station Disabled")},{default:m(()=>[t("div",te,[t("p",ee,s(i.$gettext("Your station is currently not enabled for broadcasting. You can still manage media, playlists, and other station settings. To re-enable broadcasting, edit your station profile.")),1)])]),_:1},8,["title"])],64)}}}),ne={class:"table table-striped table-responsive mb-0"},oe={key:0},ae={class:"pe-1"},ie={class:"ps-1"},le={class:"mb-1"},re=["href"],de={colspan:"2"},ce={class:"text-end"},ue={class:"pe-1"},pe={class:"ps-1"},_e={class:"mb-1"},me=["href"],he={colspan:"2"},fe={class:"text-end"},be={class:"align-middle"},ye={class:"pe-1"},ge={class:"ps-1"},ke=["href"],$e={class:"ps-1 text-end"},ve={class:"listeners-total ps-1"},Se=["href"],xe=["href"],we=U({inheritAttrs:!1,__name:"StreamsPanel",props:{station:{}},setup(g){return(o,i)=>(a(),S(C,{"header-id":"hdr_streams",title:o.$gettext("Streams")},{footer_actions:m(()=>[t("a",{class:"btn btn-link text-primary",href:o.station.playlist_pls_url},[r(y,{icon:e(ut)},null,8,["icon"]),t("span",null,s(o.$gettext("Download PLS")),1)],8,Se),t("a",{class:"btn btn-link text-primary",href:o.station.playlist_m3u_url},[r(y,{icon:e(ut)},null,8,["icon"]),t("span",null,s(o.$gettext("Download M3U")),1)],8,xe)]),default:m(()=>[t("table",ne,[i[0]||(i[0]=t("colgroup",null,[t("col",{style:{width:"15%"}}),t("col",{style:{width:"90%"}})],-1)),o.station.mounts.length>0?(a(),l("tbody",oe,[(a(!0),l(w,null,j(o.station.mounts,n=>(a(),l("tr",{key:n.id,class:"align-middle"},[t("td",ae,[r(N,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",ie,[t("h6",le,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,re)])]))),128))])):p("",!0),o.station.remotes.length>0?(a(),l(w,{key:1},[t("thead",null,[t("tr",null,[t("th",de,s(o.$gettext("Remote Relays")),1),t("th",ce,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[(a(!0),l(w,null,j(o.station.remotes,n=>(a(),l("tr",{key:n.id,class:"align-middle"},[t("td",ue,[r(N,{class:"btn-lg",url:n.url,"is-stream":""},null,8,["url"])]),t("td",pe,[t("h6",_e,s(n.name),1),t("a",{href:n.url,target:"_blank"},s(n.url),9,me)])]))),128))])],64)):p("",!0),o.station.hls_enabled?(a(),l(w,{key:2},[t("thead",null,[t("tr",null,[t("th",he,s(o.$gettext("HTTP Live Streaming (HLS)")),1),t("th",fe,s(o.$gettext("Listeners")),1)])]),t("tbody",null,[t("tr",be,[t("td",ye,[r(N,{class:"btn-lg",url:o.station.hls_url,"is-stream":"","is-hls":""},null,8,["url"])]),t("td",ge,[t("a",{href:o.station.hls_url,target:"_blank"},s(o.station.hls_url),9,ke)]),t("td",$e,[r(y,{class:"sm align-middle",icon:e(yt)},null,8,["icon"]),t("span",ve,s(o.station.hls_listeners)+" "+s(o.$gettext("Unique")),1)])])])],64)):p("",!0)])]),_:1},8,["title"]))}}),Pe={class:"outside-card-header d-flex align-items-center"},Ue={key:0,class:"flex-shrink-0 me-2"},Be={class:"flex-fill"},Ae={class:"display-6 m-0"},Te={key:0,class:"text-muted"},Re={key:1,class:"flex-shrink-0 ms-3"},De=U({inheritAttrs:!1,__name:"HeaderPanel",props:{station:{},stationName:{},stationDescription:{},hasStarted:{type:Boolean}},setup(g){return(o,i)=>{const n=H("router-link");return a(),l("div",Pe,[o.station.listen_url&&o.hasStarted?(a(),l("div",Ue,[r(N,{class:"btn-xl",url:o.station.listen_url,"is-stream":""},null,8,["url"])])):p("",!0),t("div",Be,[t("h2",Ae,[h(s(o.stationName),1),i[0]||(i[0]=t("br",null,null,-1)),o.stationDescription?(a(),l("small",Te,s(o.stationDescription),1)):p("",!0)])]),e(T)(e(R).Profile)?(a(),l("div",Re,[r(n,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:m(()=>[r(y,{icon:e(bt)},null,8,["icon"]),t("span",null,s(o.$gettext("Edit Profile")),1)]),_:1})])):p("",!0)])}}}),Me={class:"row g-3"},Ce=U({__name:"UpdateMetadataModal",setup(g,{expose:o}){const i=ft("/nowplaying/update"),{form:n,v$:b,resetForm:f,ifValid:c}=qt({title:{required:Nt},artist:{}},{title:null,artist:null}),$=Y("$modal"),{hide:_,show:d}=Ft($),u=()=>{f()},v=Y("$field"),O=()=>{Dt(()=>{var D;(D=v.value)==null||D.focus()})},{notifySuccess:L}=ht(),{axios:V}=q(),{$gettext:x}=F(),k=()=>{c(()=>{V.post(i.value,n.value).then(()=>{L(x("Metadata updated."))}).finally(()=>{_()})})};return o({open:d}),(D,P)=>(a(),S(Ht,{id:"update_metadata",ref_key:"$modal",ref:$,centered:"",title:e(x)("Update Metadata"),onHidden:u,onShown:O},{"modal-footer":m(()=>[t("button",{type:"button",class:"btn btn-secondary",onClick:P[0]||(P[0]=(...B)=>e(_)&&e(_)(...B))},s(e(x)("Close")),1),t("button",{type:"button",class:vt(["btn",e(b).$invalid?"btn-danger":"btn-primary"]),onClick:k},s(e(x)("Update Metadata")),3)]),default:m(()=>[r(Vt,null,{default:m(()=>[h(s(e(x)("Use this form to send a manual metadata update. Note that this will override any existing metadata on the stream.")),1)]),_:1}),t("form",{onSubmit:$t(k,["prevent"])},[t("div",Me,[r(mt,{id:"update_metadata_title",ref_key:"$field",ref:v,class:"col-12",field:e(b).title,label:e(x)("Title")},null,8,["field","label"]),r(mt,{id:"update_metadata_artist",class:"col-12",field:e(b).artist,label:e(x)("Artist")},null,8,["field","label"])]),r(Ot)],32)]),_:1},8,["title"]))}});function M(g,o={}){const{axios:i}=q(),{showAlert:n}=zt(),{notify:b}=ht();return()=>{n(o).then(f=>{f.value&&i.post(g).then(({data:c})=>{b(c.formatted_message,{variant:c.success?"success":"warning"})})})}}const Ie={class:"d-flex align-items-center"},Ee=["id"],Le={class:"card-subtitle text-end flex-fill my-0",style:{"line-height":"1"}},Ne={class:"ps-1"},qe={class:"pe-1"},Fe={class:"card-body"},He={class:"row"},Oe={class:"col-md-6"},Ve={class:"clearfix"},ze={class:"d-table"},Je={class:"d-table-row"},je={class:"d-table-cell align-middle text-end pe-2 pb-2"},Ye={class:"d-table-cell align-middle w-100 pb-2"},Ke={class:"m-0"},We={class:"d-table-row"},Ge={class:"d-table-cell align-top text-end pe-2"},Qe=["href"],Xe=["src"],Ze={class:"d-table-cell align-middle w-100"},ts={key:0},es={class:"media-heading m-0 text-muted"},ss={key:1},ns={class:"media-heading m-0",style:{"line-height":"1.2"}},os={class:"text-muted"},as={key:2},is={class:"media-heading m-0",style:{"line-height":"1.2"}},ls={key:3},rs={class:"text-muted"},ds={key:4,class:"nowplaying-progress"},cs={class:"col-md-6"},us={key:0,class:"clearfix"},ps={class:"d-table"},_s={class:"d-table-row"},ms={class:"d-table-cell align-middle pe-2 text-end pb-2"},hs={class:"d-table-cell align-middle w-100 pb-2"},fs={class:"m-0"},bs={class:"d-table-row"},ys={class:"d-table-cell align-top text-end pe-2"},gs=["href"],ks=["src"],$s={class:"d-table-cell align-middle w-100"},vs={key:0},Ss={class:"media-heading m-0",style:{"line-height":"1"}},xs={class:"text-muted"},ws={key:1},Ps={class:"media-heading m-0",style:{"line-height":"1"}},Us={key:2},Bs={class:"text-muted"},As={key:1,class:"clearfix"},Ts={style:{"margin-left":"22px"}},Rs={class:"media-heading",style:{"margin-left":"22px"}},Ds=U({inheritAttrs:!1,__name:"NowPlayingPanel",props:{backendType:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean}},setup(g){const o=g,{offlineText:i}=K(),{np:n,currentTrackDurationDisplay:b,currentTrackElapsedDisplay:f}=It(o),{$gettext:c,$ngettext:$}=F(),_=A(()=>{var x,k,D,P;return $("%{listeners} Listener","%{listeners} Listeners",((k=(x=n.value)==null?void 0:x.listeners)==null?void 0:k.total)??0,{listeners:String(((P=(D=n.value)==null?void 0:D.listeners)==null?void 0:P.total)??0)})}),d=A(()=>o.backendType===Q.Liquidsoap),{vLightbox:u}=Lt(),v=M(o.backendSkipSongUri,{title:c("Skip current song?"),confirmButtonText:c("Skip Song")}),O=M(o.backendDisconnectStreamerUri,{title:c("Disconnect current streamer?"),confirmButtonText:c("Disconnect Streamer")}),L=Y("$updateMetadataModal"),V=()=>{var x;(x=L.value)==null||x.open()};return(x,k)=>{const D=H("router-link");return a(),l(w,null,[r(C,{id:"profile-nowplaying",class:"nowplaying","header-id":"hdr_now_playing"},G({header:m(({id:P})=>{var B;return[t("div",Ie,[t("h3",{id:P,class:"flex-shrink card-title my-0"},s(e(c)("On the Air")),9,Ee),t("h6",Le,[r(y,{class:"align-middle",icon:e(yt)},null,8,["icon"]),t("span",Ne,s(_.value),1),k[3]||(k[3]=t("br",null,null,-1)),t("small",null,[t("span",qe,s(((B=e(n).listeners)==null?void 0:B.unique)??0),1),h(" "+s(e(c)("Unique")),1)])]),e(T)(e(R).Reports)?(a(),S(D,{key:0,class:"flex-shrink btn btn-link text-white ms-2 px-1 py-2",to:{name:"stations:reports:listeners"},title:e(c)("Listener Report")},{default:m(()=>[r(y,{icon:e(Tt)},null,8,["icon"])]),_:1},8,["title"])):p("",!0)])]}),default:m(()=>{var P,B,I,X,Z,tt,et,st,nt,ot,at,it,lt,rt,dt,ct;return[t("div",Fe,[t("div",He,[t("div",Oe,[t("div",Ve,[t("div",ze,[t("div",Je,[t("div",je,[r(y,{icon:e(Bt)},null,8,["icon"])]),t("div",Ye,[t("h5",Ke,s(e(c)("Now Playing")),1)])]),t("div",We,[t("div",Ge,[(B=(P=e(n).now_playing)==null?void 0:P.song)!=null&&B.art?_t((a(),l("a",{key:0,href:e(n).now_playing.song.art,target:"_blank"},[t("img",{class:"rounded",src:e(n).now_playing.song.art,alt:"Album Art",style:{width:"50px"}},null,8,Xe)],8,Qe)),[[e(u)]]):p("",!0)]),t("div",Ze,[e(n).is_online?(X=(I=e(n).now_playing)==null?void 0:I.song)!=null&&X.title?(a(),l("div",ss,[t("h6",ns,[h(s(e(n).now_playing.song.title),1),k[4]||(k[4]=t("br",null,null,-1)),t("small",os,s(e(n).now_playing.song.artist),1)])])):(a(),l("div",as,[t("h6",is,s(((tt=(Z=e(n).now_playing)==null?void 0:Z.song)==null?void 0:tt.text)??""),1)])):(a(),l("div",ts,[t("h5",es,s(e(i)??e(c)("Station Offline")),1)])),(et=e(n).now_playing)!=null&&et.playlist?(a(),l("div",ls,[t("small",rs,s(e(c)("Playlist"))+" : "+s(e(n).now_playing.playlist),1)])):p("",!0),e(f)?(a(),l("div",ds,[t("small",null,s(e(f))+" / "+s(e(b)),1)])):p("",!0)])])])])]),t("div",cs,[!((st=e(n).live)!=null&&st.is_live)&&e(n).playing_next?(a(),l("div",us,[t("div",ps,[t("div",_s,[t("div",ms,[r(y,{icon:e(pt)},null,8,["icon"])]),t("div",hs,[t("h5",fs,s(e(c)("Playing Next")),1)])]),t("div",bs,[t("div",ys,[(ot=(nt=e(n).playing_next)==null?void 0:nt.song)!=null&&ot.art?_t((a(),l("a",{key:0,href:e(n).playing_next.song.art,target:"_blank"},[t("img",{src:e(n).playing_next.song.art,class:"rounded",alt:"Album Art",style:{width:"40px"}},null,8,ks)],8,gs)),[[e(u)]]):p("",!0)]),t("div",$s,[(it=(at=e(n).playing_next)==null?void 0:at.song)!=null&&it.title?(a(),l("div",vs,[t("h6",Ss,[h(s(e(n).playing_next.song.title),1),k[5]||(k[5]=t("br",null,null,-1)),t("small",xs,s(e(n).playing_next.song.artist),1)])])):(a(),l("div",ws,[t("h6",Ps,s(((rt=(lt=e(n).playing_next)==null?void 0:lt.song)==null?void 0:rt.text)??""),1)])),e(n).playing_next.playlist?(a(),l("div",Us,[t("small",Bs,s(e(c)("Playlist"))+" : "+s(e(n).playing_next.playlist),1)])):p("",!0)])])])])):(dt=e(n).live)!=null&&dt.is_live?(a(),l("div",As,[t("h6",Ts,[r(y,{icon:e(At)},null,8,["icon"]),h(" "+s(e(c)("Live")),1)]),t("h4",Rs,s((ct=e(n).live)==null?void 0:ct.streamer_name),1)])):p("",!0)])])])]}),_:2},[d.value&&e(T)(e(R).Broadcasting)?{name:"footer_actions",fn:m(()=>{var P,B;return[(P=e(n).live)!=null&&P.is_live?p("",!0):(a(),l("button",{key:0,id:"btn_skip_song",type:"button",class:"btn btn-link text-primary",onClick:k[0]||(k[0]=I=>e(v)())},[r(y,{icon:e(pt)},null,8,["icon"]),t("span",null,s(e(c)("Skip Song")),1)])),(B=e(n).live)!=null&&B.is_live?(a(),l("button",{key:1,id:"btn_disconnect_streamer",type:"button",class:"btn btn-link text-primary",onClick:k[1]||(k[1]=I=>e(O)())},[r(y,{icon:e(Ut)},null,8,["icon"]),t("span",null,s(e(c)("Disconnect Streamer")),1)])):p("",!0),t("button",{id:"btn_update_metadata",type:"button",class:"btn btn-link text-secondary",onClick:k[2]||(k[2]=I=>V())},[r(y,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(c)("Update Metadata")),1)])]}),key:"0"}:void 0]),1024),d.value&&e(T)(e(R).Broadcasting)?(a(),S(Ce,{key:0,ref_key:"$updateMetadataModal",ref:L},null,512)):p("",!0)],64)}}}),Ms={class:"table table-striped mb-0"},Cs={class:"d-flex w-100 justify-content-between align-items-center"},Is={class:"m-0"},Es={class:"text-end m-0"},Ls=U({inheritAttrs:!1,__name:"SchedulePanel",props:{scheduleItems:{}},setup(g){const o=g,{DateTime:i}=Yt(),{now:n,timestampToDateTime:b,formatDateTime:f}=jt(),c=A(()=>{const $=n();return Jt.map(o.scheduleItems,_=>{const d=b(_.start_timestamp),u=b(_.end_timestamp);return _.time_until=d.toRelative({locale:"en"}),_.start_formatted=f(d,d.hasSame($,"day")?i.TIME_SIMPLE:i.DATETIME_MED),_.end_formatted=f(u,u.hasSame(d,"day")?i.TIME_SIMPLE:i.DATETIME_MED),_})});return($,_)=>c.value.length>0?(a(),S(C,{key:0,class:"scheduled","header-id":"hdr_scheduled",title:$.$gettext("Scheduled")},{default:m(()=>[t("table",Ms,[t("tbody",null,[(a(!0),l(w,null,j(c.value,d=>(a(),l("tr",{key:d.id},[t("td",null,[t("div",Cs,[t("h5",Is,[t("small",null,[d.type==="playlist"?(a(),l(w,{key:0},[h(s($.$gettext("Playlist")),1)],64)):(a(),l(w,{key:1},[h(s($.$gettext("Streamer/DJ")),1)],64))]),_[0]||(_[0]=t("br",null,null,-1)),h(" "+s(d.name),1)]),t("p",Es,[t("small",null,s(d.start_formatted)+" - "+s(d.end_formatted),1),_[1]||(_[1]=t("br",null,null,-1)),t("strong",null,[d.is_now?(a(),l(w,{key:0},[h(s($.$gettext("Now")),1)],64)):(a(),l(w,{key:1},[h(s(d.time_until),1)],64))])])])])]))),128))])])]),_:1},8,["title"])):p("",!0)}}),Ns=["id"],qs={class:"table table-striped table-responsive"},Fs={class:"align-middle"},Hs=["href"],Os={class:"px-0"},Vs={class:"text-monospace"},zs={class:"px-0"},Js={class:"align-middle"},js={class:"ps-0",colspan:"2"},Ys={key:0,class:"form-text"},Ks={class:"align-middle"},Ws={class:"px-0"},Gs={class:"text-monospace"},Qs={class:"px-0"},Xs={class:"align-middle"},Zs={class:"px-0"},tn={class:"text-monospace"},en={class:"px-0"},sn=U({inheritAttrs:!1,__name:"FrontendPanel",props:{frontendRunning:{type:Boolean},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},hasStarted:{type:Boolean}},setup(g){const o=g,i=Kt("station_show_frontend_credentials",!1),{$gettext:n}=F(),b=A(()=>i.value?n("Hide Credentials"):n("Show Credentials"));A(()=>{switch(o.frontendType){case E.Icecast:return"Icecast";case E.Rsas:return"Rocket Streaming Audio Server (RSAS)";case E.Shoutcast:return"Shoutcast";default:return""}});const f=A(()=>o.frontendType===E.Shoutcast),c=M(o.frontendRestartUri,{title:n("Restart service?"),confirmButtonText:n("Restart")}),$=M(o.frontendStartUri,{title:n("Start service?"),confirmButtonText:n("Start"),confirmButtonClass:"btn-success"}),_=M(o.frontendStopUri,{title:n("Stop service?"),confirmButtonText:n("Stop"),confirmButtonClass:"btn-danger"});return(d,u)=>(a(),S(C,{id:"profile-frontend",class:"mb-4","header-id":"hdr_frontend"},G({header:m(({id:v})=>[t("h3",{id:v,class:"card-title"},[h(s(e(n)("Broadcasting Service"))+" ",1),r(wt,{running:d.frontendRunning},null,8,["running"]),u[4]||(u[4]=t("br",null,null,-1))],8,Ns)]),default:m(()=>[e(T)(e(R).Broadcasting)?(a(),l("div",{key:0,class:vt(["collapse",e(i)?"show":""])},[t("table",qs,[t("tbody",null,[t("tr",Fs,[t("td",null,[t("a",{href:d.frontendAdminUri,target:"_blank"},s(e(n)("Administration")),9,Hs)]),t("td",Os,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[5]||(u[5]=t("span",{class:"text-monospace"},"admin",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",Vs,s(d.frontendAdminPassword),1)])]),t("td",zs,[r(J,{text:d.frontendAdminPassword,"hide-text":""},null,8,["text"])])]),t("tr",Js,[t("td",null,s(e(n)("Port")),1),t("td",js,[h(s(d.frontendPort)+" ",1),f.value?(a(),l("div",Ys,s(e(n)("Some clients may require that you enter a port number that is either one above or one below this number.")),1)):p("",!0)])]),t("tr",Ks,[t("td",null,s(e(n)("Source")),1),t("td",Ws,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[6]||(u[6]=t("span",{class:"text-monospace"},"source",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",Gs,s(d.frontendSourcePassword),1)])]),t("td",Qs,[r(J,{text:d.frontendSourcePassword,"hide-text":""},null,8,["text"])])]),t("tr",Xs,[t("td",null,s(e(n)("Relay")),1),t("td",Zs,[t("div",null,[h(s(e(n)("Username:"))+" ",1),u[7]||(u[7]=t("span",{class:"text-monospace"},"relay",-1))]),t("div",null,[h(s(e(n)("Password:"))+" ",1),t("span",tn,s(d.frontendRelayPassword),1)])]),t("td",en,[r(J,{text:d.frontendRelayPassword,"hide-text":""},null,8,["text"])])])])])],2)):p("",!0)]),_:2},[e(T)(e(R).Broadcasting)?{name:"footer_actions",fn:m(()=>[t("a",{class:"btn btn-link text-primary",onClick:u[0]||(u[0]=$t(v=>i.value=!e(i),["prevent"]))},[r(y,{icon:e(Rt)},null,8,["icon"]),t("span",null,s(b.value),1)]),d.hasStarted?(a(),l(w,{key:0},[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:u[1]||(u[1]=(...v)=>e(c)&&e(c)(...v))},[r(y,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(n)("Restart")),1)]),d.frontendRunning?p("",!0):(a(),l("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:u[2]||(u[2]=v=>e($)())},[r(y,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(n)("Start")),1)])),d.frontendRunning?(a(),l("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:u[3]||(u[3]=v=>e(_)())},[r(y,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(n)("Stop")),1)])):p("",!0)],64)):p("",!0)]),key:"0"}:void 0]),1024))}}),nn={class:"card-body"},on={class:"card-text"},an=U({__name:"BackendNonePanel",setup(g){return(o,i)=>(a(),S(C,{id:"profile-backend","header-id":"hdr_backend_disabled",title:o.$gettext("AutoDJ Disabled")},{default:m(()=>[t("div",nn,[t("p",on,s(o.$gettext("AutoDJ has been disabled for this station. No music will automatically be played when a source is not live.")),1)])]),_:1},8,["title"]))}}),ln=["id"],rn={class:"card-body"},dn={class:"card-text"},cn={key:0,class:"buttons"},un=U({inheritAttrs:!1,__name:"BackendPanel",props:{backendRunning:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{}},setup(g){const o=g,{$gettext:i,$ngettext:n}=F(),b=A(()=>{const _=n("%{numSongs} uploaded song","%{numSongs} uploaded songs",o.numSongs,{numSongs:String(o.numSongs)}),d=n("%{numPlaylists} playlist","%{numPlaylists} playlists",o.numPlaylists,{numPlaylists:String(o.numPlaylists)});return i("LiquidSoap is currently shuffling from %{songs} and %{playlists}.",{songs:_,playlists:d})});A(()=>o.backendType===Q.Liquidsoap?"Liquidsoap":"");const f=M(o.backendRestartUri,{title:i("Restart service?"),confirmButtonText:i("Restart")}),c=M(o.backendStartUri,{title:i("Start service?"),confirmButtonText:i("Start"),confirmButtonClass:"btn-success"}),$=M(o.backendStopUri,{title:i("Stop service?"),confirmButtonText:i("Stop"),confirmButtonClass:"btn-danger"});return(_,d)=>{const u=H("router-link");return a(),S(C,{id:"profile-backend","header-id":"hdr_backend"},G({header:m(({id:v})=>[t("h3",{id:v,class:"card-title"},[h(s(e(i)("AutoDJ Service"))+" ",1),r(wt,{running:_.backendRunning},null,8,["running"]),d[3]||(d[3]=t("br",null,null,-1))],8,ln)]),default:m(()=>[t("div",rn,[t("p",dn,s(b.value),1),e(T)(e(R).Media)?(a(),l("div",cn,[r(u,{class:"btn btn-primary",to:{name:"stations:files:index"}},{default:m(()=>[h(s(e(i)("Music Files")),1)]),_:1}),r(u,{class:"btn btn-primary",to:{name:"stations:playlists:index"}},{default:m(()=>[h(s(e(i)("Playlists")),1)]),_:1})])):p("",!0)])]),_:2},[e(T)(e(R).Broadcasting)&&_.hasStarted?{name:"footer_actions",fn:m(()=>[t("button",{type:"button",class:"btn btn-link text-secondary",onClick:d[0]||(d[0]=v=>e(f)())},[r(y,{icon:e(W)},null,8,["icon"]),t("span",null,s(e(i)("Restart")),1)]),_.backendRunning?p("",!0):(a(),l("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:d[1]||(d[1]=v=>e(c)())},[r(y,{icon:e(gt)},null,8,["icon"]),t("span",null,s(e(i)("Start")),1)])),_.backendRunning?(a(),l("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:d[2]||(d[2]=v=>e($)())},[r(y,{icon:e(kt)},null,8,["icon"]),t("span",null,s(e(i)("Stop")),1)])):p("",!0)]),key:"0"}:void 0]),1024)}}}),pn={class:"card-body"},_n={class:"card-text"},mn=U({__name:"NowPlayingNotStartedPanel",setup(g){return(o,i)=>(a(),S(C,{id:"profile-now-playing","header-id":"hdr_now_playing",title:o.$gettext("On the Air")},{default:m(()=>[t("div",pn,[t("p",_n,s(o.$gettext("Information about the current playing track will appear here once your station has started.")),1)])]),_:1},8,["title"]))}}),hn={id:"profile",class:"row row-of-cards"},fn={class:"col-lg-7"},bn={class:"col-lg-5"},yn=U({__name:"EnabledProfile",props:{profileApiUri:{},stationSupportsRequests:{type:Boolean},stationSupportsStreamers:{type:Boolean},numSongs:{},numPlaylists:{},backendType:{},hasStarted:{type:Boolean},backendRestartUri:{},backendStartUri:{},backendStopUri:{},frontendType:{},frontendAdminUri:{},frontendAdminPassword:{},frontendSourcePassword:{},frontendRelayPassword:{},frontendPort:{},frontendRestartUri:{},frontendStartUri:{},frontendStopUri:{},stationName:{},stationDescription:{},backendSkipSongUri:{},backendDisconnectStreamerUri:{},stationShortName:{},useStatic:{type:Boolean},useSse:{type:Boolean},enableRequests:{type:Boolean},enablePublicPage:{type:Boolean},enableStreamers:{type:Boolean},enableOnDemand:{type:Boolean},publicPageUri:{},publicWebDjUri:{},publicOnDemandUri:{},publicPodcastsUri:{},publicScheduleUri:{},publicPageEmbedUri:{},publicOnDemandEmbedUri:{},publicRequestEmbedUri:{},publicHistoryEmbedUri:{},publicScheduleEmbedUri:{},publicPodcastsEmbedUri:{}},setup(g){const o=g,i=A(()=>o.frontendType!==E.Remote),n=A(()=>o.backendType!==Q.None),{axiosSilent:b}=q(),{state:f}=Wt(()=>b.get(o.profileApiUri).then(c=>c.data),{station:{...Et.station},services:{backend_running:!1,frontend_running:!1,has_started:!1,needs_restart:!1},schedule:[]},{timeout:15e3});return(c,$)=>(a(),l(w,null,[r(De,z(o,{station:e(f).station}),null,16,["station"]),t("div",hn,[t("div",fn,[c.hasStarted?(a(),l(w,{key:0},[r(Ds,St(xt(o)),null,16),r(Ls,{"schedule-items":e(f).schedule},null,8,["schedule-items"]),r(we,{station:e(f).station},null,8,["station"])],64)):(a(),S(mn,{key:1}))]),t("div",bn,[i.value?(a(),S(sn,z({key:0},o,{"frontend-running":e(f).services.frontend_running}),null,16,["frontend-running"])):p("",!0),n.value?(a(),S(un,z({key:1},o,{"backend-running":e(f).services.backend_running}),null,16,["backend-running"])):(a(),S(an,{key:2}))])])],64))}}),Zn=U({__name:"Profile",setup(g){Mt(()=>{document.title="Şəxsi Profil"});const{isEnabled:o}=K(),{axios:i}=q(),{isLoading:n,state:b}=Pt(async()=>o?await(await i.get(ft("/vue/profile").value)).data:null,null);return(f,c)=>e(o)?(a(),S(Ct,{key:0,loading:e(n),lazy:""},{default:m(()=>[r(yn,St(xt(e(b))),null,16)]),_:1},8,["loading"])):(a(),S(se,{key:1}))}});export{Zn as default};
