import{_ as R}from"./DataTable-BVxw2U-W.js";import{_ as D}from"./index-C6Aq-SiS.js";import{l as F}from"./lodash-Bdl6ys83.js";import{_ as E}from"./FormGroupMultiCheck-CrseF9Xt.js";import{u as w}from"./useVuelidateOnFormTab-EpRrQQmz.js";import{r as k}from"./index-Hn1RL1dT.js";import{_ as U,a as V}from"./Tabs-Bcf4qaxV.js";import{b as O,f as j,u as M}from"./usePlayerStore-DtvVlgTn.js";import{d as x,L as q,j as N,o as C,u as t,w as r,e as u,g as s,h as y,t as l,i as v,c as I,K as P,b as z,F as K}from"./vue-Cts3TEHg.js";import{u as G}from"./useBaseEditModal-BXZeLICl.js";import{_ as J}from"./ModalForm-CXdSc8cn.js";import{u as Q}from"./assets/frontend/js/pages/Stations-DwGAjw5d.js";import{u as W}from"./useHasDatatable-DPFcIMM0.js";import{u as X,_ as Y}from"./AddButton-uc7Azowb.js";import{u as Z}from"./useConfirmAndDelete-X6im6p5W.js";import{_ as tt}from"./CardPage-BV0W_9Ux.js";import{g as et}from"./router-Dz_seyPN.js";import"./icons-Be1GHOkw.js";import"./FormMultiCheck-BRaoZhWq.js";import"./FormCheckbox-VeRpO6PO.js";import"./useOptionalStorage-B_80S-fN.js";import"./index-CHYtGLoM.js";import"./useFormField-B42szzPL.js";import"./FormGroup-LCbWR38E.js";import"./lodash-BwctMegf.js";import"./useSlotsExcept-By0Eq2ad.js";import"./useVuelidateOnForm-Cd1pgkjV.js";import"./bootstrap.esm-BZy605kZ.js";import"./mergeExisting-DGzkK79d.js";import"./InvisibleSubmitButton-EsMx6l8t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useHasModal-8E4XYHFm.js";import"./Loading-zTzdosl6.js";import"./router-DBDomJOz.js";import"./PanelLayout-hHeJPsF2.js";import"./populateComponentRemotely-DB1-CE3-.js";import"./acl-CSd8fjKM.js";import"./useStationDateTimeFormatter-EzlgHgtM.js";import"./luxon-BJtlzn-y.js";import"./datetime-BTmRqpun.js";import"./Lightbox-zgmbLVpf.js";import"./HeaderInlinePlayer-ByKNdyNg.js";import"./InlinePlayer-DuOkhvmY.js";import"./useShowVolume-DUKhcwTH.js";import"./hlsjs-Cx0E5yqS.js";import"./formatTime-DvDPwXf4.js";import"./MuteButton-C7b6b2MR.js";import"./lightbox-CLViexMZ.js";import"./useDialog-C3-W3-Xz.js";import"./InfoCard-C2q1AMp7.js";const at={class:"row g-3 mb-3"},ot=x({__name:"BasicInfo",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(_){const d=q(_,"form"),{maxBitrate:e}=O(),{v$:i,tabClass:n}=w(d,{name:{required:k},format:{required:k},bitrate:{required:k}},{name:null,format:"aac",bitrate:128}),m=[{value:"aac",text:"AAC"}],c=F.map([32,48,64,96,128,192,256,320].filter(a=>e===0||a<=e),a=>({value:a,text:String(a)}));return(a,b)=>(C(),N(U,{label:a.$gettext("Basic Info"),"item-header-class":t(n)},{default:r(()=>[u("div",at,[s(D,{id:"edit_form_name",class:"col-md-12",field:t(i).name,label:a.$gettext("Programmatic Name")},{description:r(()=>[y(l(a.$gettext('A name for this stream that will be used internally in code. Should only contain letters, numbers, and underscores (i.e. "stream_lofi").')),1)]),_:1},8,["field","label"]),s(E,{id:"edit_form_format",class:"col-md-6",field:t(i).format,options:m,stacked:"",radio:"",label:a.$gettext("Audio Format")},null,8,["field","label"]),s(E,{id:"edit_form_bitrate",class:"col-md-6",field:t(i).bitrate,options:t(c),stacked:"",radio:"",label:a.$gettext("Audio Bitrate (kbps)")},null,8,["field","options","label"])])]),_:1},8,["label","item-header-class"]))}}),rt=x({__name:"EditModal",props:{createUrl:{}},emits:["relist","needs-restart"],setup(_,{expose:d,emit:e}){const i=_,n=e,m=v("$modal"),{notifySuccess:c}=j(),{loading:a,error:b,isEditMode:g,form:p,v$:h,clearContents:$,create:f,edit:o,doSubmit:S,close:H}=G(i,n,m,{},{},{onSubmitSuccess:()=>{c(),n("relist"),n("needs-restart"),H()}}),{$gettext:A}=M(),T=I(()=>g.value?A("Edit HLS Stream"):A("Add HLS Stream"));return d({create:f,edit:o,close:H}),(dt,B)=>(C(),N(J,{ref_key:"$modal",ref:m,loading:t(a),title:T.value,error:t(b),"disable-save-button":t(h).$invalid,onSubmit:t(S),onHidden:t($)},{default:r(()=>[s(V,{"content-class":"mt-3"},{default:r(()=>[s(ot,{form:t(p),"onUpdate:form":B[0]||(B[0]=L=>P(p)?p.value=L:null)},null,8,["form"])]),_:1})]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}}),st={class:"card-text"},it={class:"m-0"},nt={class:"btn-group btn-group-sm"},mt=["onClick"],lt=["onClick"],ne=x({__name:"HlsStreams",setup(_){const d=et("/hls_streams"),{$gettext:e}=M(),i=[{key:"name",isRowHeader:!0,label:e("Name"),sortable:!0},{key:"format",label:e("Format"),sortable:!0},{key:"bitrate",label:e("Bitrate"),sortable:!0},{key:"actions",label:e("Actions"),sortable:!1,class:"shrink"}],n=$=>{const f=[];return $.split(" ").forEach(o=>{f.push(o.toUpperCase())}),f.join(" ")},m=v("$dataTable"),{relist:c}=W(m),a=v("$editModal"),{doCreate:b,doEdit:g}=X(a),{mayNeedRestart:p}=Q(),{doDelete:h}=Z(e("Delete HLS Stream?"),()=>{p(),c()});return($,f)=>(C(),z(K,null,[s(tt,{title:t(e)("HLS Streams")},{info:r(()=>[u("p",st,l(t(e)("HTTP Live Streaming (HLS) is a new adaptive-bitrate streaming technology. From this page, you can configure the individual bitrates and formats that are included in the combined HLS stream.")),1)]),actions:r(()=>[s(Y,{text:t(e)("Add HLS Stream"),onClick:t(b)},null,8,["text","onClick"])]),default:r(()=>[s(R,{id:"station_hls_streams",ref_key:"$dataTable",ref:m,fields:i,paginated:"","api-url":t(d)},{"cell(name)":r(o=>[u("h5",it,l(o.item.name),1)]),"cell(format)":r(o=>[y(l(n(o.item.format)),1)]),"cell(bitrate)":r(o=>[y(l(o.item.bitrate)+"kbps ",1)]),"cell(actions)":r(o=>[u("div",nt,[u("button",{type:"button",class:"btn btn-primary",onClick:S=>t(g)(o.item.links.self)},l(t(e)("Edit")),9,mt),u("button",{type:"button",class:"btn btn-danger",onClick:S=>t(h)(o.item.links.self)},l(t(e)("Delete")),9,lt)])]),_:1},8,["api-url"])]),_:1},8,["title"]),s(rt,{ref_key:"$editModal",ref:a,"create-url":t(d),onRelist:t(c),onNeedsRestart:t(p)},null,8,["create-url","onRelist","onNeedsRestart"])],64))}});export{ne as default};
