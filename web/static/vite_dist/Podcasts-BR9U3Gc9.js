import{_ as j}from"./DataTable-ds0DoLPp.js";import{_ as v}from"./index-B8c7qEP3.js";import{_ as D}from"./FormGroupSelect-BUEpf2Ry.js";import{u as F}from"./useVuelidateOnFormTab-DbA_UaVa.js";import{r as x}from"./index-Hn1RL1dT.js";import{_ as N,a as z}from"./Tabs-CCW6jNJO.js";import{_ as G}from"./FormGroupCheckbox-t9GUzJmC.js";import{d as A,a4 as K,L as R,j as U,o as g,u as t,w as r,e as o,g as s,r as J,N as Q,p as X,m as Y,v as Z,t as n,i as T,c as ee,K as B,b as P,F as te,a as se,h as I,f as S}from"./vue-Cts3TEHg.js";import{_ as oe}from"./FormGroupMultiCheck-Co2X9y1a.js";import{u as H,d as ae}from"./usePlayerStore-DPy2bvYr.js";import{g as O}from"./router-B3NsYQ6y.js";import{_ as le}from"./Loading-vp9RNwAY.js";import{_ as ie}from"./CodemirrorTextarea-B1HSDcyC.js";import{_ as re}from"./Artwork-BvmNML9t.js";import{m as L}from"./mergeExisting-DGzkK79d.js";import{u as ne}from"./useBaseEditModal-DBj3VkGf.js";import{a as de}from"./useVuelidateOnForm-Cv8B432y.js";import{_ as ce}from"./ModalForm-3IaMU9qN.js";import{l as pe}from"./lodash-Bdl6ys83.js";import{A as ue}from"./AlbumArt-IO3w6IEk.js";import{_ as me}from"./Quota-CWh7aSvu.js";import{u as fe,_ as _e}from"./AddButton-uc7Azowb.js";import{u as ge}from"./useHasDatatable-DPFcIMM0.js";import{_ as be}from"./CardPage-BV0W_9Ux.js";import{u as he}from"./useConfirmAndDelete-BogLlcK4.js";import"./icons-Be1GHOkw.js";import"./FormMultiCheck-BRaoZhWq.js";import"./FormCheckbox-VeRpO6PO.js";import"./useOptionalStorage-QBieSuay.js";import"./index-C1bmuaZv.js";import"./useFormField-CKIP4Y45.js";import"./FormGroup-LCbWR38E.js";import"./useSlotsExcept-By0Eq2ad.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./index.es-DoSWOjVm.js";import"./PanelLayout-D3dh7E8b.js";import"./FormFile-ByMMAzbh.js";import"./InvisibleSubmitButton-EsMx6l8t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useHasModal-DQdUaq4h.js";import"./lightbox-CLViexMZ.js";import"./InfoCard-C2q1AMp7.js";import"./useDialog-DLuagSnT.js";const $e={class:"row g-3"},ye=A({__name:"BasicInfo",props:K({languageOptions:{},categoriesOptions:{}},{form:{required:!0},formModifiers:{}}),emits:["update:form"],setup(b){const p=R(b,"form"),{v$:a,tabClass:f}=F(p,{title:{required:x},link:{},description:{required:x},language:{required:x},author:{},email:{},categories:{required:x},is_enabled:{}},{title:"",link:"",description:"",language:"en",author:"",email:"",categories:[],is_enabled:!0});return(e,h)=>(g(),U(N,{label:e.$gettext("Basic Information"),"item-header-class":t(f)},{default:r(()=>[o("div",$e,[s(v,{id:"form_edit_title",class:"col-md-6",field:t(a).title,label:e.$gettext("Podcast Title")},null,8,["field","label"]),s(v,{id:"form_edit_link",class:"col-md-6",field:t(a).link,label:e.$gettext("Website"),description:e.$gettext("Typically the home page of a podcast.")},null,8,["field","label","description"]),s(v,{id:"form_edit_description",class:"col-md-12",field:t(a).description,"input-type":"textarea",label:e.$gettext("Description"),description:e.$gettext("The description of your podcast. The typical maximum amount of text allowed for this is 4000 characters.")},null,8,["field","label","description"]),s(D,{id:"form_edit_language",class:"col-md-12",field:t(a).language,options:e.languageOptions,label:e.$gettext("Language"),description:e.$gettext("The language spoken on the podcast.")},null,8,["field","options","label","description"]),s(v,{id:"form_edit_author",class:"col-md-6",field:t(a).author,label:e.$gettext("Author"),description:e.$gettext("The contact person of the podcast. May be required in order to list the podcast on services like Apple Podcasts, Spotify, Google Podcasts, etc.")},null,8,["field","label","description"]),s(v,{id:"form_edit_email",class:"col-md-6",field:t(a).email,"input-type":"email",label:e.$gettext("E-Mail"),description:e.$gettext("The email of the podcast contact. May be required in order to list the podcast on services like Apple Podcasts, Spotify, Google Podcasts, etc.")},null,8,["field","label","description"]),s(D,{id:"form_edit_categories",class:"col-md-12",field:t(a).categories,options:e.categoriesOptions,multiple:"",label:e.$gettext("Categories"),description:e.$gettext("Select the category/categories that best reflects the content of your podcast.")},null,8,["field","options","label","description"]),s(G,{id:"edit_form_is_enabled",class:"col-md-12",field:t(a).is_enabled,label:e.$gettext("Enable on Public Pages"),description:e.$gettext("If disabled, the station will not be visible on public-facing pages or APIs.")},null,8,["field","label","description"])])]),_:1},8,["label","item-header-class"]))}}),ke={class:"row g-3"},ve={class:"card mb-3",role:"region"},we={class:"card-header text-bg-primary"},Pe={class:"card-title"},xe={class:"card-body"},Ae={class:"row g-3 mb-3"},Ce=A({__name:"Source",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(b){const p=R(b,"form"),{v$:a,tabClass:f}=F(p,{source:{required:x},playlist_id:{},playlist_auto_publish:{}},{source:"manual",playlist_id:null,playlist_auto_publish:!0}),{$gettext:e}=H(),h=[{value:"manual",text:e("Manually Add Episodes"),description:e("Create podcast episodes independent of your station's media collection.")},{value:"playlist",text:e("Synchronize with Playlist"),description:e("Automatically create new podcast episodes when media is added to a specified playlist.")}],d=J(!0),u=Q([]),{axios:$}=ae(),k=O("/podcasts/playlists");return X(()=>{$.get(k.value).then(l=>{u.value=l.data}).finally(()=>{d.value=!1})}),(l,C)=>(g(),U(N,{label:t(e)("Source"),"item-header-class":t(f)},{default:r(()=>[o("div",ke,[s(oe,{id:"edit_form_source",class:"col-md-12",field:t(a).source,options:h,stacked:"",radio:"",label:t(e)("Source")},null,8,["field","label"])]),Y(o("section",ve,[o("div",we,[o("h2",Pe,n(t(e)("Playlist-Based Podcast")),1)]),o("div",xe,[o("p",null,n(t(e)("Playlist-based podcasts will automatically sync with the contents of a playlist, creating new podcast episodes for any media added to the playlist.")),1),s(le,{loading:d.value},{default:r(()=>[o("div",Ae,[s(D,{id:"form_edit_playlist_id",class:"col-md-12",field:t(a).playlist_id,options:u.value,label:t(e)("Select Playlist")},null,8,["field","options","label"]),s(G,{id:"form_edit_playlist_auto_publish",class:"col-md-12",field:t(a).playlist_auto_publish,label:t(e)("Automatically Publish New Episodes"),description:t(e)("Whether new episodes should be marked as published or held for review as unpublished.")},null,8,["field","label","description"])])]),_:1},8,["loading"])])],512),[[Z,p.value.source==="playlist"]])]),_:1},8,["label","item-header-class"]))}}),Me={class:"row g-3"},Ee=A({__name:"Branding",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(b){const p=R(b,"form"),{v$:a,tabClass:f}=F(p,{branding_config:{public_custom_html:{}}},()=>({branding_config:{public_custom_html:""}}));return(e,h)=>(g(),U(N,{label:e.$gettext("Branding"),"item-header-class":t(f)},{default:r(()=>[o("div",Me,[s(v,{id:"edit_form_public_custom_html",class:"col-md-12",field:t(a).branding_config.public_custom_html,label:e.$gettext("Custom HTML for Public Pages")},{default:r(({id:d,model:u})=>[s(ie,{id:d,modelValue:u.$model,"onUpdate:modelValue":$=>u.$model=$,mode:"html"},null,8,["id","modelValue","onUpdate:modelValue"])]),_:1},8,["field","label"])])]),_:1},8,["label","item-header-class"]))}}),Se=A({__name:"PodcastEditModal",props:{languageOptions:{},categoriesOptions:{},newArtUrl:{},createUrl:{}},emits:["relist"],setup(b,{expose:p,emit:a}){const f=b,e=a,h=T("$modal"),{record:d,reset:u}=de({has_custom_art:!1,art:null,links:{art:null}}),{loading:$,error:k,isEditMode:w,form:l,v$:C,clearContents:q,create:y,edit:M,doSubmit:V,close:i}=ne(f,e,h,{artwork_file:{},categories:{}},{artwork_file:null,categories:[]},{resetForm:m=>{m(),u()},populateForm:(m,c)=>{m.categories=pe.map(m.categories,_=>_.category),d.value=L(d.value,m),c.value=L(c.value,m)}}),{$gettext:E}=H(),W=ee(()=>w.value?E("Edit Podcast"):E("Add Podcast"));return p({create:y,edit:M,close:i}),(m,c)=>(g(),U(ce,{ref_key:"$modal",ref:h,loading:t($),title:W.value,error:t(k),"disable-save-button":t(C).$invalid,onSubmit:t(V),onHidden:t(q)},{default:r(()=>[s(z,null,{default:r(()=>[s(ye,{form:t(l),"onUpdate:form":c[0]||(c[0]=_=>B(l)?l.value=_:null),"categories-options":m.categoriesOptions,"language-options":m.languageOptions},null,8,["form","categories-options","language-options"]),s(Ce,{form:t(l),"onUpdate:form":c[1]||(c[1]=_=>B(l)?l.value=_:null)},null,8,["form"]),s(re,{modelValue:t(l).artwork_file,"onUpdate:modelValue":c[2]||(c[2]=_=>t(l).artwork_file=_),"artwork-src":t(d).links.art,"new-art-url":m.newArtUrl},null,8,["modelValue","artwork-src","new-art-url"]),s(Ee,{form:t(l),"onUpdate:form":c[3]||(c[3]=_=>B(l)?l.value=_:null)},null,8,["form"])]),_:1})]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}}),Te={class:"row align-items-center"},Oe={class:"col-md-7"},Ue={class:"card-title"},qe={class:"col-md-5 text-end"},Ve={class:"m-0"},Be={key:0},De=["href"],Fe=["href"],Ne={class:"badges"},Re={key:0,class:"badge text-bg-info"},He={key:1,class:"badge text-bg-info"},Ie={key:2,class:"badge text-bg-danger"},Le={class:"btn-group btn-group-sm"},Ge=["onClick"],We=["onClick"],Bt=A({__name:"Podcasts",props:{languageOptions:{},categoriesOptions:{}},setup(b){const p=O("/quota/station_podcasts"),a=O("/podcasts"),f=O("/podcasts/art"),{$gettext:e}=H(),h=[{key:"art",label:e("Art"),sortable:!1,class:"shrink pe-0"},{key:"title",label:e("Podcast"),sortable:!1},{key:"episodes",label:e("# Episodes"),sortable:!1},{key:"actions",label:e("Actions"),sortable:!1,class:"shrink"}],d=T("$quota"),u=T("$dataTable"),{refresh:$}=ge(u),k=()=>{var y;(y=d.value)==null||y.update(),$()},w=T("$editPodcastModal"),{doCreate:l,doEdit:C}=fe(w),{doDelete:q}=he(e("Delete Podcast?"),()=>k());return(y,M)=>{const V=se("router-link");return g(),P(te,null,[s(be,null,{header:r(()=>[o("div",Te,[o("div",Oe,[o("h2",Ue,n(t(e)("Podcasts")),1)]),o("div",qe,[s(me,{ref_key:"$quota",ref:d,"quota-url":t(p)},null,8,["quota-url"])])])]),actions:r(()=>[s(_e,{text:t(e)("Add Podcast"),onClick:t(l)},null,8,["text","onClick"])]),default:r(()=>[s(j,{id:"station_podcasts",ref_key:"$dataTable",ref:u,paginated:"",fields:h,"api-url":t(a)},{"cell(art)":r(({item:i})=>[s(ue,{src:i.art},null,8,["src"])]),"cell(title)":r(({item:i})=>[o("h5",Ve,n(i.title),1),i.is_published&&i.is_enabled?(g(),P("div",Be,[o("a",{href:i.links.public_episodes,target:"_blank"},n(t(e)("Public Page")),9,De),M[0]||(M[0]=I(" • ")),o("a",{href:i.links.public_feed,target:"_blank"},n(t(e)("RSS Feed")),9,Fe)])):S("",!0),o("div",Ne,[i.source==="playlist"?(g(),P("span",Re,n(t(e)("Playlist-Based")),1)):S("",!0),i.is_published?S("",!0):(g(),P("span",He,n(t(e)("Unpublished")),1)),i.is_enabled?S("",!0):(g(),P("span",Ie,n(t(e)("Disabled")),1))])]),"cell(actions)":r(({item:i})=>[o("div",Le,[o("button",{type:"button",class:"btn btn-primary",onClick:E=>t(C)(i.links.self)},n(t(e)("Edit")),9,Ge),o("button",{type:"button",class:"btn btn-danger",onClick:E=>t(q)(i.links.self)},n(t(e)("Delete")),9,We),s(V,{class:"btn btn-secondary",to:{name:"stations:podcast:episodes",params:{podcast_id:i.id}}},{default:r(()=>[I(n(t(e)("Episodes")),1)]),_:2},1032,["to"])])]),_:1},8,["api-url"])]),_:1}),s(Se,{ref_key:"$editPodcastModal",ref:w,"create-url":t(a),"new-art-url":t(f),"language-options":y.languageOptions,"categories-options":y.categoriesOptions,onRelist:k},null,8,["create-url","new-art-url","language-options","categories-options"])],64)}}});export{Bt as default};
