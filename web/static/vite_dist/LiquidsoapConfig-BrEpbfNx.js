import{d as F,r as m,c as L,p as N,b,e as o,g as c,t as e,w as a,E as S,o as s,F as T,s as B,h as u,u as $,x as M}from"./vue-B-dHMJBO.js";import{_ as w}from"./FormFieldset-CSY1jkmB.js";import{_ as z}from"./index-YC60PMYr.js";import{_ as D}from"./FormMarkup-BA315dX5.js";import{l as x}from"./lodash-Bdl6ys83.js";import{m as R}from"./mergeExisting-D7dGFTzO.js";import{_ as J}from"./InfoCard-D6xe4CFe.js";import{u as O}from"./useVuelidateOnForm-BgH7FQU3.js";import{u as P}from"./assets/frontend/js/pages/Stations-ClDpmz3n.js";import{d as Y,f as j}from"./usePlayerStore-BJXDzq-w.js";import{_ as G}from"./Loading-B4WK-6A0.js";import{g as H}from"./router-wzMi1FLb.js";import{_ as I}from"./CodemirrorTextarea-DPMi_c5t.js";import"./useFormField-DTxYJN5U.js";import"./FormGroup-DZPf8gKm.js";import"./lodash-BwctMegf.js";import"./icons-Yf7pfv1X.js";import"./index-Cwv7sFxi.js";import"./router-DA15hoP2.js";import"./PanelLayout-BXXqPnEo.js";import"./useOptionalStorage-CjmLv0hJ.js";import"./populateComponentRemotely-s4ApEVi1.js";import"./acl-VuRcXUu_.js";import"./useStationDateTimeFormatter-nKrxjiBK.js";import"./luxon-Cw61P3gq.js";import"./datetime-BTmRqpun.js";import"./Lightbox-CyVEhnVk.js";import"./HeaderInlinePlayer-DvP0QD5g.js";import"./InlinePlayer-B6VJrexO.js";import"./useShowVolume-aywU-oMl.js";import"./hlsjs-Cx0E5yqS.js";import"./formatTime-DvDPwXf4.js";import"./MuteButton-DqH7ZJD-.js";import"./lightbox-BJHiTgc7.js";import"./bootstrap.esm-BZy605kZ.js";import"./index.es-H4W9-E9O.js";const K={class:"card",role:"region","aria-labelledby":"hdr_edit_ls_config"},Q={class:"card-header text-bg-primary"},W={id:"hdr_edit_ls_config",class:"card-title"},X={class:"card-text"},Z={class:"card-text"},tt={class:"card-text"},ot={class:"card-body"},et={class:"typography-body-1"},Rt=F({__name:"LiquidsoapConfig",setup(at){const p=H("/liquidsoap-config"),n=m([]),f=m([]),{form:d,resetForm:k,v$:_,ifValid:V}=O(L(()=>{const t={};return x.forEach(n.value,i=>{t[i]={}}),t}),()=>{const t={};return x.forEach(n.value,i=>{t[i]=null}),t}),l=m(!0),{mayNeedRestart:E}=P(),{axios:g}=Y(),h=()=>{l.value=!0,g.get(p.value).then(t=>{f.value=t.data.config,n.value=t.data.sections,k(),d.value=R(d.value,t.data.contents)}).finally(()=>{l.value=!1})};N(h);const{notifySuccess:C}=j(),U=()=>{V(()=>{g({method:"PUT",url:p.value,data:d.value}).then(()=>{C(),E(),h()})})};return(t,i)=>(s(),b("form",{class:"form vue-form",onSubmit:S(U,["prevent"])},[o("section",K,[o("div",Q,[o("h2",W,e(t.$gettext("Edit Liquidsoap Configuration")),1)]),c(J,null,{default:a(()=>[o("p",X,e(t.$gettext("Using this page, you can customize several sections of the Liquidsoap configuration. This allows you to add advanced functionality to your station's AutoDJ.")),1),o("p",Z,e(t.$gettext("The editable text boxes are areas where you can insert custom configuration code. The non-editable sections are automatically generated by Aplus.")),1),o("p",tt,e(t.$gettext("This is an advanced feature and custom code is not officially supported by Aplus. You may break your station by adding custom code, but removing it should fix any issues.")),1)]),_:1}),c(G,{loading:l.value},{default:a(()=>[o("div",ot,[(s(!0),b(T,null,B(f.value,(r,y)=>(s(),u(w,{key:y,class:"mb-0"},{default:a(()=>[r.is_field?(s(),u(z,{key:0,id:"form_edit_"+r.field_name,field:$(_)[r.field_name]},{default:a(({id:q,model:v})=>[c(I,{id:q,modelValue:v.$model,"onUpdate:modelValue":A=>v.$model=A,mode:"liquidsoap"},null,8,["id","modelValue","onUpdate:modelValue"])]),_:2},1032,["id","field"])):(s(),u(D,{key:1,id:"form_section_"+y},{default:a(()=>[o("pre",et,e(r.markup??""),1)]),_:2},1032,["id"]))]),_:2},1024))),128)),o("button",{type:"submit",class:M(["btn",$(_).$invalid?"btn-danger":"btn-primary"])},e(t.$gettext("Save Changes")),3)])]),_:1},8,["loading"])])],32))}});export{Rt as default};
