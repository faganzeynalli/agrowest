import{d as C,r as p,j as S,b as i,e as t,g as m,t as s,u,E as V,w as r,o as l,i as f,F as b,s as F,f as w}from"./vue-B-dHMJBO.js";import{f as U,d as M}from"./usePlayerStore-CkejGpKz.js";import{_ as N,u as E}from"./useHasModal-BzUs2Wgc.js";import{_ as I}from"./FormGroup-DZPf8gKm.js";import{_ as T}from"./FormFile-nZ9a7fD4.js";import{g as B}from"./router-C-xyFC2M.js";import"./bootstrap.esm-BZy605kZ.js";import"./lodash-BwctMegf.js";import"./Loading-B4WK-6A0.js";import"./index-Ct57DpS4.js";const R={class:"row row-of-cards"},D={class:"col-md-6"},A={class:"card",role:"region","aria-labelledby":"hdr_export_media"},O={class:"card-header text-bg-primary"},j={id:"hdr_export_media",class:"card-title"},H={class:"card-body"},L={class:"card-text"},Y={class:"card-text"},q={class:"block-buttons"},z=["href"],G={class:"col-md-6"},J={class:"card",role:"region"},K={class:"card-header text-bg-primary"},P={class:"card-title"},Q={class:"card-body"},W={class:"card-text"},X={class:"block-buttons mt-3"},Z={type:"submit",class:"btn btn-block btn-primary"},tt={class:"card-text"},et={style:{"max-height":"300px","overflow-y":"scroll"}},st={class:"table table-striped table-responsive"},ot={class:"p-2"},at={class:"p-2"},it={class:"p-2",style:{"overflow-x":"auto"}},lt={class:"p-2",style:{"overflow-x":"auto"}},rt={key:0,class:"text-success"},dt={class:"text-danger"},nt={key:0},xt=C({__name:"BulkMedia",setup(ct){const h=B("/files/bulk"),d=p(null),n=p(null),{notifySuccess:g,notifyError:y}=U(),{axios:v}=M(),_=S("$modal"),{show:x,hide:c}=E(_),$=e=>{d.value=e},k=()=>{const e=new FormData;e.append("import_file",d.value),v.post(h.value,e).then(a=>{d.value=null,a.data.success?(n.value=a.data,g(a.data.message),x()):(y(a.data.message),c())})};return(e,a)=>(l(),i("div",R,[t("div",D,[t("section",A,[t("div",O,[t("h2",j,s(e.$gettext("Export Media to CSV")),1)]),t("div",H,[t("p",L,s(e.$gettext("Click the button below to generate a CSV file with all of this station's media. You can make any necessary changes, and then import the file using the file picker on the right.")),1),t("p",Y,s(e.$gettext("Note: If your media metadata has UTF-8 characters, you should use a spreadsheet editor that supports UTF-8 encoding, like OpenOffice.")),1),t("div",q,[t("a",{class:"btn btn-block btn-primary",href:u(h)},s(e.$gettext("Export Media to CSV")),9,z)])])])]),t("div",G,[t("section",J,[t("div",K,[t("h2",P,s(e.$gettext("Import Changes from CSV")),1)]),t("div",Q,[t("p",W,s(e.$gettext("The format and headers of this CSV should match the format generated by the export function on this page.")),1),t("form",{class:"form",onSubmit:V(k,["prevent"])},[m(I,{id:"import_file"},{label:r(()=>[f(s(e.$gettext("Select CSV File")),1)]),default:r(({id:o})=>[m(T,{id:o,onUploaded:$},null,8,["id"])]),_:1}),t("div",X,[t("button",Z,s(e.$gettext("Import Changes from CSV")),1)])],32)])])]),m(N,{id:"import_modal",ref_key:"$modal",ref:_,title:e.$gettext("Import Results")},{"modal-footer":r(()=>[t("button",{class:"btn btn-secondary",type:"button",onClick:a[0]||(a[0]=(...o)=>u(c)&&u(c)(...o))},s(e.$gettext("Close")),1)]),default:r(()=>[t("p",tt,s(n.value.message),1),t("div",et,[t("table",st,[t("thead",null,[t("tr",null,[t("th",ot,s(e.$gettext("Media File")),1),t("th",at,s(e.$gettext("Import Results")),1)])]),t("tbody",null,[(l(!0),i(b,null,F(n.value.import_results,o=>(l(),i("tr",{key:o.id},[t("td",it,[t("b",null,s(o.title),1),a[1]||(a[1]=t("br",null,null,-1)),f(" "+s(o.artist),1)]),t("td",lt,[o.success?(l(),i("div",rt,s(e.$gettext("Updated successfully.")),1)):(l(),i(b,{key:1},[t("div",dt,s(e.$gettext("Unable to update.")),1),o.error?(l(),i("div",nt,s(o.error),1)):w("",!0)],64))])]))),128))])])])]),_:1},8,["title"])]))}});export{xt as default};
